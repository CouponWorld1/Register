if (self.CavalryLogger) { CavalryLogger.start_js(["QwGgc"]); }

__d("FundsAvailability",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("MercuryAPIArgsSource",[],(function a(b,c,d,e,f,g){f.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function a(b,c,d,e,f,g){f.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessengerView",[],(function a(b,c,d,e,f,g){f.exports={DETAIL:{COMPOSE:"detail/compose",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{GROUPS:"master/groups",PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SUPPORT:"master/support",SEARCH:"master/search"}}}),null);
__d("PageCommItemStatus",[],(function a(b,c,d,e,f,g){f.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM"}}),null);
__d("PinnedConversationNubsActionTaken",[],(function a(b,c,d,e,f,g){f.exports={TAB_CLOSED_BY_USER:0,COMMENT_ADDED:1}}),null);
__d("AppsDivebarDisplayController",["AppsDivebarConfigData","AsyncRequest","Arbiter","CSS","UIPagelet","cx","$"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=171,p={isVisible:function q(){if(this._visible!==undefined)return this._visible;this._visible=!h.hidden;return this._visible},showApps:function q(){this._visible=true;var r={fb_source_category:"sidebar"};l.loadFromEndpoint("GamesDivebarPagelet","pagelet_canvas_nav_content",r);k.show(n("apps_gripper"));k.show(n("pagelet_canvas_nav_content"));k.addClass(n("pagelet_canvas_nav_content"),"_4woj");j.inform("AppsDivebar/show-apps");new i("/ajax/feed/apps/resize").setData({height:""+o,menu:true}).setMethod("POST").send()},hideApps:function q(){this._visible=false;k.hide(n("pagelet_canvas_nav_content"));k.hide(n("apps_gripper"));j.inform("AppsDivebar/hide-apps");new i("/ajax/feed/apps/resize").setData({height:"1",menu:true}).setMethod("POST").send()}};f.exports=p}),null);
__d("AsyncLoader",["AsyncRequest","BaseAsyncLoader"],(function a(b,c,d,e,f,g,h,i){function j(k,l){this._endpoint=k;this._type=l}Object.assign(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){new h(k).setData({ids:l}).setHandler(n).setErrorHandler(o).setAllowCrossPageTransition(true).setMethod("GET").setReadOnly(true).send()};f.exports=j}),null);
__d("ChannelConnection",["Arbiter","ChannelConstants","ChannelManager","JSLogger","Run","SystemEvents","Visibility","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=k.create("channel_connection"),q=null,r=null,s=null,t=null,u=0;j.startChannelManager();var v=Object.assign(new h(),{CONNECTED:"chat-connection/connected",RECONNECTING:"chat-connection/reconnecting",SHUTDOWN:"chat-connection/shutdown",MUTE_WARNING:"chat-connection/mute",UNMUTE_WARNING:"chat-connection/unmute"});l.onBeforeUnload(function(){});function w(){if(r){clearTimeout(r);r=null}}function x(){w();p.log("unmute_warning");v.inform(v.UNMUTE_WARNING)}function y(D){w();r=o(x,D);p.log("mute_warning",{time:D});v.inform(v.MUTE_WARNING)}function z(){if(s){clearTimeout(s);s=null}}function A(D,E){__p&&__p();z();if(D===i.ON_ENTER_STATE&&(E.nextState||E.state)==="pull"){if(t!==v.CONNECTED){p.log("connected");var F=!t;t=v.CONNECTED;u=0;v.inform(v.CONNECTED,{init:F})}}else if(D===i.ON_ENTER_STATE&&((E.nextState||E.state)==="ping"||!E.nextState&&E.state==="idle"))s=o(function(){__p&&__p();var G=null;if(!(E.state==="idle"&&!E.nextState))G=E.delay||0;p.log("reconnecting",{delay:G});if(v.disconnected())p.log("reconnecting_ui",{delay:G});t=v.RECONNECTING;E.state==="idle"&&u++;if(u>1)v.inform(v.RECONNECTING,G);else if(!E.nextState&&E.state==="idle")A(D,E)},500);else if(D===i.ON_SHUTDOWN){p.log("shutdown",{reason:E.reason});t=v.SHUTDOWN;u=0;v.inform(v.SHUTDOWN,E.reason)}}function B(){if(j.isShutdown())A(i.ON_SHUTDOWN,j._shutdownHint);else A(i.ON_ENTER_STATE,{state:j.state,nextState:j.nextState,delay:0});n.addListener(n.VISIBLE,v.reconnect)}l.onAfterLoad(B);Object.assign(v,{disconnected:function D(){return t===v.SHUTDOWN||t===v.RECONNECTING&&!r&&u>1},isShutdown:function D(){return t===v.SHUTDOWN},reconnect:function D(E){__p&&__p();if(j.state==="ping"||j.state==="pull"||j.isShutdown())return;p.log("reconnect",{now:E});v.inform(v.RECONNECTING,0);if(!!E){if(q!==null){clearTimeout(q);q=null}j.enterState("ping!")}else if(!q)q=o(function(){j.enterState("ping!");q=null},i.CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);j.resetDelay()},unmuteWarning:x});function C(){h.subscribe([i.ON_ENTER_STATE,i.ON_SHUTDOWN],A);h.subscribe(i.ATTEMPT_RECONNECT,function(){if(v.disconnected())v.reconnect()});m.subscribe(m.TIME_TRAVEL,function(){v.reconnect();y(i.MUTE_WARNING_TIME_MSEC)});l.onBeforeUnload(z,false)}l.onAfterLoad(C);v.mockAfterLoad=function(){B();C()};h.subscribe(k.DUMP_EVENT,function(D,E){E.channel_connected=!v.disconnected()});f.exports=v}),3);
__d("ChatHovercard",["Arbiter","AsyncLoader","Bootloader","JSLogger","TimeSlice","debounce","emptyFunction","gkx","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=5,r=new i("/ajax/chat/hovercard/sidebar.php","hover"),s=k.create("chat_hovercard");h.subscribe("Hovercard/dirty",r.reset.bind(r));function t(y,z){var A=function A(){r.get(y,z)};if(o("AT45Q0YAtTF77a1x8ZT9-rWfsF83gTI5tMuldZujY0KaNI6icTW09jBEE5BSuvPKdZtVIIdleK4appEhrvQPrVOyhvdXTeLDSdYEXUe9KmbS3Q"))l.guard(A,"superfluous request to first open DD",{propagationType:l.PropagationType.ORPHAN})();else A()}function u(y,z){__p&&__p();if(!y)return;t(y,function(A){__p&&__p();p(function(){__p&&__p();if(!A){s.error("fetch_failure",{id:y});return}j.loadModules(["Hovercard"],function(B){var C=B.getDialog(A);if(!C){s.error("no_hovercard",{id:y,endpoint:A});return}if(y==z.getActiveID())z.showHovercard(y,C)},"ChatHovercard")},0)})}function v(y,z){__p&&__p();var A=[];function B(E){if(E>=0&&E<y.length)A.push(y[E])}var C=y.indexOf(z);if(C>-1){B(C);for(var D=1;D<q;D++){B(C+D);B(C-D)}}return A.filter(function(E){return E})}function w(y,z){var A=z.getActiveID();if(A){var B=y.getShowingUsers(),C=v(B,A);t(C,n)}}function x(y){var z=y.getHoverController();z.registerDefault(u);z.subscribe("hover",m(w.bind(null,y,z),100))}f.exports=x}),null);
__d("setImmediate",["TimerStorage","TimeSlice","setImmediateAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();function k(l){__p&&__p();var m=void 0,n=function n(){h.unset(h.IMMEDIATE,m);for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];Function.prototype.apply.call(l,this,s)};i.copyGuardForWrapper(l,n);for(var o=arguments.length,p=Array(o>1?o-1:0),q=1;q<o;q++)p[q-1]=arguments[q];m=j.apply(undefined,[n].concat(p));h.set(h.IMMEDIATE,m);return m}f.exports=k}),null);
__d("ChatOrderedListHover",["ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","csx","mixin","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r,s;function t(w){i.addClass(w,"fetching")}function u(w){i.removeClass(w,"fetching")}r=babelHelpers.inherits(v,o(h));s=r&&r.prototype;function v(w){"use strict";s.constructor.call(this);this._orderedList=w;this._root=w.getRoot();k.listen(this._root,"mouseover",this._mouseOver.bind(this));k.listen(this._root,"mouseleave",this._mouseLeave.bind(this));w.subscribe("click",q(this._hide,this))}v.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var w=event.getTarget(),x=m.bySelector(w,"._42fz")||m.bySelector(w,"._5a58");x&&this._setActiveItem(x)};v.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null)};v.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null};v.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null}};v.prototype._show=function(){"use strict";var w=this.getActiveID(),x=false;if(this._defaultHandler){x=true;j.applyWithGuard(this._defaultHandler,{},[w,this])}if(x&&this._showingID!=this.getActiveID())t(this._activeItem)};v.prototype._setActiveItem=function(w){"use strict";__p&&__p();if(w!=this._activeItem){this._clearTimeouts();this._activeItem&&u(this._activeItem);if(w){this._activeItem=w;var x=this._showingDialog?0:600;this._showTimeout=p(function(){return this._show()}.bind(this),x);this.inform("hover")}else{this._activeItem=null;this._hideTimeout=p(function(){return this._hide()}.bind(this),10);this.inform("leave")}}};v.prototype.registerDefault=function(w){"use strict";this._defaultHandler=w};v.prototype.getActiveID=function(){"use strict";var w=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return w||null};v.prototype.showHovercard=function(w,x){"use strict";__p&&__p();if(w==this.getActiveID()&&w!=this._showingID){this._clearTimeouts();u(this._activeItem);this._hide();this._showingDialog=x;this._showingID=w;var y=x.subscribe("mouseenter",this._setActiveItem.bind(this,this._activeItem)),z=x.subscribe("mouseleave",function(){y.unsubscribe();this._setActiveItem(null)}.bind(this)),A=x.subscribe("hide",function(){this.inform("hovercard_hide");y.unsubscribe();z.unsubscribe();A.unsubscribe()}.bind(this));x.enableBehavior(l).setContext(this._activeItem).setPosition("left").show();this.inform("hovercard_show")}};Object.assign(v.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});f.exports=v}),null);
__d("ChatSidebarConstants",["ChatConfig"],(function a(b,c,d,e,f,g,h){"use strict";var i=h.get("divebar_rounded_profile",false),j={IMAGE_SIZE:32,getImageSize:function k(){return j.IMAGE_SIZE+(i?2:0)},getItemHeight:function k(){return j.IMAGE_SIZE+8}};f.exports=j}),null);
__d("ChatSidebarItem.react",["AvailableListConstants","CurrentUser","QuicksilverSources","XGamesQuicksilverController","XUIBadge.react","BootloadOnRender.react","ChatConfig","ChatSidebarConstants","ErrorBoundary.react","Image.react","InstantGamesWWWChatSidebarConfig","JSResource","LazyComponent.react","Link.react","QE2Logger","React","SplitImage.react","TextWithEmoticons.react","emptyFunction","fbglyph","cssVar","cx","gkx","goURI","ix","xuiglyph"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){"use strict";__p&&__p();var H,I,J=w.PropTypes,K=n.get("divebar_rounded_profile",false),L=9,M=function M(){return w.createElement(u,{"aria-hidden":true,tabIndex:-1})};H=babelHelpers.inherits(N,w.PureComponent);I=H&&H.prototype;function N(){var U,V;for(var W=arguments.length,X=Array(W),Y=0;Y<W;Y++)X[Y]=arguments[Y];return V=(U=I.constructor).call.apply(U,[this].concat(X)),this.state={hover:false},this.$ChatSidebarItem1=function(){this.setState({hover:true});this.props.onMouseEnter()}.bind(this),this.$ChatSidebarItem2=function(){this.setState({hover:false})}.bind(this),this.renderLastActiveTime=function(){return w.createElement("div",{className:"_568-"},this.props.statusTime)}.bind(this),V}N.prototype.render=function(){var U="_55ln"+(this.props.context?" _55lo":"")+(K?" _qhr":"");return w.createElement(p,{fallbackComponent:M},w.createElement(u,{className:U,href:this.props.href,onClick:this.props.onClick,onMouseEnter:this.$ChatSidebarItem1,onMouseLeave:this.$ChatSidebarItem2,rel:"ignore"},w.createElement("div",{className:"_55lp"},w.createElement("div",{className:"_55lq","aria-hidden":true},w.createElement(x,{size:this.props.imageSize||o.IMAGE_SIZE,srcs:this.props.image||this.props.images})),w.createElement("div",{className:"_5bon"},this.renderWaveButton(),this.renderPlayingGame(),this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),w.createElement("div",{className:"_55lr"},this.renderName()),w.createElement("div",{className:"_55ls"},this.props.context))))};N.prototype.renderName=function(){if(this.props.nameCanHaveEmoji)return w.createElement(y,{renderEmoticons:true,renderEmoji:true,text:this.props.name});else return this.props.name};N.prototype.renderUnreadCount=function(){var U=this.props.unreadCount;if(!U)return null;return w.createElement(l,{count:U,maxcount:L,type:"regular"})};N.prototype.renderStatus=function(){var U=this.$ChatSidebarItem3();if(!U&&!this.props.statusTime)return null;var V=true;if(this.props.unreadCount&&this.props.unreadCount>0){U=this.props.statusTime?null:U;V=false}return w.createElement("div",{className:"_568z"+(this.props.showRelationshipIndicator?" _2oov":"")},V?this.renderLastActiveTime():null,U)};N.prototype.renderWaveButton=function(){if(!this.props.showWave||!this.props.userID)return null;return w.createElement(m,{loader:s("WaveButton.react").__setRef("ChatSidebarItem.react"),placeholder:w.createElement("div",null),component:w.createElement(t,{userID:this.props.userID,hover:this.state.hover})})};N.prototype.renderBirthday=function(){if(!this.props.birthday)return null;if(i.isWorkUser()&&!D("AT6xZmI2OdSYphpl234QKktFXq5sRz0kw7_B2KSTTJG4l__HXq2R95tfCOGk3WHJAmEbSfznHtUDjqZLC1cYF7k9"))return null;return w.createElement(q,{className:"_5dv3",src:R()})};N.prototype.renderPlayingGame=function(){if(this.props.statusTime||this.props.birthday||!this.props.isPlayingGame)return null;return w.createElement("div",{className:"_46b2"},w.createElement(q,{onClick:this.$ChatSidebarItem4,className:"_46b3",src:T()}))};N.prototype.$ChatSidebarItem4=function(){v.logExposureForUser("instant_games_presence");if(!r.games_icon_link)return;var U=k.getURIBuilder().setEnum("source",j.WWW_CHAT_SIDEBAR_PRESENCE).getURI();E(U)};N.prototype.$ChatSidebarItem3=function(){if(this.props.isMessengerOnlyContact)return w.createElement(q,{className:"_568_",src:S()});else if(this.props.status===h.ACTIVE)if(this.props.showRelationshipIndicator)return w.createElement(q,{className:"_568_",src:F("118297")});else return w.createElement("span",{style:{background:"#42b72a",borderRadius:"50%",display:"inline-block",height:"6px",marginLeft:"4px",veritcalAlign:"middle",width:"6px"}});return null};N.defaultProps={onMouseEnter:z};N.propTypes={birthday:J.bool,context:J.node,href:J.string,imageSize:J.number,image:J.string,images:J.array,isPlayingGame:J.bool,isMessengerOnlyContact:J.bool,name:J.node.isRequired,nameCanHaveEmoji:J.bool,onClick:J.func,showRelationshipIndicator:J.bool,status:J.number,statusTime:J.string,unreadCount:J.number,userID:J.string,showWave:J.bool};var O=void 0,P=void 0,Q=void 0;function R(){if(!O)O=F("74517");return O}function S(){if(!Q)Q=F("28076");return Q}function T(){if(!P)P=F("89258");return P}f.exports=N}),null);
__d("ChatSidebarThread.react",["ChatOpenTabEventLogger","ChatSidebarItem.react","FantaTabActions","MercuryIDs","MercuryParticipantListRenderer","WebMessengerThreadPermalinks","React","TooltipData","fbt","requireWeak"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r,s,t=n.PropTypes,u=10,v="\n";r=babelHelpers.inherits(w,n.PureComponent);s=r&&r.prototype;function w(){__p&&__p();var z,A;for(var B=arguments.length,C=Array(B),D=0;D<B;D++)C[D]=arguments[D];return A=(z=s.constructor).call.apply(z,[this].concat(C)),this.$ChatSidebarThread2=function(E){var F=this.props.threadFBID;E.preventDefault();if(F){j.openTab(k.getThreadIDFromThreadFBID(F),["divebar_groups"]);h.logClickOpen(this.props.referrer,F)}}.bind(this),A}w.prototype.render=function(){var z=this.props.name,A=x(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),B=z?A:undefined,C=this.props.image?[]:y(this.props.participants),D=z?z:A;return n.createElement("div",o.propsFor(this.$ChatSidebarThread1()),n.createElement(i,{context:B,href:this.props.threadFBID&&m.getThreadURIFromServerID(this.props.threadFBID),imageSize:this.props.imageSize,image:this.props.image,images:C,name:D,nameCanHaveEmoji:true,onClick:this.$ChatSidebarThread2,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount,showWave:false}))};w.prototype.$ChatSidebarThread1=function(){__p&&__p();var z=[],A=this.props.participants.length,B=this.props.numOtherParticipants,C=Math.min(u,A);if(B-C===1)C--;var D=0;while(z.length<C&&D<this.props.participants.length){var E=this.props.participants[D].name;if(E)z.push(E);D++}if(C<B)z.push(p._("and {num} more...",[p.param("num",B-C)]));return z.join(v)};w.propTypes={image:t.string,imageSize:t.number,name:t.string,participants:t.array.isRequired,numOtherParticipants:t.number.isRequired,referrer:t.string,status:t.number,threadFBID:t.string,unreadCount:t.number};w.defaultProps={numOtherParticipants:u};function x(z,A,B){return new l().setIsNewThread(!z).setUseShortName(true).setTotalParticipantCount(B).renderParticipantList(A).toString()}function y(z){return z.map(function(A){return A.image_src}).filter(function(A){return A})}f.exports=w}),null);
__d("ChatSidebarGroupThreadsGroup.react",["ChatSidebarThread.react","ChatSidebarSections","ChatSidebarConstants","PresencePrivacy","PresenceStatus","React","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o,p,q=m.PropTypes;o=babelHelpers.inherits(r,m.Component);p=o&&o.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=p.constructor).call.apply(s,[this].concat(v)),this.$ChatSidebarGroupThreadsGroup1=function(x){var y=x.mercury_thread.participants,z=this.props.isDisconnected||k.isUserOffline();return m.createElement("li",{className:"_42fz"+(z?" _570-":""),"data-id":x.uid,key:x.uid},m.createElement(h,{image:x.mercury_thread.image_src,imageSize:j.getImageSize(),name:x.mercury_thread.name,participants:x.participants_to_render,numOtherParticipants:y.length-1,referrer:i.ORDERED_LIST,status:l.getGroup(y),threadFBID:x.uid}))}.bind(this),t}r.prototype.render=function(){return m.createElement("ul",null,this.props.groups.map(this.$ChatSidebarGroupThreadsGroup1))};r.propTypes={groups:q.array.isRequired,isDisconnected:q.bool};f.exports=r}),null);
__d("ChatSidebarHeader.react",["React","cx","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,h.PureComponent);l=k&&k.prototype;m.prototype.render=function(){"use strict";return h.createElement("div",babelHelpers["extends"]({},this.props,{className:j(this.props.className,"_55ob")}),h.createElement("div",{className:"_55oc"},this.props.children))};function m(){"use strict";k.apply(this,arguments)}f.exports=m}),null);
__d("ChatSidebarItemPlaceholder.react",["React","cx"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=function j(l){return 50+Math.ceil(50-2*(Math.pow(7+l,2)%10))},k=function k(l){return h.createElement("li",{className:"_42fz"+(l.isDisconnected?" _570-":"")},h.createElement("div",{className:"_55ln"+(l.roundedProfile?" _qhr":"")},h.createElement("div",{className:"_55lp"},h.createElement("span",{className:"_1qh _55lq"}),h.createElement("span",{className:"_55lr"},h.createElement("span",{className:"_1qh",style:{width:j(l.slot)+"px"}})))))};f.exports=k}),null);
__d("ChatSidebarUser.react",["Bootloader","ChatConfig","ChatOpenTabEventLogger","ChatSidebarItem.react","FantaTabActions","MercuryIDs","WebMessengerThreadPermalinks","React","requireWeak"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q,r,s=o.PropTypes;q=babelHelpers.inherits(t,o.PureComponent);r=q&&q.prototype;function t(){__p&&__p();var u,v;"use strict";for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=r.constructor).call.apply(u,[this].concat(x)),this.$ChatSidebarUser1=function(z){var A=this.props,B=A.sectionName,C=A.slot,D=A.userID,E=m.getThreadIDFromUserID(D);l.openTab(E,["divebar_"+B]);j.logUserClickOpen(B,D,{global_slot:C});z.preventDefault();this.$ChatSidebarUser2()}.bind(this),v}t.prototype.render=function(){"use strict";var u=n.getThreadURIFromUserID(this.props.userID);return o.createElement(k,{onClick:this.$ChatSidebarUser1,href:u,imageSize:this.props.imageSize,image:this.props.image,isPlayingGame:this.props.isPlayingGame,name:this.props.name,nameCanHaveEmoji:false,showRelationshipIndicator:this.props.showRelationshipIndicator,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,context:this.props.context,unreadCount:this.props.unreadCount,isMessengerOnlyContact:this.props.isMessengerOnlyContact,userID:this.props.userID,showWave:this.props.showWave})};t.prototype.$ChatSidebarUser2=function(){"use strict";var u=this.props.sectionName;if(i.get("in_recents_experiment"))h.loadModules(["FunnelLogger"],function(v){v.appendAction("WWW_DIVEBAR_RECENTS_FUNNEL","open_tab_"+u)},"ChatSidebarUser.react")};t.propTypes={birthday:s.bool,image:s.string,imageSize:s.number,isPlayingGame:s.bool,name:s.string,sectionName:s.string.isRequired,showRelationshipIndicator:s.bool,slot:s.number,status:s.number,statusTime:s.string,unreadCount:s.number,userID:s.string.isRequired,isMessengerOnlyContact:s.bool,context:s.string,showWave:s.bool};f.exports=t}),null);
__d("ChatSidebarUserGroup.react",["AvailableListConstants","ChatConfig","ChatSidebarItemPlaceholder.react","ChatSidebarSections","ChatSidebarUser.react","LastActiveTimes","MercuryConfig","PresencePrivacy","React","cx","gkx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s=p.PropTypes,t=i.get("divebar_rounded_profile",false),u=Object.keys(k).map(function(x){return k[x]}),v=function v(x,y,z){if(!y)return p.createElement(j,{isDisconnected:!!x.isDisconnected,key:"placeholder"+z,roundedProfile:t,slot:z});if(!y.id)return null;var A=x.statusMap[y.id],B=A!==h.ACTIVE?m.getShortDisplay(y.id):undefined,C=x.isDisconnected||!o.allows(y.id),D=x.sectionName===k.NEARBY?y.location:undefined,E=r("AT5N7c3vp2KZeBLcdLGCkrCGhNAJHtjW4P7Xmlq4tK83K879cfHJ4CNLjdjOGJAQApRspNV8z5qOFgj3xZqsPbN0");return p.createElement("li",{className:"_42fz"+(C?" _570-":""),"data-id":y.id,key:y.id},p.createElement(l,{birthday:y.is_birthday,image:y.thumbSrc,imageSize:x.imageSize,isPlayingGame:!!x.playingMap[y.id],name:y.name,roundedProfile:t,showRelationshipIndicator:y.show_relationship_indicator,sectionName:x.sectionName,slot:z,status:A,statusTime:B?B.toString():undefined,userID:y.id,unreadCount:x.unreadCounts[y.id],isMessengerOnlyContact:y.is_messenger_only,context:D,showWave:E}))},w=function w(x){var y=x.userData,z=babelHelpers.objectWithoutProperties(x,["userData"]);delete z.imageSize;delete z.isDisconnected;delete z.playingMap;delete z.sectionName;delete z.statusMap;delete z.unreadCounts;return p.createElement("ul",z,y.map(function(A,B){return v(x,A,B)}))};w.propTypes={imageSize:s.number.isRequired,isDisconnected:s.bool.isRequired,sectionName:s.oneOf(u).isRequired,playingMap:s.object.isRequired,statusMap:s.object.isRequired,unreadCounts:s.object.isRequired,userData:s.arrayOf(s.object).isRequired};f.exports=w}),null);
__d("ChatUnreadCountStore",["ChatDispatcher","ChatUnreadCountActionTypes","FluxStore","ifRequired"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m;l=babelHelpers.inherits(n,j);m=l&&l.prototype;function n(){m.constructor.call(this,h)}n.prototype.__onDispatch=function(o){var p=o.type;switch(p){case i.COUNT_UPDATED:this.__emitChange();break;default:break}};n.prototype.get=function(o){return k("ChatUnreadCount",function(p){return p.get().getUnreadCountForUID(o)},function(){return 0})};f.exports=new n()}),null);
__d("PresenceStatusStore",["ChatDispatcher","FluxStore","PresenceStatus","PresenceStatusActionTypes"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m;l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(){m.constructor.call(this,h)}n.prototype.__onDispatch=function(o){var p=o.type;switch(p){case k.AVAILABILITY_CHANGED:this.__emitChange();break;default:break}};n.prototype.get=function(o){return j.get(o)};n.prototype.getIsPlaying=function(o){return j.isPlayingCanvasGameUser(o)};f.exports=new n()}),null);
__d("ShortProfilesActionTypes",["keyMirror"],(function a(b,c,d,e,f,g,h){"use strict";f.exports=h({PROFILE_UPDATED:null})}),null);
__d("ShortProfilesStore",["ChatDispatcher","ChatProfileStore","FluxStore","ShortProfiles","ShortProfilesActionTypes","debounce","gkx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o,p;o=babelHelpers.inherits(q,j);p=o&&o.prototype;function q(){p.constructor.call(this,h);if(n("AT7b-T545bsAAbOyiRE0i8vzwAqg-R4NRaZ4WCkL5TZUAjQ3ntria2ZiM69962yv5cnbq6KuBYvaMYzUdYYVWB-O"))this.$ShortProfilesStore1=m(this.$ShortProfilesStore1,50)}q.prototype.__onDispatch=function(r){var s=r.type;switch(s){case l.PROFILE_UPDATED:this.__emitChange();break;default:break}};q.prototype.getNow=function(r){var s=i.get(r);if(!s)s=k.getNow(r);return s};q.prototype.getMulti=function(r){k.getMulti(r,this.$ShortProfilesStore1)};q.prototype.$ShortProfilesStore1=function(r){h.dispatch({type:l.PROFILE_UPDATED})};f.exports=new q()}),null);
__d("ChatSidebarUserGroupContainer.react",["AvailableListConstants","ChatSidebarSections","ChatSidebarUserGroup.react","ChatUnreadCountStore","PresenceStatusStore","ShortProfilesStore","React","emptyFunction","requireWeak","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r,s,t=n.PropTypes,u=400,v=5e3,w=Object.keys(i).map(function(y){return i[y]});r=babelHelpers.inherits(x,n.Component);s=r&&r.prototype;function x(y){__p&&__p();s.constructor.call(this,y);this.$ChatSidebarUserGroupContainer1={};this.$ChatSidebarUserGroupContainer2=null;this.$ChatSidebarUserGroupContainer3=null;this.$ChatSidebarUserGroupContainer4=null;this.componentWillReceiveProps=function(E){this.$ChatSidebarUserGroupContainer9(E)}.bind(this);this.componentWillUnmount=function(){this.$ChatSidebarUserGroupContainer2&&this.$ChatSidebarUserGroupContainer2.remove();this.$ChatSidebarUserGroupContainer3&&this.$ChatSidebarUserGroupContainer3.remove();this.$ChatSidebarUserGroupContainer4&&this.$ChatSidebarUserGroupContainer4.remove()}.bind(this);this.$ChatSidebarUserGroupContainer10=function(){if(!this.$ChatSidebarUserGroupContainer5)this.$ChatSidebarUserGroupContainer5=q(function(){p("FantaTabsEagerBootloader",function(E){return E.bootload()});this.$ChatSidebarUserGroupContainer10=o}.bind(this),u)}.bind(this);this.$ChatSidebarUserGroupContainer11=function(){clearTimeout(this.$ChatSidebarUserGroupContainer5);this.$ChatSidebarUserGroupContainer5=null}.bind(this);var z=this.$ChatSidebarUserGroupContainer6(y.ids,y.loadExtras),A=z.playingMap,B=z.statusMap,C=this.$ChatSidebarUserGroupContainer7(y.ids),D=this.$ChatSidebarUserGroupContainer8(y.ids);this.state={playingMap:A,statusMap:B,unreadCounts:C,userData:D}}x.prototype.componentDidMount=function(){this.$ChatSidebarUserGroupContainer2=k.addListener(function(){this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this));this.$ChatSidebarUserGroupContainer3=l.addListener(function(){this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this));this.$ChatSidebarUserGroupContainer4=m.addListener(function(){this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this))};x.prototype.shouldComponentUpdate=function(y,z){__p&&__p();for(var A=Object.keys(this.$ChatSidebarUserGroupContainer1),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}var E=D;if(this.$ChatSidebarUserGroupContainer1[E])return false}if(this.props.ids!==y.ids||this.props.imageSize!==y.imageSize||this.props.isDisconnected!==y.isDisconnected||this.props.loadExtras!==y.loadExtras||this.props.sectionName!==y.sectionName||this.state.userData.length!==z.userData.length)return true;for(var F=Object.keys(this.state.unreadCounts),G=Array.isArray(F),H=0,F=G?F:F[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=F.length)break;I=F[H++]}else{H=F.next();if(H.done)break;I=H.value}var J=I;if(z.unreadCounts[J]!==this.state.unreadCounts[J])return true}for(var K=Object.keys(this.state.statusMap),L=Array.isArray(K),M=0,K=L?K:K[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var N;if(L){if(M>=K.length)break;N=K[M++]}else{M=K.next();if(M.done)break;N=M.value}var O=N;if(z.statusMap[O]!==this.state.statusMap[O])return true}for(var P=Object.keys(z.statusMap),Q=Array.isArray(P),R=0,P=Q?P:P[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var S;if(Q){if(R>=P.length)break;S=P[R++]}else{R=P.next();if(R.done)break;S=R.value}var T=S;if(z.statusMap[T]!==this.state.statusMap[T])return true}for(var U=0;U<this.state.userData.length;U++)if(!this.state.userData[U]||!z.userData[U]||this.state.userData[U].id!==z.userData[U].id)return true;return false};x.prototype.render=function(){return n.createElement(j,{imageSize:this.props.imageSize,isDisconnected:this.props.isDisconnected,playingMap:this.state.playingMap,sectionName:this.props.sectionName,statusMap:this.state.statusMap,unreadCounts:this.state.unreadCounts,userData:this.state.userData,onMouseEnter:this.$ChatSidebarUserGroupContainer10,onMouseLeave:this.$ChatSidebarUserGroupContainer11})};x.prototype.$ChatSidebarUserGroupContainer9=function(y){var z=this.$ChatSidebarUserGroupContainer7(y.ids),A=this.$ChatSidebarUserGroupContainer6(y.ids,y.loadExtras),B=A.playingMap,C=A.statusMap,D=this.$ChatSidebarUserGroupContainer8(y.ids);this.setState({playingMap:B,statusMap:C,unreadCounts:z,userData:D})};x.prototype.$ChatSidebarUserGroupContainer6=function(y,z){__p&&__p();var A={},B={};y.forEach(function(C){if(z){var D=l.getIsPlaying(C);A[C]=D}var E=l.get(C);if(E===h.ACTIVE)B[C]=E});return{statusMap:B,playingMap:A}};x.prototype.$ChatSidebarUserGroupContainer7=function(y){var z={};y.forEach(function(A){z[A]=k.get(A)});return z};x.prototype.$ChatSidebarUserGroupContainer8=function(y){__p&&__p();var z=[],A=[];y.forEach(function(B){var C=m.getNow(B);z.push(C);if(C)this.$ChatSidebarUserGroupContainer12(B);else{this.$ChatSidebarUserGroupContainer13(B);A.push(B)}}.bind(this));if(A.length>0)m.getMulti(A);return z};x.prototype.$ChatSidebarUserGroupContainer13=function(y){if(this.$ChatSidebarUserGroupContainer1[y]===undefined)this.$ChatSidebarUserGroupContainer1[y]=q(function(){this.$ChatSidebarUserGroupContainer1[y]=null;this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this),v)};x.prototype.$ChatSidebarUserGroupContainer12=function(y){var z=this.$ChatSidebarUserGroupContainer1[y];if(!z)return;clearTimeout(z);this.$ChatSidebarUserGroupContainer1[y]=null};x.propTypes={ids:t.arrayOf(t.string).isRequired,imageSize:t.number.isRequired,isDisconnected:t.bool.isRequired,loadExtras:t.bool.isRequired,sectionName:t.oneOf(w).isRequired};f.exports=x}),null);
__d("MessengerDivebarGroupSectionTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function k(){this.clear()}k.prototype.log=function(){i.log("logger:MessengerDivebarGroupSectionLoggerConfig",this.$MessengerDivebarGroupSectionTypedLogger1,h.BASIC)};k.prototype.logVital=function(){i.log("logger:MessengerDivebarGroupSectionLoggerConfig",this.$MessengerDivebarGroupSectionTypedLogger1,h.VITAL)};k.prototype.logImmediately=function(){i.log("logger:MessengerDivebarGroupSectionLoggerConfig",this.$MessengerDivebarGroupSectionTypedLogger1,{signal:true})};k.prototype.clear=function(){this.$MessengerDivebarGroupSectionTypedLogger1={};return this};k.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerDivebarGroupSectionTypedLogger1)};k.prototype.updateData=function(m){this.$MessengerDivebarGroupSectionTypedLogger1=babelHelpers["extends"]({},this.$MessengerDivebarGroupSectionTypedLogger1,m);return this};k.prototype.setNewDataSource=function(m){this.$MessengerDivebarGroupSectionTypedLogger1.new_data_source=m;return this};k.prototype.setNumThreadsActive=function(m){this.$MessengerDivebarGroupSectionTypedLogger1.num_threads_active=m;return this};k.prototype.setNumThreadsGenned=function(m){this.$MessengerDivebarGroupSectionTypedLogger1.num_threads_genned=m;return this};k.prototype.setVC=function(m){this.$MessengerDivebarGroupSectionTypedLogger1.vc=m;return this};var l={new_data_source:true,num_threads_active:true,num_threads_genned:true,vc:true};f.exports=k}),null);
__d("ChatSidebarOrderedList.react",["AvailableListConstants","Bootloader","BootloadOnRender.react","ChatConfig","ChatQuietLinks","ChatReliabilityInstrumentation","ChatSidebarConstants","ChatSidebarGroupThreadsGroup.react","ChatSidebarHeader.react","ChatSidebarSections","ChatSidebarUserGroupContainer.react","CurrentUser","CSS","Image.react","LazyComponent.react","JSResource","LeftRight.react","Link.react","MessengerDivebarGroupSectionTypedLogger","MessengerWebDriverTestIDs","PresencePrivacy","PresenceStatus","React","ReactDOM","Run","Scroll","SubscriptionsHandler","URI","WorkInviteSource","WorkModeConfig","XPagesBrowserController","XUIButton.react","XWorkInviteCoworkersDialogController","cx","fbglyph","fbt","ifRequired","ix"],(function a(b,c,aa,ba,d,ca,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,da,ea,L,M,N){"use strict";__p&&__p();var O,P,Q=A.PropTypes,R=3;O=babelHelpers.inherits(S,A.PureComponent);P=O&&O.prototype;function S(){var T,U;for(var V=arguments.length,W=Array(V),X=0;X<V;X++)W[X]=arguments[X];return U=(T=P.constructor).call.apply(T,[this].concat(W)),this.state={isDisconnected:false,renderBelowFold:false},this.$ChatSidebarOrderedList1=null,this.$ChatSidebarOrderedList2=null,this.$ChatSidebarOrderedList3=null,this.$ChatSidebarOrderedList4=null,this.$ChatSidebarOrderedList5=null,U}S.prototype.componentDidMount=function(){i.nukeLinks(B.findDOMNode(this.refs.noLinks));this.$ChatSidebarOrderedList1=new E();var T=this.props.groups.filter(function(U){return z.getGroup(U.mercury_thread.participants)===e.ACTIVE});new w().setNumThreadsGenned(this.props.groups.length).setNewDataSource(h.get("only_active_groups")||h.get("update_groups_source")).setNumThreadsActive(T.length).log();C.onAfterLoad(function(){this.setState({renderBelowFold:true});this.$ChatSidebarOrderedList6()}.bind(this))};S.prototype.componentWillUnmount=function(){this.$ChatSidebarOrderedList1.release()};S.prototype.render=function(){var T=y.getOnlinePolicy()===y.ONLINE_TO_WHITELIST&&y.getVisibility()?this.$ChatSidebarOrderedList7():this.$ChatSidebarOrderedList8();if(H.test_group_section_order||h.get("display_groups_top"))return A.createElement("div",{"data-testid":x.CHAT_SIDEBAR},A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList9()),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList10()),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList11(),this.$ChatSidebarOrderedList12(),this.$ChatSidebarOrderedList13(),this.$ChatSidebarOrderedList14()),this.$ChatSidebarOrderedList15(),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList16(),T,this.$ChatSidebarOrderedList17(),this.$ChatSidebarOrderedList18()));return A.createElement("div",{"data-testid":x.CHAT_SIDEBAR},A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList9()),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList10()),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList12()),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList13(),this.$ChatSidebarOrderedList14()),this.$ChatSidebarOrderedList15(),A.createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList16(),this.$ChatSidebarOrderedList11(),T,this.$ChatSidebarOrderedList17(),this.$ChatSidebarOrderedList18()))};S.prototype.$ChatSidebarOrderedList19=function(T){var U=this.props.scrollContainer;if(!U)return;var V=U.clientHeight,W=U.scrollHeight,X=D.getTop(U),Y=Math.min(T.offsetTop,W-V);if(X!==Y)M("Animation",function(Z){var $=Math.abs(Y-X)/U.clientHeight*500;new Z(U).to("scrollTop",Y).ease(Z.ease.end).duration($).go()},function(){D.setTop(U,Y)})};S.prototype.$ChatSidebarOrderedList13=function(){if(!h.get("show_header")&&!H.test_group_section_order&&!(h.get("display_groups_top")&&this.props.groups.length!==0))return null;var T=this.state.isDisconnected||y.isUserOffline();return A.createElement(m,{className:T?"_570-":"",key:"header"},L._("CONTACTS"))};S.prototype.$ChatSidebarOrderedList7=function(){var T=k.getImageSize(),U=this.props.topUsers.filter(function(Y){return!y.allows(Y)});U.splice(-2);var V=A.createElement("a",{ajaxify:"/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator",href:"#",rel:"dialog"},L._("Edit")),W=H.is_work_user?L._("MORE COLLEAGUES"):L._("MORE CONTACTS"),X=H.is_work_user?L._("These colleagues can't see you on chat. {=link}",[L.param("=link",V)]):L._("These contacts can't see you on chat. {=link}",[L.param("=link",V)]);return[A.createElement(m,{key:"usersSeparator1"},W),A.createElement(m,{className:"_5j9-",key:"usersSeparator2"},X),A.createElement(o,{ids:U,isDisconnected:this.state.isDisconnected,imageSize:T,key:n.OFFLINE_USERS,loadExtras:this.state.renderBelowFold,sectionName:n.OFFLINE_USERS})]};S.prototype.$ChatSidebarOrderedList8=function(){__p&&__p();if(this.props.availableUsers.length===0)return null;if(!this.state.renderBelowFold){var T=k.getItemHeight();return[A.createElement("div",{key:n.MORE_ONLINE_FRIENDS,style:{height:T*this.props.availableUsers.length}})]}var U=k.getImageSize(),V=H.is_work_user?L._({"*":"{MORE ONLINE COWORKERS} ({=count})"},[L.param("MORE ONLINE COWORKERS",L._("MORE COLLEAGUES")),L.param("=count",this.props.availableUsers.length,[0])]):L._({"*":"{MORE ONLINE CONTACTS} ({=count})"},[L.param("MORE ONLINE CONTACTS",L._("MORE CONTACTS")),L.param("=count",this.props.availableUsers.length,[0])]),W=A.createElement(o,{ids:this.props.availableUsers,imageSize:U,isDisconnected:this.state.isDisconnected,key:n.MORE_ONLINE_FRIENDS,loadExtras:this.state.renderBelowFold,sectionName:n.MORE_ONLINE_FRIENDS});return[A.createElement(m,{ref:function(X){this.$ChatSidebarOrderedList4=X}.bind(this),key:"usersSeparator",onClick:function(){return this.$ChatSidebarOrderedList19(B.findDOMNode(this.$ChatSidebarOrderedList4))}.bind(this)},V),W]};S.prototype.$ChatSidebarOrderedList15=function(){if(!h.get("nearby_friends_www_chatbar")||this.props.nearby.length===0)return null;return A.createElement(m,{ref:"nearbySeparator",key:"nearbySeparator"},A.createElement(u,null,L._("NEARBY"),A.createElement(v,{target:"_blank",href:new F("/help/android-app/291236034364603")},A.createElement(r,{className:"_3-90",src:N("129548")}))))};S.prototype.$ChatSidebarOrderedList16=function(){if(!h.get("nearby_friends_www_chatbar")||this.props.nearby.length===0)return null;var T=k.getImageSize(),U=this.props.nearby;if(y.getVisibility()==y.ONLINE)U=this.props.nearby.filter(function(V){return y.allows(V)});return A.createElement(o,{key:n.NEARBY,ids:U,isDisconnected:this.state.isDisconnected,imageSize:T,loadExtras:this.state.renderBelowFold,sectionName:n.NEARBY})};S.prototype.$ChatSidebarOrderedList12=function(){if(!h.get("show_rc_section")||this.props.recents.length===0)return null;var T=this.props.recents;T=this.props.recents.filter(function(V){return y.allowsIfViewerIsOnline(V)});var U=k.getImageSize();return[A.createElement(m,{ref:function(V){this.$ChatSidebarOrderedList5=V}.bind(this),key:"recentsSeparator",onClick:function(){return this.$ChatSidebarOrderedList19(B.findDOMNode(this.$ChatSidebarOrderedList5))}.bind(this)},L._("RECENT CONVERSATIONS")),A.createElement(o,{ids:T,isDisconnected:this.state.isDisconnected,imageSize:U,key:n.RECENTS,loadExtras:this.state.renderBelowFold,sectionName:n.RECENTS})]};S.prototype.$ChatSidebarOrderedList11=function(){__p&&__p();if(this.props.groups.length===0)return null;var T=this.state.isDisconnected||y.isUserOffline(),U=this.props.groups;if(!T)if(h.get("only_active_groups"))U=this.props.groups.filter(function(W){return z.getGroup(W.mercury_thread.participants)===e.ACTIVE});else if(h.get("sort_by_active_groups"))U=U.sort(function(W,X){return z.getGroup(X.mercury_thread.participants)-z.getGroup(W.mercury_thread.participants)});if(U.length===0)return null;var V=U.length;if(h.get("only_active_groups")||h.get("update_groups_source"))V=Math.min(U.length,h.get("num_groups_to_show"));return[A.createElement(m,{ref:function(W){this.$ChatSidebarOrderedList2=W}.bind(this),key:"groupSeparator",className:T?"_570-":"",onClick:function(){return this.$ChatSidebarOrderedList19(B.findDOMNode(this.$ChatSidebarOrderedList2))}.bind(this)},L._("GROUP CONVERSATIONS")),A.createElement(l,{groups:U.slice(0,V),isDisconnected:this.state.isDisconnected,key:"group_threads_section",loadExtras:this.state.renderBelowFold})]};S.prototype.$ChatSidebarOrderedList14=function(){var T=k.getImageSize(),U=this.props.topUsers;if(y.getVisibility()==y.ONLINE)U=this.props.topUsers.filter(function(V){return y.allows(V)});return A.createElement(o,{key:n.ORDERED_LIST,ids:U,isDisconnected:this.state.isDisconnected,imageSize:T,loadExtras:this.state.renderBelowFold,sectionName:n.ORDERED_LIST})};S.prototype.$ChatSidebarOrderedList18=function(){__p&&__p();if(!h.get("work_show_invites"))return null;var T=this.state.isDisconnected||y.isUserOffline();if(T){if(this.props.workWelcomeOverlay)this.$ChatSidebarOrderedList20(false);return null}var U=this.props.availableUsers.length===0&&this.props.topUsers.length===0&&this.props.workOthers.length===0&&this.props.groups.length===0,V=null;if(this.props.workWelcomeOverlay){if(p.isWorkUser())this.$ChatSidebarOrderedList20(U)}else if(U)V=A.createElement("div",{className:"_3-8z"},A.createElement(r,{className:"_3-8z",src:N("286109")}),A.createElement("h3",{className:"_3-8k"},L._("Reach anyone instantly")),A.createElement("div",{className:"_3-8k _5-km"},L._("Invite colleagues to see them here as chat contacts.")));var W=K.getURIBuilder().setEnum("source",G.WWW_CHAT_SIDEBAR).getURI(),X=L._("Invite Colleagues");return A.createElement("div",{className:"_5-kn"},V,A.createElement(J,{className:"_3-8i _2w3v ellipsis",label:X,use:"confirm",size:"large",href:"#",ajaxify:W,rel:"dialog"}))};S.prototype.$ChatSidebarOrderedList10=function(){if(!this.props.pymmList)return null;var T=this.props.pymmList.pages;if(!this.props.isSidebar||!h.get("show_businesses")||!T||T.length===0)return null;return[A.createElement(g,{key:"bootloader",loader:t("ChatSidebarPymmListContainer.react").__setRef("ChatSidebarOrderedList.react"),placeholder:A.createElement("div",null),component:A.createElement(s,{key:"pymm_container",pymmList:T})})]};S.prototype.$ChatSidebarOrderedList9=function(){if(!h.get("show_admined_pages")||this.props.adminedPages.length===0||!this.props.pageListModule)return null;var T=null;if(this.props.adminedPages.length>=R){var U=I.getURIBuilder().setString("category","your_pages").setString("ref",this.props.adminedPages[0].ref).getURI();T=A.createElement(v,{className:"_2l56",href:U,target:"_blank"},L._("SEE ALL"))}var V=this.props.pageListModule;return[A.createElement(m,{className:"_4kqp",key:n.ADMINED_PAGES},A.createElement(u,null,L._("YOUR PAGES"),T)),A.createElement(V,{adminedPages:this.props.adminedPages,key:"pages_section"})]};S.prototype.$ChatSidebarOrderedList17=function(){if(!H.is_work_user||this.props.workOthers.length===0)return null;var T=k.getImageSize(),U=L._("{OTHERS} ({count})",[L.param("OTHERS",L._("OTHERS")),L.param("count",this.props.workOthers.length)]),V=A.createElement(o,{ids:this.props.workOthers,imageSize:T,isDisconnected:this.state.isDisconnected,key:n.WORKPLACE_OTHERS,loadExtras:this.state.renderBelowFold,sectionName:n.WORKPLACE_OTHERS});return A.createElement("div",null,A.createElement(m,{ref:function(W){this.$ChatSidebarOrderedList3=W}.bind(this),key:"othersSeparator",onClick:function(){return this.$ChatSidebarOrderedList19(B.findDOMNode(this.$ChatSidebarOrderedList3))}.bind(this)},U),V)};S.prototype.$ChatSidebarOrderedList6=function(){f.loadModules(["ChannelConnection"],function(T){this.$ChatSidebarOrderedList1.addSubscriptions(T.subscribe([T.CONNECTED,T.RECONNECTING,T.SHUTDOWN,T.MUTE_WARNING,T.UNMUTE_WARNING],function(){var U=T.disconnected();if(U!==this.state.isDisconnected){if(U)j.logCHANNEL_DISCONNECT();else j.logCHANNEL_CONNECT();this.setState({isDisconnected:U})}}.bind(this)))}.bind(this),"ChatSidebarOrderedList.react")};S.prototype.$ChatSidebarOrderedList20=function(T){if(this.props.workWelcomeOverlay)if(T)q.show(this.props.workWelcomeOverlay);else q.hide(this.props.workWelcomeOverlay)};S.propTypes={availableUsers:Q.array.isRequired,workOthers:Q.array.isRequired,groups:Q.array.isRequired,recents:Q.array.isRequired,scrollContainer:Q.object,topUsers:Q.array.isRequired,nearby:Q.array.isRequired,adminedPages:Q.array.isRequired,pageListModule:Q.func,pymmList:Q.object.isRequired,isSidebar:Q.bool,workWelcomeOverlay:Q.object};d.exports=S}),null);
__d("MessengerDivebarSizingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function k(){this.clear()}k.prototype.log=function(){i.log("logger:MessengerDivebarSizingLoggerConfig",this.$MessengerDivebarSizingTypedLogger1,h.BASIC)};k.prototype.logVital=function(){i.log("logger:MessengerDivebarSizingLoggerConfig",this.$MessengerDivebarSizingTypedLogger1,h.VITAL)};k.prototype.clear=function(){this.$MessengerDivebarSizingTypedLogger1={};return this};k.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerDivebarSizingTypedLogger1)};k.prototype.updateData=function(m){this.$MessengerDivebarSizingTypedLogger1=babelHelpers["extends"]({},this.$MessengerDivebarSizingTypedLogger1,m);return this};k.prototype.setMaxItemSlots=function(m){this.$MessengerDivebarSizingTypedLogger1.max_item_slots=m;return this};k.prototype.setNumAdminedPages=function(m){this.$MessengerDivebarSizingTypedLogger1.num_admined_pages=m;return this};k.prototype.setNumGroups=function(m){this.$MessengerDivebarSizingTypedLogger1.num_groups=m;return this};k.prototype.setNumNearby=function(m){this.$MessengerDivebarSizingTypedLogger1.num_nearby=m;return this};k.prototype.setNumPymm=function(m){this.$MessengerDivebarSizingTypedLogger1.num_pymm=m;return this};k.prototype.setNumRecents=function(m){this.$MessengerDivebarSizingTypedLogger1.num_recents=m;return this};k.prototype.setNumTopFriends=function(m){this.$MessengerDivebarSizingTypedLogger1.num_top_friends=m;return this};k.prototype.setNumTopFriendsShown=function(m){this.$MessengerDivebarSizingTypedLogger1.num_top_friends_shown=m;return this};k.prototype.setSidebarType=function(m){this.$MessengerDivebarSizingTypedLogger1.sidebar_type=m;return this};k.prototype.updateExtraData=function(m){m=j(i.serializeMap(m));i.checkExtraDataFieldNames(m,l);this.$MessengerDivebarSizingTypedLogger1=babelHelpers["extends"]({},this.$MessengerDivebarSizingTypedLogger1,m);return this};k.prototype.addToExtraData=function(m,n){var o={};o[m]=n;return this.updateExtraData(o)};var l={max_item_slots:true,num_admined_pages:true,num_groups:true,num_nearby:true,num_pymm:true,num_recents:true,num_top_friends:true,num_top_friends_shown:true,sidebar_type:true};f.exports=k}),null);
__d("ChatSortUsers",["ShortProfiles","TokenizeUtil"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={};function k(m){if(j[m])return j[m];var n=(h.getNow(m)||{}).name;if(n)return j[m]=i.flatten(n);return"~"}var l={sortAlphabetical:function m(n,o){var p=k(n),q=k(o);if(p!==q)return p<q?-1:1;return 0}};f.exports=l}),null);
__d("PresenceOrderedList",["ChatSidebarPreloadStore","ChatSortUsers","PresencePrivacy","PresenceStatus"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();function l(o){return o.map(function(p){var q=p.slice(0,-2),r=Number(p.slice(-1));return[q,r]})}function m(o,p){__p&&__p();var q=arguments.length<=2||arguments[2]===undefined?[]:arguments[2],r=[];o.forEach(function(s){var t=s[0],u=s[1];if(r.length>=p)return;if(j.getFriendVisibility(t)==j.BLACKLISTED)return;if(u==k.get(t)&&!q.includes(t))r.push(t)});return r}function n(){"use strict";this.$PresenceOrderedList1=null}n.prototype.getSorted=function(o,p){__p&&__p();var q=arguments.length<=2||arguments[2]===undefined?[]:arguments[2];"use strict";if(this.$PresenceOrderedList1){p(m(this.$PresenceOrderedList1,o,q));return}h.onLoaded(function(r){var s=r.buddies;this.$PresenceOrderedList1=l(s);p(m(this.$PresenceOrderedList1,o,q))}.bind(this))};n.prototype.getAvailableSorted=function(o){"use strict";var p=k.getOnlineIDs();if(o)p=p.filter(function(q){return o&&o.indexOf(q)===-1});return p.sort(i.sortAlphabetical)};n.prototype.getAllSorted=function(o){"use strict";var p=[],q=this.$PresenceOrderedList1||[];k.getAllIDs().concat(q.map(function(r){return r[0]})).forEach(function(r){return p.indexOf(r)===-1&&p.push(r)});if(o)p=p.filter(function(r){return o&&o.indexOf(r)===-1});return p.sort(i.sortAlphabetical)};f.exports=new n()}),null);
__d("ChatOrderedList",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","Bootloader","ChatSidebarStore","CSS","ChatConfig","ChatHovercard","ChatOptions","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarOrderedList.react","ChatSidebarPreloadStore","DOM","DataStore","Event","JSLogger","MercuryParticipantTypes","MessengerDivebarSizingTypedLogger","Parent","PresenceOrderedList","PresencePrivacy","React","ReactDOM","ShortProfilesStore","SidebarType","WorkModeConfig","csx","debounceAcrossTransitions","mixin"],(function a(aa,ba,ca,da,b,ea,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,fa,E,F){__p&&__p();var G,H;G=babelHelpers.inherits(I,F(d));H=G&&G.prototype;function I(J,K,L){"use strict";__p&&__p();H.constructor.call(this);this._workWelcomeOverlay=L;this._root=K;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._adminedPages=[];this._pageListModule=null;this._pymmList={config:null,pages:[]};this._groups=[];this._nearby=[];this._recents=[];this._hoverController=null;this._isHovering=false;this._skippedRenderDuringHover=false;this._isSidebar=J;this._orderedList=q.find(this._root,".fbChatOrderedList");s.listen(this._orderedList,"mouseover",function(){this._isHovering=true}.bind(this));s.listen(this._orderedList,"mouseout",function(){this._isHovering=false;if(this._skippedRenderDuringHover){this._skippedRenderDuringHover=false;this._render()}}.bind(this));this._scrollableOrderedList=w.byClass(this._root,"scrollableOrderedList");this._scrollableArea=w.byClass(this._root,"scrollable");if(J)new k(this);c.subscribe(t.DUMP_EVENT,function(M,N){this.getSortedList(function(O){N.chat_lists=N.chat_lists||{sorted_list:O,available_list:x.getAvailableSorted(),excluded_list:this._excludedIds}}.bind(this))}.bind(this));y.subscribe("privacy-user-presence-changed",function(){return this._render()}.bind(this));e.subscribe(f.ON_AVAILABILITY_CHANGED,function(){return this._render()}.bind(this));this._maybeStartRecentsSectionFunnelLog()}I.prototype.getShowingUsers=function(){"use strict";return q.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode)};I.prototype.getUserForNode=function(J){"use strict";return r.get(J,"id")||r.get(J,"serverthreadid")};I.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new m(this);return this._hoverController};I.prototype.getItemHeight=function(){"use strict";return n.getItemHeight()};I.prototype.getRoot=function(){"use strict";return this._root};I.prototype.getSortedList=function(J){"use strict";x.getSorted(this._numTopFriends,function(K){return J(K)})};I.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;i.hide(this._scrollableOrderedList||this._root);this.inform("hide")};I.prototype.setNumTopFriends=function(J,K,L){"use strict";__p&&__p();p.onLoaded(function(M){__p&&__p();var N=M.groups,O=M.nearby,P=M.adminedPages,Q=M.pageListModule,R=M.pymmList,S=M.recents,T=new v();T.setMaxItemSlots(J).setSidebarType(L);J--;if(j.get("show_header"))J--;var U=J,V=!l.getSetting("hide_groups")?N:[],W=!l.getSetting("hide_admined_pages")?P:[],X=!l.getSetting("hide_businesses")&&R.pages?R:{config:null,pages:[]},Y=Math.min(V.length,j.get("num_groups_to_show"));if(Y>0)U-=Y+1;if(j.get("nearby_friends_www_chatbar")&&O.length>0)U-=O.length+1;if(j.get("show_admined_pages")&&W.length>0)U-=W.length+1;if(j.get("show_rc_section")&&S.length>0)U-=S.length+1;if(j.get("show_businesses")&&X.pages.length>0)U-=2;var Z=U;U=Math.min(J,Math.max(U,j.get("min_top_friends")||0));if(U!==this._numTopFriends||V.length!==this._groups.length||O.length!==this._nearby.length||W.length!==this._adminedPages.length||X.pages.length!==this._pymmList.pages.length||S.length!==this._recents.length){this._groups=V;this._numTopFriends=U;this._nearby=O;this._adminedPages=W;this._pageListModule=Q;this._pymmList=X;this._recents=S;T.setNumTopFriends(U).setNumNearby(O.length).setNumGroups(N.length).setNumAdminedPages(W.length).setNumPymm(X.pages.length).setNumRecents(S.length);var $=0;if(L===C.BUDDYLIST&&W.length>0){$+=W.length+1;T.setNumAdminedPages(0)}if(L===C.BUDDYLIST&&X.pages.length>0){T.setNumPymm(0);$+=2}Z+=$;if(U>Z)Z+=1;T.setNumTopFriendsShown(Math.max(Z,0));if(h.getVisibleType()===L)T.log();if(K){typeof this._render.reset==="function"&&this._render.reset();this._renderOrderedList()}else this._render()}}.bind(this))};I.prototype._renderOrderedList=function(){"use strict";__p&&__p();if(!this._isVisible||this._isHovering){if(this._isHovering)this._skippedRenderDuringHover=true;return}x.getSorted(this._numTopFriends,function(J){var K=D.is_work_user?x.getAllSorted(J.concat(this._nearby).concat(this._recents)).filter(function(N){var O=B.getNow(N);return!O||O.type===u.FB4C}):x.getAvailableSorted(J.concat(this._nearby).concat(this._recents)),L=D.is_work_user?x.getAllSorted(J.concat(this._nearby).concat(this._recents)).filter(function(N){var O=B.getNow(N);return O&&O.type!==u.FB4C}):[],M=J.filter(function(N){return!this._nearby||this._nearby.indexOf(N)===-1}.bind(this));A.render(z.createElement(o,{availableUsers:K,workOthers:L,scrollContainer:this._scrollContainer,topUsers:M,groups:this._groups,nearby:this._nearby,adminedPages:this._adminedPages,pageListModule:this._pageListModule,pymmList:this._pymmList,isSidebar:this._isSidebar,workWelcomeOverlay:this._workWelcomeOverlay,recents:this._recents}),this._orderedList);this.inform("render")}.bind(this),this._recents)};I.prototype._render=function(){"use strict";this._render=E(this._renderOrderedList.bind(this),300);this._render()};I.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;i.show(this._scrollableOrderedList||this._root);this._render();this.inform("show")};I.prototype.isVisible=function(){"use strict";return this._isVisible};I.prototype.setScrollContainer=function(J){"use strict";if(q.contains(J,this._root))this._scrollContainer=J};I.prototype._maybeStartRecentsSectionFunnelLog=function(){"use strict";if(this._isSidebar&&j.get("in_recents_experiment"))g.loadModules(["FunnelLogger"],function(J){J.startFunnel("WWW_DIVEBAR_RECENTS_FUNNEL");if(j.get("show_rc_section"))J.appendAction("WWW_DIVEBAR_RECENTS_FUNNEL","show_recents")},"ChatOrderedList")};b.exports=I}),null);
__d("MessengerSearchFunnelLoggerConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={NAME:"WWW_MESSENGER_SEARCH_SESSION_FUNNEL",FETCHED_STATE_IMPRESSION_LIST:"fetched_state_impression_list",LOADING_STATE_IMPRESSION_LIST:"loading_state_impression_list",SEND_SERVER_REQUEST:"send_server_request",WWW_SIDEBAR_TAG:"www",MESSENGER_DOT_COM:"messenger_dot_com",UNIVERSAL_SEARCH:"universal_search",USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",SMS:"sms",SMS_GROUP:"sms_group",COWORKER:"coworker",OTHER:"other"}}),null);
__d("ChatSearchSource",["requireWeak","AbstractSearchSource","AsyncRequest","Bootloader","CurrentUser","MercuryParticipantTypes","MessengerSearchFunnelLoggerConstants","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","debounce","emptyFunction","isValidUniqueID"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";__p&&__p();var v,w,x=null;h("OrderedFriendsList",function(z){x=z});v=babelHelpers.inherits(y,i);w=v&&v.prototype;function y(z){w.constructor.call(this);this.$ChatSearchSource1=new p({parseFn:r.parse,matchFn:r.isQueryMatch,indexFn:z.indexFn});this.$ChatSearchSource2=z.queryRequests||[];this.$ChatSearchSource3=z.searchType||"";this.$ChatSearchSource4=false;this.$ChatSearchSource5=s(this.$ChatSearchSource5,100,this);this.$ChatSearchSource6=z.excludeMemorializedUsers||false;this.$ChatSearchSource7=""}y.prototype.bootstrapImpl=function(z){q.fetchAll().done(function(){this.$ChatSearchSource4=true;this.$ChatSearchSource8();z()}.bind(this))};y.prototype.searchImpl=function(z,A,B){__p&&__p();var C=null,D={},E=B&&B.onQueryFinished,F=B&&B.onQueryStarted;F&&F(z);var G=this.$ChatSearchSource1.search(z,function(J){__p&&__p();if(!C){C=J;C.forEach(function(K){return D[K.getUniqueID()]=true})}else J.forEach(function(K){var L=K.getUniqueID();if(!D[L]){C.push(K);D[L]=true}});A(C,z);if(z.length===1&&this.$ChatSearchSource4)E&&E(z)}.bind(this),B);if(!G||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||z.length===0){E&&E(z);return}if(z.length===1){if(this.$ChatSearchSource4)E&&E(z);return}var H={value:z,existing_ids:C&&C.map(function(J){return J.getUniqueID()}).join(","),limit:B&&B.threadLimit,exclude_memorialized_users:this.$ChatSearchSource6},I=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(J){this.$ChatSearchSource5(H,J,function(K){this.$ChatSearchSource9(this.$ChatSearchSource10(this.$ChatSearchSource11(K)).filter(function(L){return!!L}),z);I--;if(I===0){this.$ChatSearchSource1.setQueryStringAsExhausted(z);E&&E(z)}}.bind(this))}.bind(this),this)};y.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries()};y.prototype.$ChatSearchSource8=function(){var z=q.getCachedProfileIDs(),A=z.filter(function(C){var D=q.getNow(C);return C==l.getID()||D.type===m.FRIEND||D.type===m.FB4C}),B=A.map(this.$ChatSearchSource12);if(B.length)this.$ChatSearchSource1.addLocalEntries(B)};y.prototype.$ChatSearchSource10=function(z){return z.map(this.$ChatSearchSource13,this)};y.prototype.$ChatSearchSource13=function(z,A){__p&&__p();if(z.mercury_thread){if(!x)return null;return x.normalizeThreadEntry(z,A)}var B=z.text,C=z.uid;if(!B||!u(C))return null;var D=x?x.getActiveRank(C):0;if(x&&!x.contains(C))D+=A;return new o({uniqueID:C,title:B,order:D,subtitle:z.subtext,type:z.render_type||z.type,photo:z.photo,uri:z.path,auxiliaryData:{isMessengerUser:z.is_messenger_user,alias:z.alias}})};y.prototype.$ChatSearchSource11=function(z){var A=z.getPayload();if(Array.isArray(A))return A;else if(A&&A.entries)return A.entries;else return[]};y.prototype.$ChatSearchSource12=function(z){var A=q.getNow(z),B=z==l.getID()?m.FRIEND:A.type,C=[A.additionalName,A.alternateName].concat(A.searchTokens||[]).join(" "),D=A.name,E=null;return new o({uniqueID:z,title:D,order:x?x.getActiveRank(z):0,subtitle:E,keywordString:C,type:B,photo:A.thumbSrc,uri:A.uri,auxiliaryData:{isMessengerUser:A.is_messenger_user,alias:A.alias}})};y.prototype.$ChatSearchSource5=function(z,A,B,C){if(this.$ChatSearchSource3===n.WWW_SIDEBAR_TAG&&z.value!==this.$ChatSearchSource7){k.loadModules(["MessengerSearchFunnelLogger"],function(D){D.logStartQuery(n.NAME,z.value)},"ChatSearchSource");this.$ChatSearchSource7=z.value}new j(A.uri).setData(babelHelpers["extends"]({},z,A.data)).setMethod("GET").setReadOnly(true).setHandler(B).setErrorHandler(C||t).setAllowCrossPageTransition(true).send()};y.prototype.$ChatSearchSource9=function(z,A){if(z.length)this.$ChatSearchSource1.addQueryEntries(z,A)};y.prototype.addLocalEntries=function(z){this.$ChatSearchSource1.addLocalEntries(z)};y.prototype.refreshData=function(){q.fetchAll()};f.exports=y}),null);
__d("ChatTypeaheadConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({USER_TYPE:"user",THREAD_TYPE:"thread",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",PAGE_TYPE:"page",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",HEADER_TYPE:"header",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game"});f.exports=h}),null);
__d("EventReminderConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({INITIAL:"initial",GOING:"going",WATCHED:"watched",UNWATCHED:"unwatched"}),i=Object.freeze({ASSOCIATED_EVENT:"ASSOCIATED_EVENT"}),j=Object.freeze({GOING:"GOING",DECLINED:"DECLINED",INVITED:"INVITED"}),k=Object.freeze({NO_ERROR:"NO_ERROR",PAST_TIME:"PAST_TIME",AFTER_ONE_YEAR:"AFTER_ONE_YEAR"});f.exports={EventGuestStates:h,EventPlanType:i,GuestStates:j,TimeErrorType:k}}),null);
__d("MercuryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_PAGE_FOLLOW_UP_STATUS:"ma-type:change-page-follow-up-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",IS_PIN_PROTECTED:"ma-type:is_pin_protected",REACTION_UPDATE:"ma-type:reaction-update",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_COMM_STATUS:"ma-type:update-comm-status",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed",BLOCK_STATUS_CHANGED:"ma-type:block-status-changed",UPDATE_COMM_ITEM_OWNER:"ma-type:update-comm-item-owner"})}),null);
__d("MercuryAssert",["MercuryIDs"],(function a(b,c,d,e,f,g,h){__p&&__p();f.exports={isParticipantID:function i(j){if(!h.isValid(j))throw new Error("bad_participant_id "+j)},allParticipantIDs:function i(j){j.forEach(this.isParticipantID)},isUserParticipantID:function i(j){var k=h.tokenize(j);if(k.type!="fbid")throw new Error("bad_user_id "+j)},isEmailParticipantID:function i(j){var k=h.tokenize(j);if(k.type!="email")throw new Error("bad_email_id "+j)},allThreadID:function i(j){j.forEach(this.isThreadID)},isThreadID:function i(j){if(!h.isValid(j))throw new Error("bad_thread_id "+j)}}}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function a(b,c,d,e,f,g,h){"use strict";var i=h.sizeMap,j=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"}),k={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"},l=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"}),m=[983040],n="hot_emoji_source",o="hot_emoji_size",p="emoji_like",q="\ud83d\udc4d",r=[128077];f.exports={FB_THUMBS_UP_EMOJI:m,size:j,sizeMap:i,sizeMapTransfer:k,source:l,SOURCE_TAG_PREFIX:n,TAG_PREFIX_NEW:o,TAG_PREFIX_OLD:p,THUMBS_UP_EMOJI:q,THUMBS_UP_EMOJI_CODES:r}}),null);
__d("MercuryTagHelper",[],(function a(b,c,d,e,f,g){"use strict";var h={get:function i(j,k){var l=j.find(function(m){return m.startsWith(k)});return l&&l.substr(l.indexOf(":")+1)}};f.exports=h}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","EmoticonEmojiList","MercuryTagHelper"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function k(q,r){if(!q.tags)q.tags=[l(r)];else q.tags.push(l(r));return q}function l(q){var r=h.TAG_PREFIX_NEW;return r+":"+q}function m(q,r){if(!q.tags)q.tags=[n(r)];else q.tags.push(n(r));return q}function n(q){return h.SOURCE_TAG_PREFIX+":"+q}function o(q){return p(q)!=null}function p(q){if(!q.tags)return null;var r=j.get(q.tags,h.TAG_PREFIX_NEW);if(r)return r;return j.get(q.tags,h.TAG_PREFIX_OLD)}f.exports={getEmojiSize:p,isEmojiLike:o,setEmojiSize:k,setEmojiSource:m}}),null);
__d("MercuryAttachmentContentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("StoryAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",BREAKING_NEWS:"breaking_news",VIDEO_REQUEST:"video_request",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post"})}),null);
__d("MercuryAttachment",["EmojiLikeUtils","MercuryAttachmentContentType","MercuryAttachmentType","MercuryAudioType","Set","StoryAttachmentStyle","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o=function o(s){return s===Object(s)},p="_1c_u",q=new l([j.ANIMATED_IMAGE,j.PHOTO,j.VIDEO,j.THIRDPARTYSTICKER]),r={getAttachIconClass:function s(t){__p&&__p();switch(t){case i.PHOTO:return"_y2-";case i.VIDEO:return"_y2_";case i.MUSIC:return"_y30";case i.VOICE:return"_y31";case i.TEXT:return"_y32";case i.MSWORD:return"_y33";case i.MSXLS:return"_y34";case i.MSPPT:return"_y35"}return"_y36"},getAttachIconClassByMime:function s(t){return this.getAttachIconClass(this.getAttachTypeByMime(t))},getAttachTypeByMime:function s(t){__p&&__p();if(t.startsWith("image"))return i.PHOTO;else if(t.startsWith("video"))return i.VIDEO;else if(t.startsWith("audio"))return i.MUSIC;else if(t.startsWith("text/plain"))return i.TEXT;else if(t=="application/msword"||t.startsWith("application/vnd.ms-word")||t.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return i.MSWORD;else if(t.startsWith("application/vnd.ms-excel")||t.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return i.MSXLS;else if(t.startsWith("application/vnd.ms-powerpoint")||t.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return i.MSPPT;else return i.UNKNOWN},convertRaw:function s(t){__p&&__p();var u=[];for(var v=0;v<t.length;v++){var w=t[v];if(w.attach_type===j.PHOTO)u.push(w);else if(w.filename){var x=r.getAttachTypeByMime(w.filetype),y={};y.attach_type=j.FILE;y.name=w.filename;y.icon_type=x;y.url="";u.push(y)}}return u},get:function s(t){__p&&__p();var u=[];if(t.attachments)u=t.attachments;else if(t.raw_attachments)u=this.convertRaw(t.raw_attachments);var v=h.getEmojiSize(t);if(v)u=u.concat([{attach_type:j.EMOJI_LIKE,size:v}]);if(!(t.attachments&&t.attachments.length>0)){if(t.sticker_id)return u.concat([{attach_type:j.STICKER}]);if(t.preview_attachments&&t.preview_attachments.length>0)return u.concat(t.preview_attachments)}return u},resizeContain:function s(t,u){var v=t.width/t.height,w=u.width/u.height;if(w<v)return{width:Math.ceil(Math.min(t.height*w,u.width)),height:Math.ceil(Math.min(t.height,u.height))};else return{width:Math.ceil(Math.min(t.width,u.width)),height:Math.ceil(Math.min(t.width/w,u.height))}},isBubblePreferred:function s(t){return this.isFileAttachment(t)},isPhotoAttachment:function s(t){return!!(t.attach_type==j.PHOTO||t.attach_type==j.ANIMATED_IMAGE||t.attach_type==j.THIRDPARTYSTICKER||t.attach_type==j.FILE&&t.preview_url)},isPhotoGroupAttachment:function s(t){return q.has(t.attach_type)},isSinglePhotoGroupAttachment:function s(t){return!!(t.attachments&&t.attachments.length===1&&t.attachments[0]&&this.isPhotoGroupAttachment(t.attachments[0]))},isVideoAttachment:function s(t){return t.attach_type==j.VIDEO},isShareAttachment:function s(t){return t.attach_type==j.SHARE},isFileAttachment:function s(t){return t.attach_type==j.FILE},isErrorAttachment:function s(t){return t.attach_type==j.ERROR},isStickerAttachment:function s(t){return t.attach_type==j.STICKER},isEmojiLikeAttachment:function s(t){return t.attach_type===j.EMOJI_LIKE},isVoiceAttachment:function s(t){if(!t.metadata)return false;return t.metadata.type===k.AudioClip||t.metadata.type===k.VoiceMessageWithTranscript},hasAttribution:function s(t){return!!t.app_attribution},isLightweightActionAttachment:function s(t){return r.isShareAttachment(t)&&t.share&&t.share.target!=null&&t.share.target.lwa_type!=null},isSingleVideoAttachment:function s(t){var u=this.get(t).filter(o).filter(function(v){return this.isVideoAttachment(v)}.bind(this));return u.length===1},isSharedVideoAttachment:function s(t){var u=t.attach_type===j.SHARE&&t.share&&t.share.subattachments&&t.share.subattachments[0];return!!(u&&u.target&&u.target.video_id)},isGenieSharedVideoAttachment:function s(t){return!!(t.attach_type===j.SHARE&&t.share&&t.share.style_list.indexOf(m.GENIE_MESSAGE)>-1&&t.share.target&&t.share.target.attachment&&this.isSharedVideoAttachment(t.share.target.attachment))},isSharedVideoAttachmentMessage:function s(t){var u=this.get(t).filter(o).filter(function(v){return this.isSharedVideoAttachment(v)||this.isGenieSharedVideoAttachment(v)}.bind(this));return u.length===1},getVideoElem:function s(t,u){var v=u.getMessageElement(t);if(!v)return null;var w=v.getElementsByClassName(p);return w&&w.length?w[0]:v}};f.exports=r}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=j}i.prototype.getForFBID=function(j){if(!this.$MercurySingletonProvider1[j])this.$MercurySingletonProvider1[j]=new this.$MercurySingletonProvider2(j);return this.$MercurySingletonProvider1[j]};i.prototype.get=function(){return this.getForFBID(h.getID())};i.mock=function(j){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};f.exports=i}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mapObject","mixin"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n,o,p=i.getInstance("mercury_informer");n=babelHelpers.inherits(q,m(h));o=n&&n.prototype;q.get=function(){return r.get()};q.getForFBID=function(s){return r.getForFBID(s)};function q(s){__p&&__p();o.constructor.call(this);this.$MercuryThreadInformer1=s;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12=0}q.prototype.updatedThread=function(s){this.$MercuryThreadInformer3[s]=true;this.$MercuryThreadInformer13()};q.prototype.invalidatedThread=function(s){this.$MercuryThreadInformer4[s]=true;this.$MercuryThreadInformer13()};q.prototype.deletedThread=function(s){this.$MercuryThreadInformer2[s]=true;this.$MercuryThreadInformer13()};q.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer13()};q.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer13()};q.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=true;this.$MercuryThreadInformer13()};q.prototype.changedThreadReadState=function(s,t,u){if(!this.$MercuryThreadInformer5[s]||this.$MercuryThreadInformer5[s].timestamp<u)this.$MercuryThreadInformer5[s]={mark_as_read:t,timestamp:u};this.$MercuryThreadInformer13()};q.prototype.receivedMessage=function(s){j.isThreadID(s.thread_id);var t=s.thread_id;if(!this.$MercuryThreadInformer9[t])this.$MercuryThreadInformer9[t]=[];this.$MercuryThreadInformer9[t].push(s);this.updatedThread(t)};q.prototype.reorderedMessages=function(s,t){this.$MercuryThreadInformer10[s]={source:t};this.$MercuryThreadInformer13()};q.prototype.updatedMessage=function(s,t,u){if(!this.$MercuryThreadInformer11[s])this.$MercuryThreadInformer11[s]={};this.$MercuryThreadInformer11[s][t]={source:u};this.updatedThread(s)};q.prototype.synchronizeInforms=function(s){this.$MercuryThreadInformer12++;try{s()}catch(t){throw t}finally{this.$MercuryThreadInformer12--;this.$MercuryThreadInformer13()}};q.prototype.listen=function(s,t){return this.subscribe("threads-updated",function(u,v){if(v[s])t(s)})};q.prototype.$MercuryThreadInformer13=function(){__p&&__p();if(!this.$MercuryThreadInformer12){var s=this.$MercuryThreadInformer2,t=this.$MercuryThreadInformer3,u=this.$MercuryThreadInformer4,v=this.$MercuryThreadInformer5,w=this.$MercuryThreadInformer6,x=this.$MercuryThreadInformer7,y=this.$MercuryThreadInformer8,z=this.$MercuryThreadInformer9,A=this.$MercuryThreadInformer10,B=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var C=Object.keys(t);if(C.length||w)this.inform("threadlist-updated",C);if(C.length)this.$MercuryThreadInformer14("threads-updated",t);for(var D in u){this.$MercuryThreadInformer14("thread-invalidated",u);break}for(var D in v){this.$MercuryThreadInformer14("thread-read-changed",v);break}for(D in s){this.$MercuryThreadInformer14("threads-deleted",s);break}if(x)this.$MercuryThreadInformer14("unseen-updated",null);if(y)this.$MercuryThreadInformer14("unread-updated",null);for(D in z){this.$MercuryThreadInformer14("messages-received",z);break}for(D in A){this.$MercuryThreadInformer14("messages-reordered",A);break}for(D in B){this.$MercuryThreadInformer14("messages-updated",B);break}}};q.prototype.$MercuryThreadInformer14=function(s,t){if(s==="threads-updated")p.debug(s,JSON.stringify(t));this.inform(s,t)};var r=new k(q);f.exports=q}),null);
__d("bs_caml_builtin_exceptions",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=["Out_of_memory",0],i=["Sys_error",-1],j=["Failure",-2],k=["Invalid_argument",-3],l=["End_of_file",-4],m=["Division_by_zero",-5],n=["Not_found",-6],o=["Match_failure",-7],p=["Stack_overflow",-8],q=["Sys_blocked_io",-9],r=["Assert_failure",-10],s=["Undefined_recursive_module",-11];h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;n.tag=248;o.tag=248;p.tag=248;q.tag=248;r.tag=248;s.tag=248;g.out_of_memory=h;g.sys_error=i;g.failure=j;g.invalid_argument=k;g.end_of_file=l;g.division_by_zero=m;g.not_found=n;g.match_failure=o;g.stack_overflow=p;g.sys_blocked_io=q;g.assert_failure=r;g.undefined_recursive_module=s}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(q,r,j){var s=new Array(j),t=0,u=r;while(t<j){s[t]=q[u];t=t+1|0;u=u+1|0}return s}function j(q,r){while(true){var s=r,t=q;if(s){r=s[1];q=s[0].length+t|0;continue}else return t}}function k(q,r,s){__p&&__p();while(true){var t=s,u=r;if(t){var v=t[0],w=v.length,x=u,y=0;while(y<w){q[x]=v[y];x=x+1|0;y=y+1|0}s=t[1];r=x;continue}else return 0}}function l(q){var r=j(0,q),s=new Array(r);k(s,0,q);return s}function m(q,r,s){if(r<0||r>=q.length)throw[h.invalid_argument,"index out of bounds"];else{q[r]=s;return 0}}function n(q,r){if(r<0||r>=q.length)throw[h.invalid_argument,"index out of bounds"];else return q[r]}function o(j,q){var r=new Array(j);for(var s=0,t=j-1|0;s<=t;++s)r[s]=q;return r}function p(q,r,s,t,j){if(t<=r){for(var u=0,v=j-1|0;u<=v;++u)s[u+t|0]=q[u+r|0];return 0}else{for(var w=j-1|0;w>=0;--w)s[w+t|0]=q[w+r|0];return 0}}g.caml_array_sub=i;g.caml_array_concat=l;g.caml_make_vect=o;g.caml_array_blit=p;g.caml_array_get=n;g.caml_array_set=m}),null);
__d("bs_curry",["bs_caml_array"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(H,I){__p&&__p();while(true){var J=I,K=H,L=K.length,M=L?L:1,N=J.length,O=M-N|0;if(O)if(O<0){I=h.caml_array_sub(J,M,-O|0);H=K.apply(null,h.caml_array_sub(J,0,M));continue}else return function(K,J){return function(P){return i(K,J.concat([P]))}}(K,J);else return K.apply(null,J)}}function j(H,I,J){__p&&__p();if(J>7||J<0)return i(H,[I]);else switch(J){case 0:case 1:return H(I);case 2:return function(K){return H(I,K)};case 3:return function(K,L){return H(I,K,L)};case 4:return function(K,L,M){return H(I,K,L,M)};case 5:return function(K,L,M,N){return H(I,K,L,M,N)};case 6:return function(K,L,M,N,O){return H(I,K,L,M,N,O)};case 7:return function(K,L,M,N,O,P){return H(I,K,L,M,N,O,P)}}}function k(H,I){var J=H.length;if(J===1)return H(I);else return j(H,I,J)}function l(H){var I=H.length;if(I===1)return H;else return function(J){return k(H,J)}}function m(H,I,J,K){__p&&__p();if(K>7||K<0)return i(H,[I,J]);else switch(K){case 0:case 1:return i(H(I),[J]);case 2:return H(I,J);case 3:return function(L){return H(I,J,L)};case 4:return function(L,M){return H(I,J,L,M)};case 5:return function(L,M,N){return H(I,J,L,M,N)};case 6:return function(L,M,N,O){return H(I,J,L,M,N,O)};case 7:return function(L,M,N,O,P){return H(I,J,L,M,N,O,P)}}}function n(H,I,J){var K=H.length;if(K===2)return H(I,J);else return m(H,I,J,K)}function o(H){var I=H.length;if(I===2)return H;else return function(J,K){return n(H,J,K)}}function p(H,I,J,K,L){__p&&__p();var M=0;if(L>7||L<0)return i(H,[I,J,K]);else switch(L){case 0:case 1:M=1;break;case 2:return i(H(I,J),[K]);case 3:return H(I,J,K);case 4:return function(N){return H(I,J,K,N)};case 5:return function(N,O){return H(I,J,K,N,O)};case 6:return function(N,O,P){return H(I,J,K,N,O,P)};case 7:return function(N,O,P,Q){return H(I,J,K,N,O,P,Q)}}if(M===1)return i(H(I),[J,K])}function q(H,I,J,K){var L=H.length;if(L===3)return H(I,J,K);else return p(H,I,J,K,L)}function r(H){var I=H.length;if(I===3)return H;else return function(J,K,L){return q(H,J,K,L)}}function s(H,I,J,K,L,M){__p&&__p();var N=0;if(M>7||M<0)return i(H,[I,J,K,L]);else switch(M){case 0:case 1:N=1;break;case 2:return i(H(I,J),[K,L]);case 3:return i(H(I,J,K),[L]);case 4:return H(I,J,K,L);case 5:return function(O){return H(I,J,K,L,O)};case 6:return function(O,P){return H(I,J,K,L,O,P)};case 7:return function(O,P,Q){return H(I,J,K,L,O,P,Q)}}if(N===1)return i(H(I),[J,K,L])}function t(H,I,J,K,L){var M=H.length;if(M===4)return H(I,J,K,L);else return s(H,I,J,K,L,M)}function u(H){var I=H.length;if(I===4)return H;else return function(J,K,L,M){return t(H,J,K,L,M)}}function v(H,I,J,K,L,M,N){__p&&__p();var O=0;if(N>7||N<0)return i(H,[I,J,K,L,M]);else switch(N){case 0:case 1:O=1;break;case 2:return i(H(I,J),[K,L,M]);case 3:return i(H(I,J,K),[L,M]);case 4:return i(H(I,J,K,L),[M]);case 5:return H(I,J,K,L,M);case 6:return function(P){return H(I,J,K,L,M,P)};case 7:return function(P,Q){return H(I,J,K,L,M,P,Q)}}if(O===1)return i(H(I),[J,K,L,M])}function w(H,I,J,K,L,M){var N=H.length;if(N===5)return H(I,J,K,L,M);else return v(H,I,J,K,L,M,N)}function x(H){var I=H.length;if(I===5)return H;else return function(J,K,L,M,N){return w(H,J,K,L,M,N)}}function y(H,I,J,K,L,M,N,O){__p&&__p();var P=0;if(O>7||O<0)return i(H,[I,J,K,L,M,N]);else switch(O){case 0:case 1:P=1;break;case 2:return i(H(I,J),[K,L,M,N]);case 3:return i(H(I,J,K),[L,M,N]);case 4:return i(H(I,J,K,L),[M,N]);case 5:return i(H(I,J,K,L,M),[N]);case 6:return H(I,J,K,L,M,N);case 7:return function(Q){return H(I,J,K,L,M,N,Q)}}if(P===1)return i(H(I),[J,K,L,M,N])}function z(H,I,J,K,L,M,N){var O=H.length;if(O===6)return H(I,J,K,L,M,N);else return y(H,I,J,K,L,M,N,O)}function A(H){var I=H.length;if(I===6)return H;else return function(J,K,L,M,N,O){return z(H,J,K,L,M,N,O)}}function B(H,I,J,K,L,M,N,O,P){__p&&__p();var Q=0;if(P>7||P<0)return i(H,[I,J,K,L,M,N,O]);else switch(P){case 0:case 1:Q=1;break;case 2:return i(H(I,J),[K,L,M,N,O]);case 3:return i(H(I,J,K),[L,M,N,O]);case 4:return i(H(I,J,K,L),[M,N,O]);case 5:return i(H(I,J,K,L,M),[N,O]);case 6:return i(H(I,J,K,L,M,N),[O]);case 7:return H(I,J,K,L,M,N,O)}if(Q===1)return i(H(I),[J,K,L,M,N,O])}function C(H,I,J,K,L,M,N,O){var P=H.length;if(P===7)return H(I,J,K,L,M,N,O);else return B(H,I,J,K,L,M,N,O,P)}function D(H){var I=H.length;if(I===7)return H;else return function(J,K,L,M,N,O,P){return C(H,J,K,L,M,N,O,P)}}function E(H,I,J,K,L,M,N,O,P,Q){__p&&__p();var R=0;if(Q>7||Q<0)return i(H,[I,J,K,L,M,N,O,P]);else switch(Q){case 0:case 1:R=1;break;case 2:return i(H(I,J),[K,L,M,N,O,P]);case 3:return i(H(I,J,K),[L,M,N,O,P]);case 4:return i(H(I,J,K,L),[M,N,O,P]);case 5:return i(H(I,J,K,L,M),[N,O,P]);case 6:return i(H(I,J,K,L,M,N),[O,P]);case 7:return i(H(I,J,K,L,M,N,O),[P])}if(R===1)return i(H(I),[J,K,L,M,N,O,P])}function F(H,I,J,K,L,M,N,O,P){var Q=H.length;if(Q===8)return H(I,J,K,L,M,N,O,P);else return E(H,I,J,K,L,M,N,O,P,Q)}function G(H){var I=H.length;if(I===8)return H;else return function(J,K,L,M,N,O,P,Q){return F(H,J,K,L,M,N,O,P,Q)}}g.app=i;g.curry_1=j;g._1=k;g.__1=l;g.curry_2=m;g._2=n;g.__2=o;g.curry_3=p;g._3=q;g.__3=r;g.curry_4=s;g._4=t;g.__4=u;g.curry_5=v;g._5=w;g.__5=x;g.curry_6=y;g._6=z;g.__6=A;g.curry_7=B;g._7=C;g.__7=D;g.curry_8=E;g._8=F;g.__8=G}),null);
__d("bs_block",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j.tag=i;return j}g.__=h}),null);
__d("bs_caml_obj",["bs_block","bs_caml_builtin_exceptions"],(function a(b,aa,ba,ca,da,c,d,e){"use strict";__p&&__p();function f(t){var u=t.length|0,v=new Array(u);for(var w=0,x=u-1|0;w<=x;++w)v[w]=t[w];v.tag=t.tag|0;return v}function g(t,u){__p&&__p();var v=t.length|0;if(u<=0||u>v)throw[e.invalid_argument,"Obj.truncate"];else if(v!==u){for(var w=u,x=v-1|0;w<=x;++w)t[w]=0;t.length=u;return 0}else return 0}function h(t){return d.__(250,[t])}function i(t,u){var v=u.length|0;for(var w=0,x=v-1|0;w<=x;++w)t[w]=u[w];var y=u.tag|0;if(y!==0){t.tag=y;return 0}else return 0}function j(t,u){if(t<u)return-1;else if(t===u)return 0;else return 1}function k(t,u){__p&&__p();while(true){var v=u,w=t;if(w===v)return 0;else{var x=typeof w,y=typeof v;if(x==="string"){var z=w,A=v;if(z<A)return-1;else if(z===A)return 0;else return 1}else{var B=+(x==="number"),C=+(y==="number");if(B!==0)if(C!==0)return j(w,v);else return-1;else if(C!==0)return 1;else if(x==="boolean"||x==="undefined"||w===null){var D=w,E=v;if(D===E)return 0;else if(D<E)return-1;else return 1}else if(x==="function"||y==="function")throw[e.invalid_argument,"compare: functional value"];else{var F=w.tag|0,G=v.tag|0;if(F===250){t=w[0];continue}else if(G===250){u=v[0];continue}else if(F===248)return j(w[1],v[1]);else if(F===251)throw[e.invalid_argument,"equal: abstract value"];else if(F!==G)if(F<G)return-1;else return 1;else{var H=w.length|0,I=v.length|0;if(H===I){var J=w,K=v,L=0,M=H;while(true){var N=L;if(N===M)return 0;else{var O=k(J[N],K[N]);if(O!==0)return O;else{L=N+1|0;continue}}}}else if(H<I){var P=w,Q=v,R=0,S=H;while(true){var T=R;if(T===S)return-1;else{var U=k(P[T],Q[T]);if(U!==0)return U;else{R=T+1|0;continue}}}}else{var V=w,W=v,X=0,Y=I;while(true){var Z=X;if(Z===Y)return 1;else{var $=k(V[Z],W[Z]);if($!==0)return $;else{X=Z+1|0;continue}}}}}}}}}}function l(t,u){__p&&__p();while(true){var v=u,w=t;if(w===v)return 1;else{var x=typeof w;if(x==="string"||x==="number"||x==="boolean"||x==="undefined"||w===null)return 0;else{var y=typeof v;if(x==="function"||y==="function")throw[e.invalid_argument,"equal: functional value"];else if(y==="number"||y==="undefined"||v===null)return 0;else{var z=w.tag|0,A=v.tag|0;if(z===250){t=w[0];continue}else if(A===250){u=v[0];continue}else if(z===248)return+(w[1]===v[1]);else if(z===251)throw[e.invalid_argument,"equal: abstract value"];else if(z!==A)return 0;else{var B=w.length|0,C=v.length|0;if(B===C){var D=w,E=v,F=0,G=B;while(true){var H=F;if(H===G)return 1;else if(l(D[H],E[H])){F=H+1|0;continue}else return 0}}else return 0}}}}}}function m(t,u){return 1-l(t,u)}function n(t,u){return+(k(t,u)>=0)}function o(t,u){return+(k(t,u)>0)}function p(t,u){return+(k(t,u)<=0)}function q(t,u){return+(k(t,u)<0)}var r=j,s=j;c.caml_obj_dup=f;c.caml_obj_truncate=g;c.caml_lazy_make_forward=h;c.caml_update_dummy=i;c.caml_int_compare=j;c.caml_int32_compare=r;c.caml_nativeint_compare=s;c.caml_compare=k;c.caml_equal=l;c.caml_notequal=m;c.caml_greaterequal=n;c.caml_greaterthan=o;c.caml_lessthan=q;c.caml_lessequal=p}),null);
__d("bs_caml_exceptions",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[0];function i(m){m[1]=h[0];h[0]+=1;return m}function j(){h[0]+=1;return h[0]}function k(m){var n=j(0),o=[m,n];o.tag=248;return o}function l(m){if(m===undefined)return 0;else if(m.tag===248)return 1;else{var n=m[0];if(n!==undefined)return+(n.tag===248);else return 0}}g.caml_set_oo_id=i;g.get_id=j;g.create=k;g.isCamlExceptionOrOpenVariant=l}),null);
__d("bs_caml_int32",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(o,p){if(p===0)throw h.division_by_zero;else return o/p|0}function j(o,p){if(p===0)throw h.division_by_zero;else return o%p}function k(o){return(o&255)<<8|(o&65280)>>>8}function l(o){return(o&255)<<24|(o&65280)<<8|(o&16711680)>>>8|(o&4278190080)>>>24}var m=Math.imul||function(o,p){p|=0;return((o>>16)*p<<16)+(o&65535)*p|0},n=l;g.div=i;g.mod_=j;g.caml_bswap16=k;g.caml_int32_bswap=l;g.caml_nativeint_bswap=n;g.imul=m}),null);
__d("bs_caml_utils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=String.prototype.repeat&&function(i,j){return j.repeat(i)}||function(i,j){__p&&__p();if(j.length==0||i==0)return"";if(j.length*i>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var k="";for(;;){if((i&1)==1)k+=j;i>>>=1;if(i==0)break;j+=j}return k};g.repeat=h}),null);
__d("bs_caml_int64",["bs_caml_obj","bs_caml_int32","bs_caml_utils","bs_caml_builtin_exceptions"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e){"use strict";__p&&__p();var f=[-2147483648,0],g=[134217727,1],h=[0,1],i=[0,0],j=[-1,4294967295];function k(B){return+((B&2147483648)!==0)}function l(B,C){var D=C[1],E=B[1],F=E+D&4294967295,G=k(E)&&(k(D)||!k(F))||k(D)&&!k(F)?1:0,H=B[0]+C[0]+G&4294967295;return[H,F>>>0]}function m(B){var C=B[0]^-1,D=B[1]^-1;return[C,D>>>0]}function n(B,C){if(B[0]===C[0])return+(B[1]===C[1]);else return 0}function o(B){if(n(B,f))return f;else return l(m(B),h)}function p(B,C){return l(B,o(C))}function q(B,C){if(C){var D=B[1];if(C>=32)return[D<<(C-32|0),0];else{var E=D>>>(32-C|0)|B[0]<<C;return[E,D<<C>>>0]}}else return B}function r(B,C){__p&&__p();if(C){var D=B[0],E=C-32|0;if(E)if(E>0){var F=D>>>E;return[0,F>>>0]}else{var G=D>>>C,H=D<<(-E|0)|B[1]>>>C;return[G,H>>>0]}else return[0,D>>>0]}else return B}function s(B,C){__p&&__p();if(C){var D=B[0];if(C<32){var E=D>>C,F=D<<(32-C|0)|B[1]>>>C;return[E,F>>>0]}else{var G=D>>(C-32|0);return[D>=0?0:-1,G>>>0]}}else return B}function t(B){if(B[0]!==0||B[1]!==0)return 0;else return 1}function u(B,C){__p&&__p();while(true){var D=C,E=B,F=0,G,H=E[0],I=0,J=0,K=0;if(H!==0)K=4;else if(E[1]!==0)K=4;else return i;if(K===4)if(D[0]!==0)J=3;else if(D[1]!==0)J=3;else return i;if(J===3)if(H!==-2147483648)I=2;else if(E[1]!==0)I=2;else{G=D[1];F=1}if(I===2){var L=D[0],M=E[1],N=0;if(L!==-2147483648)N=3;else if(D[1]!==0)N=3;else{G=M;F=1}if(N===3){var O=D[1];if(H<0)if(L<0){C=o(D);B=o(E);continue}else return o(u(o(E),D));else if(L<0)return o(u(E,o(D)));else{var P=H>>>16,Q=H&65535,R=M>>>16,S=M&65535,T=L>>>16,U=L&65535,V=O>>>16,W=O&65535,X=0,Y=0,Z=0,$=S*W;Z=($>>>16)+R*W;Y=Z>>>16;Z=(Z&65535)+S*V;Y=Y+(Z>>>16)+Q*W;X=Y>>>16;Y=(Y&65535)+R*V;X+=Y>>>16;Y=(Y&65535)+S*U;X+=Y>>>16;Y=Y&65535;X=X+(P*W+Q*V+R*U+S*T)&65535;var za=Y|X<<16,Aa=$&65535|(Z&65535)<<16;return[za,Aa>>>0]}}}if(F===1)if((G&1)===0)return i;else return f}}function ga(B){var C=c.caml_int32_bswap(B[1]),D=c.caml_int32_bswap(B[0]);return[C,D>>>0]}function ha(B,C){return[B[0]^C[0],(B[1]^C[1])>>>0]}function ia(B,C){return[B[0]|C[0],(B[1]|C[1])>>>0]}function ja(B,C){return[B[0]&C[0],(B[1]&C[1])>>>0]}function v(B,C){var D=C[0],E=B[0];if(E>D)return 1;else if(E<D)return 0;else return+(B[1]>=C[1])}function ka(B,C){return 1-n(B,C)}function la(B,C){return 1-v(B,C)}function w(B,C){if(B[0]>C[0])return 1;else if(B[0]<C[0])return 0;else return+(B[1]>C[1])}function ma(B,C){return 1-w(B,C)}function x(B){return B[0]*4294967296+B[1]}var y=Math.pow(2,32),na=Math.pow(2,63),oa=-Math.pow(2,63);function z(B){__p&&__p();if(isNaN(B)||!isFinite(B))return i;else if(B<=oa)return f;else if(B+1>=na)return g;else if(B<0)return o(z(-B));else{var C=B/y|0,D=B%y|0;return[C,D>>>0]}}function A(B,C){__p&&__p();while(true){var D=C,E=B,F=E[0],G=0,H=0;if(D[0]!==0)H=2;else if(D[1]!==0)H=2;else throw e.division_by_zero;if(H===2)if(F!==-2147483648)if(F!==0)G=1;else if(E[1]!==0)G=1;else return i;else if(E[1]!==0)G=1;else if(n(D,h)||n(D,j))return E;else if(n(D,f))return h;else{var I=D[0],J=s(E,1),K=q(A(J,D),1),L=0;if(K[0]!==0)L=3;else if(K[1]!==0)L=3;else if(I<0)return h;else return o(h);if(L===3){var M=u(D,K),N=l(E,o(M));return l(K,A(N,D))}}if(G===1){var O=D[0],P=0;if(O!==-2147483648)P=2;else if(D[1]!==0)P=2;else return i;if(P===2)if(F<0)if(O<0){C=o(D);B=o(E);continue}else return o(A(o(E),D));else if(O<0)return o(A(E,o(D)));else{var Q=i,R=E;while(v(R,D)){var S=Math.max(1,Math.floor(x(R)/x(D))),T=Math.ceil(Math.log(S)/Math.LN2),U=T<=48?1:Math.pow(2,T-48),V=z(S),W=u(V,D);while(W[0]<0||w(W,R)){S-=U;V=z(S);W=u(V,D)}if(t(V))V=h;Q=l(Q,V);R=l(R,o(W))}return Q}}}}function pa(B,C){var D=u(A(B,C),C);return l(B,o(D))}function qa(B,C){var D=A(B,C),E=u(D,C);return[D,l(B,o(E))]}function ra(B,C){var D=b.caml_nativeint_compare(B[0],C[0]);if(D)return D;else return b.caml_nativeint_compare(B[1],C[1])}function sa(B){return[B<0?-1:0,B>>>0]}function ta(B){return B[1]|0}function ua(B){__p&&__p();var C=function C(I){return(I>>>0).toString(16)},D=B[0],E=B[1],F=0;if(D!==0)F=1;else if(E!==0)F=1;else return"0";if(F===1)if(E!==0)if(D!==0){var G=C(B[1]),H=8-G.length|0;if(H<=0)return C(B[0])+G;else return C(B[0])+(d.repeat(H,"0")+G)}else return C(B[1]);else return C(B[0])+"00000000"}function va(B){return[2147483647&B[0],B[1]]}function wa(B){var C=new Int32Array([B[1],B[0]]);return new Float64Array(C.buffer)[0]}function xa(B){var C=new Float64Array([B]),D=new Int32Array(C.buffer),E=D[1],F=E,G=D[0],H=G;return[F,H>>>0]}function ya(B,C){var D=B.charCodeAt(C+4|0)<<32|B.charCodeAt(C+5|0)<<40|B.charCodeAt(C+6|0)<<48|B.charCodeAt(C+7|0)<<56,E=B.charCodeAt(C)|B.charCodeAt(C+1|0)<<8|B.charCodeAt(C+2|0)<<16|B.charCodeAt(C+3|0)<<24;return[D,E>>>0]}a.min_int=f;a.max_int=g;a.one=h;a.zero=i;a.not=m;a.of_int32=sa;a.to_int32=ta;a.add=l;a.neg=o;a.sub=p;a.lsl_=q;a.lsr_=r;a.asr_=s;a.is_zero=t;a.mul=u;a.xor=ha;a.or_=ia;a.and_=ja;a.swap=ga;a.ge=v;a.eq=n;a.neq=ka;a.lt=la;a.gt=w;a.le=ma;a.to_float=x;a.of_float=z;a.div=A;a.mod_=pa;a.div_mod=qa;a.compare=ra;a.to_hex=ua;a.discard_sign=va;a.float_of_bits=wa;a.bits_of_float=xa;a.get64=ya}),null);
__d("bs_caml_format",["bs_curry","bs_caml_int32","bs_caml_int64","bs_caml_utils","bs_caml_builtin_exceptions"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e,f){"use strict";__p&&__p();function g(x){throw[f.failure,x]}function h(x){__p&&__p();if(x>=65)if(x>=97)if(x>=123)return-1;else return x-87|0;else if(x>=91)return-1;else return x-55|0;else if(x>57||x<48)return-1;else return x-48|0}function i(x){switch(x){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function j(x){__p&&__p();var y=1,z=2,A=0;if(x[A]==="-"){y=-1;A=A+1|0}var B=x.charCodeAt(A),C=x.charCodeAt(A+1|0);if(B===48)if(C>=89)if(C!==98)if(C!==111){if(C===120){z=1;A=A+2|0}}else{z=0;A=A+2|0}else{z=3;A=A+2|0}else if(C!==66)if(C!==79){if(C>=88){z=1;A=A+2|0}}else{z=0;A=A+2|0}else{z=3;A=A+2|0}return[A,y,z]}function k(x){__p&&__p();var y=j(x),z=y[0],A=i(y[2]),B=4294967295,C=x.length,D=z<C?x.charCodeAt(z):0,E=h(D);if(E<0||E>=A)throw[f.failure,"int_of_string"];var F=function F(I,J){__p&&__p();while(true){var K=J,L=I;if(K===C)return L;else{var M=x.charCodeAt(K);if(M===95){J=K+1|0;continue}else{var N=h(M);if(N<0||N>=A)throw[f.failure,"int_of_string"];else{var O=A*L+N;if(O>B)throw[f.failure,"int_of_string"];else{J=K+1|0;I=O;continue}}}}}},G=y[1]*F(E,z+1|0),H=G|0;if(A===10&&G!==H)throw[f.failure,"int_of_string"];return H}function l(x){__p&&__p();var y=j(x),z=y[2],A=y[0],B=d.of_int32(i(z)),C=d.of_int32(y[1]),D;switch(z){case 0:D=[536870911,4294967295];break;case 1:D=[268435455,4294967295];break;case 2:D=[429496729,2576980377];break;case 3:D=[2147483647,4294967295];break}var E=x.length,F=A<E?x.charCodeAt(A):0,G=d.of_int32(h(F));if(d.lt(G,[0,0])||d.ge(G,B))throw[f.failure,"int64_of_string"];var H=function H(K,L){__p&&__p();while(true){var M=L,N=K;if(M===E)return N;else{var O=x.charCodeAt(M);if(O===95){L=M+1|0;continue}else{var P=d.of_int32(h(O));if(d.lt(P,[0,0])||d.ge(P,B)||d.gt(N,D))throw[f.failure,"int64_of_string"];else{var Q=d.add(d.mul(B,N),P);L=M+1|0;K=Q;continue}}}}},I=d.mul(C,H(G,A+1|0)),J=d.or_(I,[0,0]);if(d.eq(B,[0,10])&&d.neq(I,J))throw[f.failure,"int64_of_string"];return J}function m(x){switch(x){case 0:return 8;case 1:return 16;case 2:return 10}}function n(x){if(x>=65&&x<=90||x>=192&&x<=214||x>=216&&x<=222)return x+32|0;else return x}function o(x){__p&&__p();var y=x.length;if(y>31)throw[f.invalid_argument,"format_int: format too long"];var z=["+","-"," ",0,2,0,0,0,1,-1,"f"],A=0;while(true){var B=A;if(B>=y)return z;else{var C=x.charCodeAt(B),D=0;if(C>=69)if(C>=88)if(C>=121)D=1;else switch(C-88|0){case 0:z[4]=1;z[7]=1;A=B+1|0;continue;case 13:case 14:case 15:D=5;break;case 12:case 17:D=4;break;case 23:z[4]=0;A=B+1|0;continue;case 29:z[4]=2;A=B+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:D=1;break;case 32:z[4]=1;A=B+1|0;continue}else if(C>=72)D=1;else{z[5]=1;z[7]=1;z[10]=String.fromCharCode(n(C));A=B+1|0;continue}else{var E=C-32|0;if(E>25||E<0)D=1;else switch(E){case 3:z[3]=1;A=B+1|0;continue;case 0:case 11:D=2;break;case 13:z[0]="-";A=B+1|0;continue;case 14:z[9]=0;var F=B+1|0;while(function(F){return function(){var H=x.charCodeAt(F)-48|0;return+(H>=0&&H<=9)}}(F)()){z[9]=(c.imul(z[9],10)+x.charCodeAt(F)|0)-48|0;F=F+1|0}A=F;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:D=1;break;case 16:z[2]="0";A=B+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:D=3;break}}switch(D){case 1:A=B+1|0;continue;case 2:z[1]=String.fromCharCode(C);A=B+1|0;continue;case 3:z[6]=0;var G=B;while(function(G){return function(){var H=x.charCodeAt(G)-48|0;return+(H>=0&&H<=9)}}(G)()){z[6]=(c.imul(z[6],10)+x.charCodeAt(G)|0)-48|0;G=G+1|0}A=G;continue;case 4:z[5]=1;z[4]=2;A=B+1|0;continue;case 5:z[5]=1;z[10]=String.fromCharCode(C);A=B+1|0;continue}}}}function p(x,y){__p&&__p();var z=x[0],A=x[1],B=x[2],C=x[3],D=x[4],E=x[5],F=x[6],G=x[7],H=x[8],I=y.length;if(E&&(H<0||A!=="-"))I=I+1|0;if(C)if(D){if(D===1)I=I+2|0}else I=I+1|0;var J="";if(z==="+"&&B===" ")for(var K=I,L=F-1|0;K<=L;++K)J=J+B;if(E)if(H<0)J=J+"-";else if(A!=="-")J=J+A;if(C&&D===0)J=J+"0";if(C&&D===1)J=J+"0x";if(z==="+"&&B==="0")for(var M=I,N=F-1|0;M<=N;++M)J=J+B;J=G?J+y.toUpperCase():J+y;if(z==="-")for(var O=I,P=F-1|0;O<=P;++O)J=J+" ";return J}function q(x,y){__p&&__p();if(x==="%d")return String(y);else{var z=o(x),A=z,B=y,C=B<0?A[5]?(A[8]=-1,-B):B>>>0:B,D=C.toString(m(A[4]));if(A[9]>=0){A[2]=" ";var E=A[9]-D.length|0;if(E>0)D=e.repeat(E,"0")+D}return p(A,D)}}function r(x,y){__p&&__p();var z=o(x),A=z[5]&&d.lt(y,[0,0])?(z[8]=-1,d.neg(y)):y,B="",C=z[4];switch(C){case 0:var D=[0,8],E="01234567";if(d.lt(A,[0,0])){var F=d.discard_sign(A),G=d.div_mod(F,D),H=d.add([268435456,0],G[0]),I=G[1];B=String.fromCharCode(E.charCodeAt(I[1]|0))+B;while(d.neq(H,[0,0])){var J=d.div_mod(H,D);H=J[0];I=J[1];B=String.fromCharCode(E.charCodeAt(I[1]|0))+B}}else{var K=d.div_mod(A,D),L=K[0],M=K[1];B=String.fromCharCode(E.charCodeAt(M[1]|0))+B;while(d.neq(L,[0,0])){var N=d.div_mod(L,D);L=N[0];M=N[1];B=String.fromCharCode(E.charCodeAt(M[1]|0))+B}}break;case 1:B=d.to_hex(A)+B;break;case 2:var O=[0,10],P="0123456789";if(d.lt(A,[0,0])){var Q=d.discard_sign(A),R=d.div_mod(Q,O),S=d.div_mod(d.add([0,8],R[1]),O),T=d.add(d.add([214748364,3435973836],R[0]),S[0]),U=S[1];B=String.fromCharCode(P.charCodeAt(U[1]|0))+B;while(d.neq(T,[0,0])){var V=d.div_mod(T,O);T=V[0];U=V[1];B=String.fromCharCode(P.charCodeAt(U[1]|0))+B}}else{var W=d.div_mod(A,O),X=W[0],Y=W[1];B=String.fromCharCode(P.charCodeAt(Y[1]|0))+B;while(d.neq(X,[0,0])){var Z=d.div_mod(X,O);X=Z[0];Y=Z[1];B=String.fromCharCode(P.charCodeAt(Y[1]|0))+B}}break}if(z[9]>=0){z[2]=" ";var $=z[9]-B.length|0;if($>0)B=e.repeat($,"0")+B}return p(z,B)}function s(x,y){__p&&__p();var z=o(x),A=z[9]<0?6:z[9],B=y<0?(z[8]=-1,-y):y,C="";if(isNaN(B)){C="nan";z[2]=" "}else if(isFinite(B)){var D=z[10];switch(D){case"e":C=B.toExponential(A);var E=C.length;if(C[E-3|0]==="e")C=C.slice(0,E-1|0)+("0"+C.slice(E-1|0));break;case"f":C=B.toFixed(A);break;case"g":var F=A!==0?A:1;C=B.toExponential(F-1|0);var G=C.indexOf("e"),H=Number(C.slice(G+1|0))|0;if(H<-4||B>=1e21||B.toFixed().length>F){var I=G-1|0;while(C[I]==="0")I=I-1|0;if(C[I]===".")I=I-1|0;C=C.slice(0,I+1|0)+C.slice(G);var J=C.length;if(C[J-3|0]==="e")C=C.slice(0,J-1|0)+("0"+C.slice(J-1|0))}else{var K=F;if(H<0){K=K-(H+1|0)|0;C=B.toFixed(K)}else while(function(){C=B.toFixed(K);return+(C.length>(F+1|0))}())K=K-1|0;if(K!==0){var L=C.length-1|0;while(C[L]==="0")L=L-1|0;if(C[L]===".")L=L-1|0;C=C.slice(0,L+1|0)}}break;default:}}else{C="inf";z[2]=" "}return p(z,C)}var t=function t(x,g){__p&&__p();var y=+x;if(x.length>0&&y===y)return y;x=x.replace(/_/g,"");y=+x;if(x.length>0&&y===y||/^[+-]?nan$/i.test(x))return y;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(x)){var z=x.indexOf("p");z=z==-1?x.indexOf("P"):z;var A=+x.substring(z+1);y=+x.substring(0,z);return y*Math.pow(2,A)}if(/^\+?inf(inity)?$/i.test(x))return Infinity;if(/^-inf(inity)?$/i.test(x))return-Infinity;g("float_of_string")};function u(x){return b._2(t,x,g)}var v=q,w=q,ga=k,ha=k;a.caml_format_float=s;a.caml_format_int=q;a.caml_nativeint_format=v;a.caml_int32_format=w;a.caml_float_of_string=u;a.caml_int64_format=r;a.caml_int_of_string=k;a.caml_int32_of_string=ga;a.caml_int64_of_string=l;a.caml_nativeint_of_string=ha}),null);
__d("bs_caml_io",["bs_curry","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(w,x){return w+x}var k=undefined,l=["",function(w,x){var y=x.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write)return process.stdout.write(x);else if(x[y]==="\n")return 0;else return 0}],m=["",function(w,x){var y=x.length-1|0;if(x[y]==="\n")return 0;else return 0}];function n(){throw[i.failure,"caml_ml_open_descriptor_in not implemented"]}function o(){throw[i.failure,"caml_ml_open_descriptor_out not implemented"]}function p(w){if(w[0]!==""){h._2(w[1],w,w[0]);w[0]="";return 0}else return 0}var q=function q(w){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(w),true)};function r(w,x,y,z){__p&&__p();var A=y===0&&z===x.length?x:x.slice(y,z);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&w===l)return process.stdout.write(A);else{var B=A.lastIndexOf("\n");if(B<0){w[0]=w[0]+A;return 0}else{w[0]=w[0]+A.slice(0,B+1|0);p(w);w[0]=w[0]+A.slice(B+1|0);return 0}}}function s(w,x){return r(w,String.fromCharCode(x),0,1)}function t(w,x,y,z){throw[i.failure,"caml_ml_input ic not implemented"]}function u(){throw[i.failure,"caml_ml_input_char not implemnted"]}function v(){return[l,[m,0]]}g.$caret=j;g.stdin=k;g.stdout=l;g.stderr=m;g.caml_ml_open_descriptor_in=n;g.caml_ml_open_descriptor_out=o;g.caml_ml_flush=p;g.node_std_output=q;g.caml_ml_output=r;g.caml_ml_output_char=s;g.caml_ml_input=t;g.caml_ml_input_char=u;g.caml_ml_out_channels_list=v}),null);
__d("bs_caml_missing_polyfill",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){throw new Error(i)};g.not_implemented=h}),null);
__d("bs_caml_string",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(w){return String.fromCharCode(w)}function j(w,x){if(x>=w.length||x<0)throw[h.invalid_argument,"index out of bounds"];else return w.charCodeAt(x)}function k(w){if(w<0)throw[h.invalid_argument,"String.create"];else return new Array(w)}function l(w,x){if(w===x)return 0;else if(w<x)return-1;else return 1}function m(w,x,y,z){if(y>0){for(var A=x,B=(y+x|0)-1|0;A<=B;++A)w[A]=z;return 0}else return 0}function n(w,x,y,z,A){__p&&__p();if(A>0){var B=w.length-x|0;if(A<=B){for(var C=0,D=A-1|0;C<=D;++C)y[z+C|0]=w.charCodeAt(x+C|0);return 0}else{for(var E=0,F=B-1|0;E<=F;++E)y[z+E|0]=w.charCodeAt(x+E|0);for(var G=B,H=A-1|0;G<=H;++G)y[z+G|0]=0;return 0}}else return 0}function o(w,x,y,z,A){__p&&__p();if(A>0)if(w===y){var B=w,C=x,D=z,E=A;if(C<D){var F=(B.length-D|0)-1|0,G=E-1|0,H=F>G?G:F;for(var I=H;I>=0;--I)B[D+I|0]=B[C+I|0];return 0}else if(C>D){var J=(B.length-C|0)-1|0,K=E-1|0,L=J>K?K:J;for(var M=0;M<=L;++M)B[D+M|0]=B[C+M|0];return 0}else return 0}else{var N=w.length-x|0;if(A<=N){for(var O=0,P=A-1|0;O<=P;++O)y[z+O|0]=w[x+O|0];return 0}else{for(var Q=0,R=N-1|0;Q<=R;++Q)y[z+Q|0]=w[x+Q|0];for(var S=N,T=A-1|0;S<=T;++S)y[z+S|0]=0;return 0}}else return 0}function p(w){var x=w.length,y=new Array(x);for(var z=0,A=x-1|0;z<=A;++z)y[z]=w.charCodeAt(z);return y}function q(w){__p&&__p();var x=w,y=0,z=w.length,A="",B=z;if(y===0&&z<=4096&&z===x.length)return String.fromCharCode.apply(null,x);else{var C=0;while(B>0){var D=B<1024?B:1024,E=new Array(D);o(x,C,E,0,D);A=A+String.fromCharCode.apply(null,E);B=B-D|0;C=C+D|0}return A}}function r(w){var x=w.length,y=new Array(x);for(var z=0,A=x-1|0;z<=A;++z)y[z]=w[z];return q(y)}function s(w){if(w>31)return+(w<127);else return 0}function t(w,x){return w.charCodeAt(x)+(w.charCodeAt(x+1|0)<<8)|0}function u(w,x){return((w.charCodeAt(x)+(w.charCodeAt(x+1|0)<<8)|0)+(w.charCodeAt(x+2|0)<<16)|0)+(w.charCodeAt(x+3|0)<<24)|0}function v(w,x){if(x<0||x>=w.length)throw[h.invalid_argument,"index out of bounds"];else return w.charCodeAt(x)}g.bytes_of_string=p;g.bytes_to_string=q;g.caml_is_printable=s;g.caml_string_of_char_array=r;g.caml_string_get=j;g.caml_string_compare=l;g.caml_create_string=k;g.caml_fill_string=m;g.caml_blit_string=n;g.caml_blit_bytes=o;g.caml_string_get16=t;g.caml_string_get32=u;g.string_of_char=i;g.get=v}),null);
__d("bs_caml_sys",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(r){var s=typeof process==="undefined"?undefined:process;if(s!==undefined){var t=s.env[r];if(t!==undefined)return t;else throw h.not_found}else throw h.not_found}function j(){var r=typeof process==="undefined"?undefined:process;if(r!==undefined)return r.uptime();else return-1}function k(){return[((Date.now()|0)^4294967295)*Math.random()|0]}function l(){return 127}function m(){var r=typeof process==="undefined"?undefined:process;if(r!==undefined)return r.cwd();else return"/"}function n(){var r=typeof process==="undefined"?undefined:process;if(r!==undefined)if(r.argv==null)return["",[""]];else return[r.argv[0],r.argv];else return["",[""]]}function o(r){var s=typeof process==="undefined"?undefined:process;if(s!==undefined)return s.exit(r);else return 0}function p(){throw[h.failure,"caml_sys_is_directory not implemented"]}function q(){throw[h.failure,"caml_sys_file_exists not implemented"]}g.caml_sys_getenv=i;g.caml_sys_time=j;g.caml_sys_random_seed=k;g.caml_sys_system_command=l;g.caml_sys_getcwd=m;g.caml_sys_get_argv=n;g.caml_sys_exit=o;g.caml_sys_is_directory=p;g.caml_sys_file_exists=q}),null);
__d("bs_camlinternalFormatBasics",["bs_block"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(l){__p&&__p();if(typeof l==="number")return 0;else switch(l.tag|0){case 0:return h.__(0,[i(l[0])]);case 1:return h.__(1,[i(l[0])]);case 2:return h.__(2,[i(l[0])]);case 3:return h.__(3,[i(l[0])]);case 4:return h.__(4,[i(l[0])]);case 5:return h.__(5,[i(l[0])]);case 6:return h.__(6,[i(l[0])]);case 7:return h.__(7,[i(l[0])]);case 8:return h.__(8,[l[0],i(l[1])]);case 9:var m=l[0];return h.__(9,[m,m,i(l[2])]);case 10:return h.__(10,[i(l[0])]);case 11:return h.__(11,[i(l[0])]);case 12:return h.__(12,[i(l[0])]);case 13:return h.__(13,[i(l[0])]);case 14:return h.__(14,[i(l[0])])}}function j(l,m){__p&&__p();if(typeof l==="number")return m;else switch(l.tag|0){case 0:return h.__(0,[j(l[0],m)]);case 1:return h.__(1,[j(l[0],m)]);case 2:return h.__(2,[j(l[0],m)]);case 3:return h.__(3,[j(l[0],m)]);case 4:return h.__(4,[j(l[0],m)]);case 5:return h.__(5,[j(l[0],m)]);case 6:return h.__(6,[j(l[0],m)]);case 7:return h.__(7,[j(l[0],m)]);case 8:return h.__(8,[l[0],j(l[1],m)]);case 9:return h.__(9,[l[0],l[1],j(l[2],m)]);case 10:return h.__(10,[j(l[0],m)]);case 11:return h.__(11,[j(l[0],m)]);case 12:return h.__(12,[j(l[0],m)]);case 13:return h.__(13,[j(l[0],m)]);case 14:return h.__(14,[j(l[0],m)])}}function k(l,m){__p&&__p();if(typeof l==="number")return m;else switch(l.tag|0){case 0:return h.__(0,[k(l[0],m)]);case 1:return h.__(1,[k(l[0],m)]);case 2:return h.__(2,[l[0],k(l[1],m)]);case 3:return h.__(3,[l[0],k(l[1],m)]);case 4:return h.__(4,[l[0],l[1],l[2],k(l[3],m)]);case 5:return h.__(5,[l[0],l[1],l[2],k(l[3],m)]);case 6:return h.__(6,[l[0],l[1],l[2],k(l[3],m)]);case 7:return h.__(7,[l[0],l[1],l[2],k(l[3],m)]);case 8:return h.__(8,[l[0],l[1],l[2],k(l[3],m)]);case 9:return h.__(9,[k(l[0],m)]);case 10:return h.__(10,[k(l[0],m)]);case 11:return h.__(11,[l[0],k(l[1],m)]);case 12:return h.__(12,[l[0],k(l[1],m)]);case 13:return h.__(13,[l[0],l[1],k(l[2],m)]);case 14:return h.__(14,[l[0],l[1],k(l[2],m)]);case 15:return h.__(15,[k(l[0],m)]);case 16:return h.__(16,[k(l[0],m)]);case 17:return h.__(17,[l[0],k(l[1],m)]);case 18:return h.__(18,[l[0],k(l[1],m)]);case 19:return h.__(19,[k(l[0],m)]);case 20:return h.__(20,[l[0],l[1],k(l[2],m)]);case 21:return h.__(21,[l[0],k(l[1],m)]);case 22:return h.__(22,[k(l[0],m)]);case 23:return h.__(23,[l[0],k(l[1],m)]);case 24:return h.__(24,[l[0],l[1],k(l[2],m)])}}g.concat_fmtty=j;g.erase_rel=i;g.concat_fmt=k}),null);
__d("bs_pervasives",["bs_curry","bs_caml_io","bs_caml_obj","bs_caml_sys","bs_caml_format","bs_caml_string","bs_caml_exceptions","bs_caml_missing_polyfill","bs_caml_builtin_exceptions","bs_camlinternalFormatBasics"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(R){throw[j.failure,R]}function m(R){throw[j.invalid_argument,R]}var n=h.create("Pervasives.Exit");function o(R,S){if(d.caml_lessequal(R,S))return R;else return S}function p(R,S){if(d.caml_greaterequal(R,S))return R;else return S}function q(R){if(R>=0)return R;else return-R|0}function r(R){return R^-1}var s=-2147483648;function t(R,S){return R+S}function u(R){if(R<0||R>255)throw[j.invalid_argument,"char_of_int"];else return R}function v(R){if(R)return"true";else return"false"}function w(R){switch(R){case"false":return 0;case"true":return 1;default:throw[j.invalid_argument,"bool_of_string"]}}function x(R){return""+R}function y(R){__p&&__p();var S=R.length,T=0;while(true){var U=T;if(U>=S)return t(R,".");else{var V=g.get(R,U);if(V>=48)if(V>=58)return R;else{T=U+1|0;continue}else if(V!==45)return R;else{T=U+1|0;continue}}}}function z(R){return y(f.caml_format_float("%.12g",R))}function A(R,S){if(R)return[R[0],A(R[1],S)];else return S}var B=c.stdin,C=c.stdout,D=c.stderr;function E(R,S,T){return c.caml_ml_open_descriptor_out(i.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function F(R){return E([1,[3,[4,[7,0]]]],438,R)}function G(R){return E([1,[3,[4,[6,0]]]],438,R)}function H(){__p&&__p();var R=c.caml_ml_out_channels_list(0);while(true){var S=R;if(S){try{c.caml_ml_flush(S[0])}catch(T){}R=S[1];continue}else return 0}}function I(R,S){return c.caml_ml_output(R,S,0,S.length)}function J(R,S){return c.caml_ml_output(R,S,0,S.length)}function K(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[j.invalid_argument,"output"];else return c.caml_ml_output(R,S,T,U)}function ga(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[j.invalid_argument,"output_substring"];else return c.caml_ml_output(R,S,T,U)}function ha(R,S){return i.not_implemented("caml_output_value not implemented by bucklescript yet\n")}function ia(R){c.caml_ml_flush(R);return i.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function ja(R){try{c.caml_ml_flush(R)}catch(S){}try{return i.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(T){return 0}}function L(R,S,T){return c.caml_ml_open_descriptor_in(i.not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function ka(R){return L([0,[7,0]],0,R)}function la(R){return L([0,[6,0]],0,R)}function ma(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[j.invalid_argument,"input"];else return i.not_implemented("caml_ml_input not implemented by bucklescript yet\n")}function M(R,S,T,U){__p&&__p();while(true){var V=U,W=T;if(V<=0)return 0;else{var X=i.not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(X){U=V-X|0;T=W+X|0;continue}else throw j.end_of_file}}}function N(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[j.invalid_argument,"really_input"];else return M(R,S,T,U)}function na(R,S){var T=g.caml_create_string(S);N(R,T,0,S);return g.bytes_to_string(T)}function O(R){__p&&__p();var S=function S(U,V,W){__p&&__p();while(true){var X=W,Y=V;if(X){var Z=X[0],$=Z.length;g.caml_blit_bytes(Z,0,U,Y-$|0,$);W=X[1];V=Y-$|0;continue}else return U}},T=function T(U,V){__p&&__p();while(true){var W=V,X=U,Y=i.not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(Y)if(Y>0){var Z=g.caml_create_string(Y-1|0);i.not_implemented("caml_ml_input not implemented by bucklescript yet\n");c.caml_ml_input_char(R);if(X){var $=(W+Y|0)-1|0;return S(g.caml_create_string($),$,[Z,X])}else return Z}else{var ob=g.caml_create_string(-Y|0);i.not_implemented("caml_ml_input not implemented by bucklescript yet\n");V=W-Y|0;U=[ob,X];continue}else if(X)return S(g.caml_create_string(W),W,X);else throw j.end_of_file}};return g.bytes_to_string(T(0,0))}function oa(){try{return i.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(R){return 0}}function pa(R){return c.caml_ml_output_char(C,R)}function qa(R){return J(C,R)}function ra(R){return I(C,R)}function sa(R){return J(C,""+R)}function ta(R){return J(C,y(f.caml_format_float("%.12g",R)))}function ua(R){return 0}function va(){c.caml_ml_output_char(C,10);return c.caml_ml_flush(C)}function wa(R){return c.caml_ml_output_char(D,R)}function xa(R){return J(D,R)}function ya(R){return I(D,R)}function za(R){return J(D,""+R)}function Aa(R){return J(D,y(f.caml_format_float("%.12g",R)))}function Ba(R){return 0}function Ca(){c.caml_ml_output_char(D,10);return c.caml_ml_flush(D)}function Da(){c.caml_ml_flush(C);return O(B)}function Ea(){return f.caml_int_of_string((c.caml_ml_flush(C),O(B)))}function Fa(){return f.caml_float_of_string((c.caml_ml_flush(C),O(B)))}function Ga(R){return R[1]}function Ha(R,S){return[k.concat_fmt(R[0],S[0]),t(R[1],t("%,",S[1]))]}var P=[H];function Ia(R){var S=P[0];P[0]=function(){b._1(R,0);return b._1(S,0)};return 0}function Q(){return b._1(P[0],0)}function Ja(R){Q(0);return e.caml_sys_exit(R)}var Ka=2147483647,La=Infinity,Ma=-Infinity,Na=NaN,Oa=Number.MAX_VALUE,Pa=Number.MIN_VALUE,Qa=2220446049250313e-31,Ra=c.caml_ml_flush,Sa=c.caml_ml_output_char,Ta=c.caml_ml_output_char;function Ua(R,S){return i.not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")}function Va(R,S){return i.not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")}function Wa(){return i.not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")}function Xa(){return i.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function Ya(R,S){return i.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}var Za=c.caml_ml_input_char,$a=c.caml_ml_input_char;function ab(){return i.not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")}function bb(){return i.not_implemented("caml_input_value not implemented by bucklescript yet\n")}function cb(R,S){return i.not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")}function db(){return i.not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")}function eb(){return i.not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function fb(){return i.not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function gb(R,S){return i.not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}function hb(R,S){return i.not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")}function ib(){return i.not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")}function jb(){return i.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}function kb(R,S){return i.not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")}function lb(){return i.not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")}function mb(){return i.not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}var nb=[hb,ib,jb,kb,lb,mb];a.invalid_arg=m;a.failwith=l;a.Exit=n;a.min=o;a.max=p;a.abs=q;a.max_int=Ka;a.min_int=s;a.lnot=r;a.infinity=La;a.neg_infinity=Ma;a.nan=Na;a.max_float=Oa;a.min_float=Pa;a.epsilon_float=Qa;a.$caret=t;a.char_of_int=u;a.string_of_bool=v;a.bool_of_string=w;a.string_of_int=x;a.string_of_float=z;a.$at=A;a.stdin=B;a.stdout=C;a.stderr=D;a.print_char=pa;a.print_string=qa;a.print_bytes=ra;a.print_int=sa;a.print_float=ta;a.print_endline=ua;a.print_newline=va;a.prerr_char=wa;a.prerr_string=xa;a.prerr_bytes=ya;a.prerr_int=za;a.prerr_float=Aa;a.prerr_endline=Ba;a.prerr_newline=Ca;a.read_line=Da;a.read_int=Ea;a.read_float=Fa;a.open_out=F;a.open_out_bin=G;a.open_out_gen=E;a.flush=Ra;a.flush_all=H;a.output_char=Sa;a.output_string=J;a.output_bytes=I;a.output=K;a.output_substring=ga;a.output_byte=Ta;a.output_binary_int=Ua;a.output_value=ha;a.seek_out=Va;a.pos_out=Wa;a.out_channel_length=Xa;a.close_out=ia;a.close_out_noerr=ja;a.set_binary_mode_out=Ya;a.open_in=ka;a.open_in_bin=la;a.open_in_gen=L;a.input_char=Za;a.input_line=O;a.input=ma;a.really_input=N;a.really_input_string=na;a.input_byte=$a;a.input_binary_int=ab;a.input_value=bb;a.seek_in=cb;a.pos_in=db;a.in_channel_length=eb;a.close_in=fb;a.close_in_noerr=oa;a.set_binary_mode_in=gb;a.LargeFile=nb;a.string_of_format=Ga;a.$caret$caret=Ha;a.exit=Ja;a.at_exit=Ia;a.valid_float_lexem=y;a.unsafe_really_input=M;a.do_at_exit=Q}),null);
__d("bs_list",["bs_curry","bs_caml_obj","bs_pervasives","bs_caml_builtin_exceptions"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e){"use strict";__p&&__p();function f(q){__p&&__p();var r=0,s=q;while(true){var t=s,u=r;if(t){s=t[1];r=u+1|0;continue}else return u}}function ga(q){if(q)return q[0];else throw[e.failure,"hd"]}function ha(q){if(q)return q[1];else throw[e.failure,"tl"]}function ia(q,r){__p&&__p();if(r<0)throw[e.invalid_argument,"List.nth"];else{var s=q,t=r;while(true){var u=t,v=s;if(v)if(u){t=u-1|0;s=v[1];continue}else return v[0];else throw[e.failure,"nth"]}}}function g(q,r){while(true){var s=r,t=q;if(t){r=[t[0],s];q=t[1];continue}else return s}}function ja(q){return g(q,0)}function h(q){if(q)return d.$at(q[0],h(q[1]));else return 0}function i(q,r){if(r){var s=b._1(q,r[0]);return[s,i(q,r[1])]}else return 0}function j(q,r,s){if(s){var t=b._2(r,q,s[0]);return[t,j(q+1|0,r,s[1])]}else return 0}function ka(q,r){return j(0,q,r)}function la(q,r){__p&&__p();var s=0,t=r;while(true){var u=t,v=s;if(u){t=u[1];s=[b._1(q,u[0]),v];continue}else return v}}function ma(q,r){while(true){var s=r;if(s){b._1(q,s[0]);r=s[1];continue}else return 0}}function na(q,r){__p&&__p();var s=0,t=q,u=r;while(true){var v=u,w=s;if(v){b._2(t,w,v[0]);u=v[1];s=w+1|0;continue}else return 0}}function oa(q,r,s){while(true){var t=s,u=r;if(t){s=t[1];r=b._2(q,u,t[0]);continue}else return u}}function k(q,r,s){if(r)return b._2(q,r[0],k(q,r[1],s));else return s}function l(q,r,s){if(r)if(s){var t=b._2(q,r[0],s[0]);return[t,l(q,r[1],s[1])]}else throw[e.invalid_argument,"List.map2"];else if(s)throw[e.invalid_argument,"List.map2"];else return 0}function pa(q,r,s){__p&&__p();var t=0,u=r,v=s;while(true){var w=v,x=u,y=t;if(x)if(w){v=w[1];u=x[1];t=[b._2(q,x[0],w[0]),y];continue}else throw[e.invalid_argument,"List.rev_map2"];else if(w)throw[e.invalid_argument,"List.rev_map2"];else return y}}function qa(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t){b._2(q,u[0],t[0]);s=t[1];r=u[1];continue}else throw[e.invalid_argument,"List.iter2"];else if(t)throw[e.invalid_argument,"List.iter2"];else return 0}}function ra(q,r,s,t){__p&&__p();while(true){var u=t,v=s,w=r;if(v)if(u){t=u[1];s=v[1];r=b._3(q,w,v[0],u[0]);continue}else throw[e.invalid_argument,"List.fold_left2"];else if(u)throw[e.invalid_argument,"List.fold_left2"];else return w}}function sa(q,r,s,t){if(r)if(s)return b._3(q,r[0],s[0],sa(q,r[1],s[1],t));else throw[e.invalid_argument,"List.fold_right2"];else if(s)throw[e.invalid_argument,"List.fold_right2"];else return t}function ta(q,r){__p&&__p();while(true){var s=r;if(s)if(b._1(q,s[0])){r=s[1];continue}else return 0;else return 1}}function ua(q,r){__p&&__p();while(true){var s=r;if(s)if(b._1(q,s[0]))return 1;else{r=s[1];continue}else return 0}}function va(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t)if(b._2(q,u[0],t[0])){s=t[1];r=u[1];continue}else return 0;else throw[e.invalid_argument,"List.for_all2"];else if(t)throw[e.invalid_argument,"List.for_all2"];else return 1}}function wa(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t)if(b._2(q,u[0],t[0]))return 1;else{s=t[1];r=u[1];continue}else throw[e.invalid_argument,"List.exists2"];else if(t)throw[e.invalid_argument,"List.exists2"];else return 0}}function xa(q,r){__p&&__p();while(true){var s=r;if(s)if(c.caml_compare(s[0],q)){r=s[1];continue}else return 1;else return 0}}function ya(q,r){__p&&__p();while(true){var s=r;if(s)if(s[0]===q)return 1;else{r=s[1];continue}else return 0}}function za(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(c.caml_compare(t[0],q)){r=s[1];continue}else return t[1]}else throw e.not_found}}function Aa(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(t[0]===q)return t[1];else{r=s[1];continue}}else throw e.not_found}}function Ba(q,r){__p&&__p();while(true){var s=r;if(s)if(c.caml_compare(s[0][0],q)){r=s[1];continue}else return 1;else return 0}}function Ca(q,r){__p&&__p();while(true){var s=r;if(s)if(s[0][0]===q)return 1;else{r=s[1];continue}else return 0}}function Da(q,r){if(r){var s=r[1],t=r[0];if(c.caml_compare(t[0],q))return[t,Da(q,s)];else return s}else return 0}function Ea(q,r){if(r){var s=r[1],t=r[0];if(t[0]===q)return s;else return[t,Ea(q,s)]}else return 0}function Fa(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(b._1(q,t))return t;else{r=s[1];continue}}else throw e.not_found}}function Ga(q){__p&&__p();return function(r){__p&&__p();var s=0,t=r;while(true){var u=t,v=s;if(u){var w=u[1],x=u[0];if(b._1(q,x)){t=w;s=[x,v];continue}else{t=w;continue}}else return g(v,0)}}}function Ha(q,r){__p&&__p();var s=0,t=0,u=r;while(true){var v=u,w=t,x=s;if(v){var y=v[1],z=v[0];if(b._1(q,z)){u=y;s=[z,x];continue}else{u=y;t=[z,w];continue}}else return[g(x,0),g(w,0)]}}function Ia(q){if(q){var r=q[0],s=Ia(q[1]);return[[r[0],s[0]],[r[1],s[1]]]}else return[0,0]}function Ja(q,r){if(q)if(r)return[[q[0],r[0]],Ja(q[1],r[1])];else throw[e.invalid_argument,"List.combine"];else if(r)throw[e.invalid_argument,"List.combine"];else return 0}function m(q,r,s){if(r)if(s){var t=s[0],u=r[0];if(b._2(q,u,t)<=0)return[u,m(q,r[1],s)];else return[t,m(q,r,s[1])]}else return r;else return s}function n(q,r){__p&&__p();while(true){var s=r,t=q;if(t)if(s){r=s[1];q=t-1|0;continue}else throw[e.assert_failure,["list.ml",223,11]];else return s}}function o(q,r){__p&&__p();var p=function p(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0];if(b._2(q,A,z)<=0)if(b._2(q,z,y)<=0)return[A,[z,[y,0]]];else if(b._2(q,A,y)<=0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else if(b._2(q,A,y)<=0)return[z,[A,[y,0]]];else if(b._2(q,z,y)<=0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]]}else v=1}else v=1}else v=1;else if(r){var B=r[1];if(B){var C=B[0],D=r[0];if(b._2(q,D,C)<=0)return[D,[C,0]];else return[C,[D,0]]}else v=1}else v=1;if(v===1){var E=u>>1,F=u-E|0,G=n(E,r),H=s(E,r),I=s(F,G),J=H,K=I,L=0;while(true){var M=L,N=K,O=J;if(O)if(N){var P=N[0],Q=O[0];if(b._2(q,Q,P)>0){L=[Q,M];J=O[1];continue}else{L=[P,M];K=N[1];continue}}else return g(O,M);else return g(N,M)}}},s=function s(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0];if(b._2(q,A,z)>0)if(b._2(q,z,y)>0)return[A,[z,[y,0]]];else if(b._2(q,A,y)>0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else if(b._2(q,A,y)>0)return[z,[A,[y,0]]];else if(b._2(q,z,y)>0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]]}else v=1}else v=1}else v=1;else if(r){var B=r[1];if(B){var C=B[0],D=r[0];if(b._2(q,D,C)>0)return[D,[C,0]];else return[C,[D,0]]}else v=1}else v=1;if(v===1){var E=u>>1,F=u-E|0,G=n(E,r),H=p(E,r),I=p(F,G),J=H,K=I,L=0;while(true){var M=L,N=K,O=J;if(O)if(N){var P=N[0],Q=O[0];if(b._2(q,Q,P)<=0){L=[Q,M];J=O[1];continue}else{L=[P,M];K=N[1];continue}}else return g(O,M);else return g(N,M)}}},t=f(r);if(t<2)return r;else return p(t,r)}function Ka(q,r){__p&&__p();var p=function p(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0],B=b._2(q,A,z);if(B)if(B<0){var C=b._2(q,z,y);if(C)if(C<0)return[A,[z,[y,0]]];else{var D=b._2(q,A,y);if(D)if(D<0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else return[A,[z,0]]}else return[A,[z,0]]}else{var E=b._2(q,A,y);if(E)if(E<0)return[z,[A,[y,0]]];else{var F=b._2(q,z,y);if(F)if(F<0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]];else return[z,[A,0]]}else return[z,[A,0]]}else{var G=b._2(q,z,y);if(G)if(G<0)return[z,[y,0]];else return[y,[z,0]];else return[z,0]}}else v=1}else v=1}else v=1;else if(r){var H=r[1];if(H){var I=H[0],J=r[0],K=b._2(q,J,I);if(K)if(K<0)return[J,[I,0]];else return[I,[J,0]];else return[J,0]}else v=1}else v=1;if(v===1){var L=u>>1,M=u-L|0,N=n(L,r),O=s(L,r),P=s(M,N),Q=O,R=P,S=0;while(true){var T=S,U=R,V=Q;if(V)if(U){var W=U[1],X=U[0],Y=V[1],Z=V[0],$=b._2(q,Z,X);if($)if($>0){S=[Z,T];Q=Y;continue}else{S=[X,T];R=W;continue}else{S=[Z,T];R=W;Q=Y;continue}}else return g(V,T);else return g(U,T)}}},s=function s(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0],B=b._2(q,A,z);if(B)if(B>0){var C=b._2(q,z,y);if(C)if(C>0)return[A,[z,[y,0]]];else{var D=b._2(q,A,y);if(D)if(D>0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else return[A,[z,0]]}else return[A,[z,0]]}else{var E=b._2(q,A,y);if(E)if(E>0)return[z,[A,[y,0]]];else{var F=b._2(q,z,y);if(F)if(F>0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]];else return[z,[A,0]]}else return[z,[A,0]]}else{var G=b._2(q,z,y);if(G)if(G>0)return[z,[y,0]];else return[y,[z,0]];else return[z,0]}}else v=1}else v=1}else v=1;else if(r){var H=r[1];if(H){var I=H[0],J=r[0],K=b._2(q,J,I);if(K)if(K>0)return[J,[I,0]];else return[I,[J,0]];else return[J,0]}else v=1}else v=1;if(v===1){var L=u>>1,M=u-L|0,N=n(L,r),O=p(L,r),P=p(M,N),Q=O,R=P,S=0;while(true){var T=S,U=R,V=Q;if(V)if(U){var W=U[1],X=U[0],Y=V[1],Z=V[0],$=b._2(q,Z,X);if($)if($<0){S=[Z,T];Q=Y;continue}else{S=[X,T];R=W;continue}else{S=[Z,T];R=W;Q=Y;continue}}else return g(V,T);else return g(U,T)}}},t=f(r);if(t<2)return r;else return p(t,r)}var La=d.$at,Ma=h,Na=Ga,p=o,Oa=o;a.length=f;a.hd=ga;a.tl=ha;a.nth=ia;a.rev=ja;a.append=La;a.rev_append=g;a.concat=Ma;a.flatten=h;a.iter=ma;a.iteri=na;a.map=i;a.mapi=ka;a.rev_map=la;a.fold_left=oa;a.fold_right=k;a.iter2=qa;a.map2=l;a.rev_map2=pa;a.fold_left2=ra;a.fold_right2=sa;a.for_all=ta;a.exists=ua;a.for_all2=va;a.exists2=wa;a.mem=xa;a.memq=ya;a.find=Fa;a.filter=Na;a.find_all=Ga;a.partition=Ha;a.assoc=za;a.assq=Aa;a.mem_assoc=Ba;a.mem_assq=Ca;a.remove_assoc=Da;a.remove_assq=Ea;a.split=Ia;a.combine=Ja;a.sort=p;a.stable_sort=o;a.fast_sort=Oa;a.sort_uniq=Ka;a.merge=m}),null);
__d("ReasonReact.bs",["bs_list","bs_array","bs_curry","React","bs_caml_builtin_exceptions"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e,f){"use strict";__p&&__p();function g(y,z,A){var B=[y,z].concat(A);return e.createElement.apply(null,B)}var h=null;function i(){return 0}function j(y,z,A){d._1(y,A);return d._1(z,A)}var k=[i,j];function l(){return 0}function m(){return 0}function n(){return 0}function o(){return 0}function p(){return 1}function q(y){return y[2]}function r(){return"RenderNotImplemented"}function ga(){return 0}function s(y,z){return 0}function t(){return 0}function u(y,z,A){var B=y.reasonProps;if(B==null)if(z)return[d._1(z[0],y)];else throw[f.invalid_argument,"A JS component called the Reason component "+(A+" which didn't implement the JS->Reason React props conversion.")];else return B}function ha(y){__p&&__p();return e.createClass({displayName:y,subscriptions:null,self:function z(A,B){var C=this;return[C.handleMethod,C.reduceMethod,A,B,C.sendMethod]},transitionNextTotalState:function z(A,B){if(typeof B==="number")return A;else switch(B.tag|0){case 0:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements,sideEffects:A.sideEffects};case 1:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:A.sideEffects};case 2:return{reasonState:A.reasonState,reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[B[0],A.sideEffects]};case 3:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements,sideEffects:[B[1],A.sideEffects]};case 4:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[B[1],A.sideEffects]}}},getInitialState:function z(){var A=this,B=u(A.props,A.jsPropsToReason,y),C=d._1(B[0][10],0);return{reasonState:C,reasonStateVersion:1,reasonStateVersionUsedToComputeSubelements:1,sideEffects:0}},componentDidMount:function z(){__p&&__p();var A=this,B=this,C=u(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState,G=A.self(F,D[11]);if(D[13]!==t){var H=b.map(function(K){var L=K[1],M=d._1(K[0],0);return function(){return d._1(L,M)}},d._1(D[13],G));A.subscriptions=H}if(D[4]!==l){var I=d._1(D[4],G),J=A.transitionNextTotalState(E,I);if(J.reasonStateVersion!==E.reasonStateVersion)return B.setState(J);else return 0}else return 0},componentDidUpdate:function z(A,B){var C=this,D=this,E=D.state,F=E.reasonState,G=D.props,H=u(G,D.jsPropsToReason,y),I=H[0];if(I[5]!==n){var J=+(A===G),K=J!==0?H:u(A,D.jsPropsToReason,y),L=B.reasonState,M=C.self(F,I[11]),N=M[0],O=M[1],P=K[0][11],Q=M[4],R=[N,O,L,P,Q];return d._1(I[5],[R,M])}else return 0},componentWillUnmount:function z(){var A=this,B=this,C=u(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState;if(D[6]!==o)d._1(D[6],A.self(F,D[11]));var G=A.subscriptions;if(G==null)return 0;else return b.iter(function(H){return d._1(H,0)},b.rev(G))},componentWillUpdate:function z(A,B){var C=this,D=this,E=u(A,D.jsPropsToReason,y),F=E[0];if(F[7]!==m){var G=D.props,H=+(A===G),I=H!==0?E:u(G,D.jsPropsToReason,y),J=D.state,K=J.reasonState,L=B.reasonState,M=C.self(L,F[11]),N=M[0],O=M[1],P=I[0][11],Q=M[4],R=[N,O,K,P,Q];return d._1(F[7],[R,M])}else return 0},componentWillReceiveProps:function z(A){__p&&__p();var B=this,C=this,D=u(A,C.jsPropsToReason,y),E=D[0];if(E[3]!==q){var F=C.props,G=+(A===F),H=G!==0?D:u(F,C.jsPropsToReason,y),I=H[0];return C.setState(function(J,K){var L=J.reasonState,M=J.reasonStateVersion,N=B.self(L,I[11]),O=d._1(E[3],N),G=+(O!==L),P=G!==0?M+1|0:M;if(P!==M)return{reasonState:O,reasonStateVersion:P,reasonStateVersionUsedToComputeSubelements:J.reasonStateVersionUsedToComputeSubelements,sideEffects:O.sideEffects};else return J})}else return 0},shouldComponentUpdate:function z(A,B,C){__p&&__p();var D=this,E=this,F=E.props,G=+(A!==F),H=u(E.props,E.jsPropsToReason,y),I=+(A===F),J=I!==0?H:u(A,E.jsPropsToReason,y),K=J[0],L=B.reasonStateVersion,M=B.reasonStateVersionUsedToComputeSubelements,N=+(M!==L),O=G||N,P=B.reasonState,Q=D.self(P,K[11]),R;if(O&&K[8]!==p){var wa=E.state,xa=wa.reasonState,ya=Q[0],za=Q[1],Aa=H[0][11],Ba=Q[4],Ca=[ya,za,xa,Aa,Ba];R=d._1(K[8],[Ca,Q])}else R=O;B.reasonStateVersionUsedToComputeSubelements=L;var S=b.rev(B.sideEffects);if(S!==0){b.iter(function(T){return d._1(T,Q)},S);E.setState(function(T,C){__p&&__p();var U=function U(W,X,Y){__p&&__p();while(true){var Z=Y,V=X,$=W;if(Z)if(V>0){Y=Z[1];X=V-1|0;W=[Z[0],$];continue}else return b.rev($);else return b.rev($)}},V=b.length(T.sideEffects)-b.length(B.sideEffects)|0,Da=U(0,V,T.sideEffects);return{reasonState:T.reasonState,reasonStateVersion:T.reasonStateVersion,reasonStateVersionUsedToComputeSubelements:T.reasonStateVersionUsedToComputeSubelements,sideEffects:Da}})}return R},handleMethod:function z(A){var B=this,C=this;return function(D){var E=C.state,F=E.reasonState,G=u(C.props,C.jsPropsToReason,y);return d._2(A,D,B.self(F,G[0][11]))}},updateMethod:function z(A){__p&&__p();var B=this,C=this;return function(D){var E=C.state,F=E.reasonState,G=u(C.props,C.jsPropsToReason,y),H=d._2(A,D,B.self(F,G[0][11]));if(H){var I=B.transitionNextTotalState(E,H);if(I.reasonStateVersion!==E.reasonStateVersion)return C.setState(I);else return 0}else return h}},sendMethod:function z(A){__p&&__p();var B=this,C=this,D=u(C.props,C.jsPropsToReason,y),E=D[0];if(E[12]!==s){var F=d._1(E[12],A);return C.setState(function(G,H){var I=G.reasonState,J=d._1(F,I);if(J){var K=B.transitionNextTotalState(G,J);if(K.reasonStateVersion!==G.reasonStateVersion)return K;else return h}else return h})}else return 0},reduceMethod:function z(A,B){var C=this;return C.sendMethod(d._1(A,B))},render:function z(){var A=this,B=this,C=u(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState;return d._1(D[9],A.self(F,D[11]))}})}function v(y){return[y,ha(y),[0],q,l,n,o,m,p,r,ga,0,s,t,0]}var ia=v,ja=v,ka=v,la=v;function ma(y,z,A){var B=y?y[0]:undefined,C=z?z[0]:undefined,D=[A],E=A[14];if(E)return d._2(E[0],B,C);else return e.createElement(A[1],{key:B,ref:C,reasonProps:D})}function na(y,z){var A=y[1].prototype;A.jsPropsToReason=[z];return y[1]}var oa=v("interop");function pa(y,z,A){var B=[function(D,E){var F=y,G=z,H=A,I=D,J=E,K=Object.assign(Object.assign({},G),{ref:J,key:I}),L=[F,K].concat(H);return e.createElement.apply(null,L)}],C=oa.slice();C[14]=B;return C}function w(){var y=typeof window==="undefined"?undefined:window;if(y!==undefined){var z=y.location.pathname;switch(z){case"":case"/":return 0;default:var A=z.slice(1),B=A[A.length-1|0],C=B==="/"?A.slice(0,-1):A;return c.to_list(C.split("/"))}}else return 0}function qa(){var y=typeof window==="undefined"?undefined:window;if(y!==undefined){var z=y.location.hash;switch(z){case"":case"#":return"";default:return z.slice(1)}}else return""}function ra(){var y=typeof window==="undefined"?undefined:window;if(y!==undefined){var z=y.location.search;switch(z){case"":case"?":return"";default:return z.slice(1)}}else return""}function sa(w){var y=typeof history==="undefined"?undefined:history,z=typeof window==="undefined"?undefined:window;if(y!==undefined&&z!==undefined){y.pushState(null,"",w);z.dispatchEvent(new Event("popstate"));return 0}else return 0}function x(){return[w(0),qa(0),ra(0)]}function ta(y){var z=typeof window==="undefined"?undefined:window;if(z!==undefined){var A=function A(){return d._1(y,x(0))};z.addEventListener("popstate",A);return A}else return function(){return 0}}function ua(y){var z=typeof window==="undefined"?undefined:window;if(z!==undefined){z.removeEventListener("popstate",y);return 0}else return 0}var va=[sa,ta,ua,x];a.Callback=k;a.statelessComponent=ia;a.statelessComponentWithRetainedProps=ja;a.reducerComponent=ka;a.reducerComponentWithRetainedProps=la;a.element=ma;a.wrapReasonForJs=na;a.createDomElement=g;a.wrapJsForReason=pa;a.Router=va}),null);
__d("bs_js_exn",["bs_caml_exceptions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h.create("Js_exn.Error");function j(r){if(h.isCamlExceptionOrOpenVariant(r))return r;else return[i,r]}function k(r){throw new Error(r)}function l(r){throw new EvalError(r)}function m(r){throw new RangeError(r)}function n(r){throw new ReferenceError(r)}function o(r){throw new SyntaxError(r)}function p(r){throw new TypeError(r)}function q(r){throw new URIError(r)}g.$$Error=i;g.internalToOCamlException=j;g.raiseError=k;g.raiseEvalError=l;g.raiseRangeError=m;g.raiseReferenceError=n;g.raiseSyntaxError=o;g.raiseTypeError=p;g.raiseUriError=q}),null);
__d("bs_array",["bs_curry","bs_js_exn","bs_caml_array","bs_caml_exceptions","bs_caml_builtin_exceptions"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e,f){"use strict";__p&&__p();function g(x,y){if(x)if(x<0)throw[f.invalid_argument,"Array.init"];else{var z=d.caml_make_vect(x,b._1(y,0));for(var A=1,B=x-1|0;A<=B;++A)z[A]=b._1(y,A);return z}else return[]}function h(x,y,g){var z=d.caml_make_vect(x,[]);for(var A=0,B=x-1|0;A<=B;++A)z[A]=d.caml_make_vect(y,g);return z}function i(x){var y=x.length;if(y)return d.caml_array_sub(x,0,y);else return[]}function j(x,y){var z=x.length;if(z)if(y.length)return x.concat(y);else return d.caml_array_sub(x,0,z);else return i(y)}function k(x,y,z){if(z<0||y>(x.length-z|0))throw[f.invalid_argument,"Array.sub"];else return d.caml_array_sub(x,y,z)}function l(x,y,z,A){if(y<0||z<0||y>(x.length-z|0))throw[f.invalid_argument,"Array.fill"];else{for(var B=y,C=(y+z|0)-1|0;B<=C;++B)x[B]=A;return 0}}function m(x,y,z,A,B){if(B<0||y<0||y>(x.length-B|0)||A<0||A>(z.length-B|0))throw[f.invalid_argument,"Array.blit"];else return d.caml_array_blit(x,y,z,A,B)}function n(x,y){for(var z=0,A=y.length-1|0;z<=A;++z)b._1(x,y[z]);return 0}function o(x,y){var z=y.length;if(z){var A=d.caml_make_vect(z,b._1(x,y[0]));for(var B=1,C=z-1|0;B<=C;++B)A[B]=b._1(x,y[B]);return A}else return[]}function p(x,y){for(var z=0,A=y.length-1|0;z<=A;++z)b._2(x,z,y[z]);return 0}function q(x,y){var z=y.length;if(z){var A=d.caml_make_vect(z,b._2(x,0,y[0]));for(var B=1,C=z-1|0;B<=C;++B)A[B]=b._2(x,B,y[B]);return A}else return[]}function r(x){__p&&__p();var y=x.length-1|0,z=0;while(true){var A=z,B=y;if(B<0)return A;else{z=[x[B],A];y=B-1|0;continue}}}function s(x,y){while(true){var z=y,A=x;if(z){y=z[1];x=A+1|0;continue}else return A}}function t(x){__p&&__p();if(x){var y=d.caml_make_vect(s(0,x),x[0]),z=1,A=x[1];while(true){var B=A,C=z;if(B){y[C]=B[0];A=B[1];z=C+1|0;continue}else return y}}else return[]}function u(x,y,z){var A=y;for(var B=0,C=z.length-1|0;B<=C;++B)A=b._2(x,A,z[B]);return A}function ga(x,y,z){var A=z;for(var B=y.length-1|0;B>=0;--B)A=b._2(x,y[B],A);return A}var v=e.create("Array.Bottom");function ha(x,y){__p&&__p();var z=function z(D,E){__p&&__p();var I=((E+E|0)+E|0)+1|0,J=I;if((I+2|0)<D){if(b._2(x,d.caml_array_get(y,I),d.caml_array_get(y,I+1|0))<0)J=I+1|0;if(b._2(x,d.caml_array_get(y,J),d.caml_array_get(y,I+2|0))<0)J=I+2|0;return J}else if((I+1|0)<D&&b._2(x,d.caml_array_get(y,I),d.caml_array_get(y,I+1|0))<0)return I+1|0;else if(I<D)return I;else throw[v,E]},A=function A(D,E,G){__p&&__p();try{var I=D,J=E,H=G;while(true){var F=J,K=z(I,F);if(b._2(x,d.caml_array_get(y,K),H)>0){d.caml_array_set(y,F,d.caml_array_get(y,K));J=K;continue}else return d.caml_array_set(y,F,H)}}catch(L){var M=c.internalToOCamlException(L);if(M[0]===v)return d.caml_array_set(y,M[1],G);else throw M}},B=function B(D,E){__p&&__p();try{var I=D,J=E;while(true){var F=J,K=z(I,F);d.caml_array_set(y,F,d.caml_array_get(y,K));J=K;continue}}catch(L){var M=c.internalToOCamlException(L);if(M[0]===v)return M[1];else throw M}},C=function C(I,G){__p&&__p();while(true){var E=I,J=(E-1|0)/3|0;if(E===J)throw[f.assert_failure,["array.ml",168,4]];if(b._2(x,d.caml_array_get(y,J),G)<0){d.caml_array_set(y,E,d.caml_array_get(y,J));if(J>0){I=J;continue}else return d.caml_array_set(y,0,G)}else return d.caml_array_set(y,E,G)}},D=y.length;for(var E=((D+1|0)/3|0)-1|0;E>=0;--E)A(D,E,d.caml_array_get(y,E));for(var F=D-1|0;F>=2;--F){var G=d.caml_array_get(y,F);d.caml_array_set(y,F,d.caml_array_get(y,0));C(B(F,0),G)}if(D>1){var H=d.caml_array_get(y,1);d.caml_array_set(y,1,d.caml_array_get(y,0));return d.caml_array_set(y,0,H)}else return 0}function w(x,y){__p&&__p();var z=function z(G,H,I,J,K,L,M){__p&&__p();var N=G+H|0,O=J+K|0,P=G,Q=d.caml_array_get(y,G),R=J,S=d.caml_array_get(I,J),T=M;while(true){var U=T,V=S,W=R,X=Q,Y=P;if(b._2(x,X,V)<=0){d.caml_array_set(L,U,X);var Z=Y+1|0;if(Z<N){T=U+1|0;Q=d.caml_array_get(y,Z);P=Z;continue}else return m(I,W,L,U+1|0,O-W|0)}else{d.caml_array_set(L,U,V);var $=W+1|0;if($<O){T=U+1|0;S=d.caml_array_get(I,$);R=$;continue}else return m(y,Y,L,U+1|0,N-Y|0)}}},A=function A(G,H,I,J){for(var K=0,L=J-1|0;K<=L;++K){var M=d.caml_array_get(y,G+K|0),N=(I+K|0)-1|0;while(N>=I&&b._2(x,d.caml_array_get(H,N),M)>0){d.caml_array_set(H,N+1|0,d.caml_array_get(H,N));N=N-1|0}d.caml_array_set(H,N+1|0,M)}return 0},B=function B(G,H,I,J){if(J<=5)return A(G,H,I,J);else{var D=J/2|0,E=J-D|0;B(G+D|0,H,I+D|0,E);B(G,y,G+E|0,D);return z(G+E|0,D,H,I+D|0,E,H,I)}},C=y.length;if(C<=5)return A(0,y,0,C);else{var D=C/2|0,E=C-D|0,F=d.caml_make_vect(E,d.caml_array_get(y,0));B(D,F,0,E);B(0,y,E,D);return z(E,D,F,0,E,y,0)}}var ia=h,ja=d.caml_array_concat,ka=w;a.init=g;a.make_matrix=h;a.create_matrix=ia;a.append=j;a.concat=ja;a.sub=k;a.copy=i;a.fill=l;a.blit=m;a.to_list=r;a.of_list=t;a.iter=n;a.map=o;a.iteri=p;a.mapi=q;a.fold_left=u;a.fold_right=ga;a.sort=ha;a.stable_sort=w;a.fast_sort=ka}),null);
__d("bs_js_boolean",[],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i)return true;else return false}g.to_js_boolean=h}),null);
__d("Utils.bs",["bs_array","bs_curry","bs_js_boolean","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(u){if(u==null)return 0;else return+u}function m(u,v){if(u)return u[0];else return v}function n(u){return+((u==null?0:[u])!==0)}function o(u){if(u)return u[0];else return 0}function p(u){if(u==null)return 0;else return[+u]}function q(u){if(u)return j.to_js_boolean(u[0]);else return undefined}function r(u){if(u)return j.to_js_boolean(u[0]);else return false}function s(u,v){__p&&__p();var w=u,x=v,y=0;while(true){var z=y,A=x;if(A){var B=A[1],C=i._1(w,A[0]);if(C){y=[C[0],z];x=B;continue}else{x=B;continue}}else return z}}function t(u){return h.map(function(v){if(v)return v[0];else throw[k.invalid_argument,"arrayCompact: sorry, something went wrong."]},u.filter(function(v){if(v)return 1;else return 0}))}g.isTruthy=l;g.$pipe$unknown=m;g.isDefined=n;g.isSomeTrue=o;g.nullUndefinedBooleanToOptionBool=p;g.optionBoolToNullUndefinedBoolean=q;g.optionBoolToBoolean=r;g.listFilterMap=s;g.arrayCompact=t}),null);
__d("bs_js_primitive",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n){if(n===null)return 1;else return+(n===undefined)}function i(n){if(n===null||n===undefined)return 0;else return[n]}function j(n){if(n===undefined)return 0;else return[n]}function k(n){if(n===null)return 0;else return[n]}function l(n){if(n)return n[0];else return undefined}function m(n){if(n)return n[0][1];else return undefined}g.is_nil_undef=h;g.null_undefined_to_opt=i;g.undefined_to_opt=j;g.null_to_opt=k;g.option_get=l;g.option_get_unwrap=m}),null);
__d("MessengerState.bs",["bs_list","bs_array","bs_block","bs_curry","Utils.bs","CurrentUser","ReasonReact.bs","bs_js_primitive"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p={};function q(y){__p&&__p();var z=p[y];if(z!==undefined)return z;else{var A=[[{}]],B=[0],C=function C(F){__p&&__p();A[0]=i.fold_left(function(A,G){var H=G[0][0];Object.keys(H).forEach(function(I){var J=H[I],K=l.$pipe$unknown(o.undefined_to_opt(A[0][I]),0);if(J>K){A[0][I]=J;return 0}else return 0});return[A[0]]},A[0],F);return h.iter(function(G){return k._1(G,A[0])},B[0])},D=function D(F){__p&&__p();B[0]=[F,B[0]];k._1(F,A[0]);return function(G){__p&&__p();var H=F,I=function I(B){if(B){var J=B[1],K=B[0];if(K===H)return J;else return[K,I(J)]}else return 0};B[0]=I(B[0]);return 0}},r=function r(){return A[0]},E=[C,D,r];p[y]=E;return E}}function r(){return q(m.getID())}function s(y,z){var A=[];if(!(z==null)){var B=z.delivery_receipts;if(!(B==null))A.push([[B]])}return k._1(y[0],A)}var t=n.reducerComponent("MessengerStateRoot");function u(y,z){__p&&__p();var A=t.slice();A[9]=function(B){return k._1(z,B[2])};A[10]=function(){return k._1(q(y)[2],0)};A[12]=function(B,C){return j.__(0,[B])};A[13]=function(B){var C=B[4];return[[function(){return k._1(q(y)[1],C)},function(D){return k._1(D,0)}],0]};return A}function v(y){return k._1(y[2],0)}var w=[v],x=[u];g.getForFBID=q;g.get=r;g.updateJS=s;g.Root=x;g.Test=w}),null);
__d("MercuryDispatcher",["ArbiterMixin","MessengerState.bs","LogHistory","MercuryActionType","MercuryPayloadSource","MercurySingletonProvider","MercuryThreadInformer","invariant","isEmpty","mixin"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r,s,t=j.getInstance("mercury_dispatcher");r=babelHelpers.inherits(u,q(h));s=r&&r.prototype;u.getForFBID=function(w){return v.getForFBID(w)};u.get=function(){return v.get()};function u(w){s.constructor.call(this);this.$MercuryDispatcher1=w;this.$MercuryDispatcher2=i.getForFBID(w)}u.prototype.handleUpdate=function(w){__p&&__p();this.$MercuryDispatcher3(w);!!w.from_client!==!!w.preprocessed||o(0);delete w.preprocessed;if(!p(w))n.getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){__p&&__p();if(w.payload_source===l.SERVER_INVALIDATE_GLOBAL_STATE)this.inform("invalidate-global-state",{});if(w.payload_source===l.SERVER_INVALIDATE_THREAD_STATE){var x=w.threads&&w.threads.length>0&&w.threads[0]&&w.threads[0].thread_id;if(x)this.inform("invalidate-thread-state",x)}this.inform("update-thread-ids",w.newlyAddedClientIDs);this.inform("update-participants",w);this.inform("update-threads",w);this.inform("update-unread",w);this.inform("update-threadlist",w);this.inform("update-messages",w);this.inform("update-unseen",w);this.inform("update-typing-state",w);this.inform("update-delivery",w);this.inform("update-roger",w.roger);this.inform("update-blocked-users",w);this.inform("update-ignored-users",w);this.inform("model-update-completed",null);this.inform("update-work-group-threads",w);i.updateJS(this.$MercuryDispatcher2,w)}.bind(this))};u.prototype.$MercuryDispatcher3=function(w){__p&&__p();var x=w.payload_source;if(x===l.CLIENT_CHANGE_READ_STATUS||x===l.CLIENT_MARK_THREAD_SEEN)return;var y={from_client:w.from_client,messages:null};if(w.actions){var z=w.actions.filter(function(A){return A.action_type===k.USER_GENERATED_MESSAGE||A.action_type===k.LOG_MESSAGE}).map(function(A){return{action_type:A.action_type,other_user_fbid:A.other_user_fbid,thread_fbid:A.thread_fbid,message_id:A.message_id}});if(z.length)y.messages=z}t.debug("update:"+x,JSON.stringify(y))};var v=new m(u);f.exports=u}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={renderFilteredContent:function j(k){if(k.is_filtered_content_bh)return h._("This message was removed because it contains blocked or harmful links.");if(k.is_filtered_content_account)return h._("This message has been temporarily removed because the sender's account requires verification.");if(k.is_filtered_content_quasar)return h._("This message was removed because it contains blocked or harmful content.");if(k.is_filtered_content_invalid_app)return h._("This message was removed because the app that it's being sent from is blocked from sending messages.");return h._("This message has been temporarily removed because the sender's account requires verification, or it has been identified as abusive.")}};f.exports=i}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";var i={renderText:function j(k,l){return k?h._("You sent a Valentine."):h._("{name} sent a Valentine.",[h.param("name",l)])}};f.exports=i}),null);
__d("MercuryGlobalActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={generateMessageID:function l(m){var n=m||Date.now(),o=i(0,4294967295),p=h.getSessionID();return"<"+n+":"+o+"-"+p+"@mail.projektitan.com>"},generateThreadID:function l(m){return"root:"+j.generateOfflineThreadingID(m)},generateOfflineThreadingID:function l(m){var n=m||Date.now(),o=i(0,4294967295),p=("0000000000000000000000"+o.toString(2)).slice(-22),q=n.toString(2)+p;return k(q.slice(-63))}};function k(l){__p&&__p();var m="";while(l!="0"){var n=0,o="";for(var p=0;p<l.length;p++){n=2*n+parseInt(l[p],10);if(n>=10){o+="1";n-=10}else o+="0"}m=n.toString()+m;l=o.slice(o.indexOf("1"))}return m}f.exports=j}),null);
__d("MercuryLogMessageType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d("ImageSourceType",[],(function a(b,c,d,e,f,g){var h=Object.freeze({PROFILE_PICTURE:"profile_picture",IMAGE:"image"});f.exports=h}),null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","PhotoResizeModeConst","MercuryServerDispatcher"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function m(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null}m.prototype.setFBID=function(q){"use strict";this._request.fbid=q;return this};m.prototype.setType=function(q){"use strict";if(![i.PROFILE_PICTURE,i.IMAGE].includes(q))throw new TypeError("ImageSourceRequest.setType: invalid type "+q);this._request.type=q;return this};m.prototype.setDimensions=function(q,r){"use strict";this._request.width=q;this._request.height=r;return this};m.prototype.setResizeMode=function(q){"use strict";if(![k.COVER,k.CONTAIN].includes(q))throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode "+q);this._request.resize_mode=q;return this};m.prototype.setCallback=function(q){"use strict";this._callback=q;return this};m.prototype.send=function(){"use strict";__p&&__p();if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error("ImageSourceRequest: You must set all the fields");var q=o(),r=p(this._request);q.executeOrEnqueue(r,this._callback);if(q.getUnavailableResourcesFromRequest(r).length===1){l.trySend("/ajax/image_source.php",{requests:[this._request]});return true}return false};var n=null;function o(){__p&&__p();if(n)return n;var q=new j();n=q;l.registerEndpoints({"/ajax/image_source.php":{request_user_id:h.getID(),mode:l.BATCH_DEFERRED_MULTI,batch_function:function r(s,t){var u;(u=s.requests).push.apply(u,t.requests);return s},handler:function r(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)q.setResource(p(u[v]),s[v])}}});return q}function p(q){return[q.fbid,q.type,q.width,q.height,q.resize_mode].join("|")}f.exports=m}),null);
__d("MercuryActionStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],(function a(b,c,d,e,f,g,h,i){var j=i.create({retry:true}),k=h.isEnabled("mercury_send_error_logging"),l={log:function m(n){if(!k)return;var o={message_id:n.message_id,timestamp_client:Date.now(),error_type:n.error_data.type,error_code:n.error_data.code,error_description:n.error_data.description,is_transient:n.error_data.is_transient};j.log("MercurySendErrorLoggerConfig",o)}};f.exports=l}),null);
__d("MercuryServerPayloadPreprocessor",["MessengerEnvironment","MercuryIDs","MercuryActionStatus","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","invariant","URI"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();function s(u){this.$MercuryServerPayloadPreprocessor1=u;this.$MercuryServerPayloadPreprocessor2=p.getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=m.getForFBID(this.$MercuryServerPayloadPreprocessor1)}s.getForFBID=function(u){return t.getForFBID(u)};s.get=function(){return t.get()};s.prototype.handleUpdate=function(u){__p&&__p();var v={};!u.from_client||q(0);(u.threads||[]).forEach(function(H){this.$MercuryServerPayloadPreprocessor4(H,v);var I=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(H.thread_id);e(["MercuryServerRequests"],function(J){var K=J.getForFBID(this.$MercuryServerPayloadPreprocessor1);K.markThreadFetched(H.thread_id);if(I)K.markThreadFetched(I);K.updateLastActionTimestamp(H.timestamp)}.bind(this))}.bind(this));(u.work_top_named_threads||[]).forEach(function(H){this.$MercuryServerPayloadPreprocessor4(H,v);var I=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(H.thread_id);e(["MercuryServerRequests"],function(J){var K=J.getForFBID(this.$MercuryServerPayloadPreprocessor1);K.markThreadFetched(H.thread_id);if(I)K.markThreadFetched(I);K.updateLastActionTimestamp(H.timestamp)}.bind(this))}.bind(this));(u.ordered_threadlists||[]).forEach(function(H){var I=H.thread_fbids||[];I=I.concat(H.other_user_fbids||[]);H.thread_ids=I.map(function(J){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(J.toString())}.bind(this))}.bind(this));if(u.delivery_receipts){var w={};for(var x=u.delivery_receipts,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}var B=A,C=B.other_user_fbid?i.getThreadIDFromUserID(B.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(B.thread_fbid);if(C)w[C]=B.time}u.delivery_receipts=w}u.actions=u.actions||[];u.actions.forEach(function(H){__p&&__p();if(H.action_type===k.SEND_MESSAGE&&H.status===j.ERROR)n.log(H);var I=null,J=null;if(H.other_user_fbid){J=i.getThreadIDFromUserID(H.other_user_fbid);I=H.other_user_fbid}else if(H.thread_fbid){J=i.getThreadIDFromThreadFBID(H.thread_fbid);I=H.thread_fbid}else if(H.thread_id){J=i.getThreadIDFromThreadFBID(H.thread_id);I=H.thread_id}else if(H.status&&H.status!=j.SUCCESS&&H.client_thread_id)J=H.client_thread_id;else q(0);I=I&&I.toString();H.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(I)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(I):J;if(H.action_type==k.SEND_MESSAGE&&H.client_thread_id&&I){H.thread_id=H.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(I,H.client_thread_id);v[I]=H.client_thread_id}H.thread_id||q(0);if(!u.payload_source||!u.payload_source.startsWith("server"))e(["MercuryServerRequests"],function(K){K.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(H.timestamp)}.bind(this))}.bind(this));this.$MercuryServerPayloadPreprocessor5(u);this.$MercuryServerPayloadPreprocessor6(u);if(u.end_of_history){var D=[];for(var E=0;E<u.end_of_history.length;E++){var F=u.end_of_history[E];if(F.type=="user")D.push("user:"+F.fbid);else if(F.type=="thread"&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(F.fbid))D.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(F.fbid))}u.end_of_history=D}if(u.roger){var G={};Object.keys(u.roger).forEach(function(H){__p&&__p();var I=Object.keys(u.roger[H]),J=void 0;if(H)J=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(H);else if(I.length===1)J=i.getThreadIDFromUserID(I[0]);if(J){var K=u.roger[H];G[J]={};for(var L in K)if(Object.prototype.hasOwnProperty.call(K,L)){var M=i.getParticipantIDFromUserID(L);G[J][M]=K[L]}}}.bind(this));u.roger=G}u.newlyAddedClientIDs=v;u.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(u)};s.prototype.$MercuryServerPayloadPreprocessor4=function(u,v){__p&&__p();var w=u.other_user_fbid?u.other_user_fbid:u.thread_fbid;w||q(0);var x=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(w);if(!x){x=u.other_user_fbid?i.getThreadIDFromUserID(u.other_user_fbid):i.getThreadIDFromThreadFBID(u.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(w,x);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(u.thread_id,x);v[w]=x}u.thread_id=x};s.prototype.$MercuryServerPayloadPreprocessor5=function(u){__p&&__p();u.actions.forEach(function(v){if(v.action_type===k.USER_GENERATED_MESSAGE){v.attachments=v.attachments||[];v.attachments.forEach(function(w){if(l.isShareAttachment(w)&&h.messengerui){var x=new r(w.share.uri);if(!x.getDomain())w.share.uri=x.setDomain("facebook.com").setSubdomain(r.getRequestURI().getSubdomain()).setProtocol("https").toString()}})}})};s.prototype.$MercuryServerPayloadPreprocessor6=function(u){__p&&__p();u.actions.forEach(function(v){__p&&__p();if(v.action_type!==k.USER_GENERATED_MESSAGE)return;var w=v;if(!w.has_attachment||!w.attachments)return;for(var x=w.attachments.length-1;x>=0;x-=1){var y=w.attachments[x];if(!y.share||!y.share.style_list||y.share.style_list[0]!="genie_message")continue;if(y.share.target.genie_id)w.author=i.getParticipantIDFromUserID(y.share.target.genie_id);if(y.share.target&&!y.share.target.attachment){w.attachments.splice(x,1);w.has_attachment=w.attachments.length>0}}})};var t=new o(s);f.exports=s}),null);
__d("MercuryErrorType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d("MercuryMessageClientState",[],(function a(b,c,d,e,f,g){var h=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});f.exports=h}),null);
__d("MercuryMessageIDs.bs",["bs_curry","KeyedCallbackManager"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=new i();function k(m,n){var o=m.filter(function(q){return+(q.indexOf("id")===-1)}),p=function p(q){return h._1(n,m.map(function(r){var s=q[r];if(s!==undefined)return s;else return r}))};return j.executeOrEnqueue(o,p)}function l(m,n){j.setResource(m,n);return 0}g.getServerIDs=k;g.addServerID=l}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function a(b,c,d,e,f,g){function h(i,j,k,l,m,n){"use strict";this.success_handler=i;this.error_handler=j;this.transport_error_handler=k;this.timeout_handler=l;this.timeout=m;this.connection_retries=n}f.exports=h}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function a(b,c,d,e,f,g,h,i){var j=9999,k={create:function l(m){var n=new h(this.endpoint_uri).setData({message_batch:[m],client:this.client}),o=new i(n,{});Object.assign(o,{error:j,silentError:false,transientError:true,request:n});return o}};f.exports=k}),null);
__d("LeadGenInfoFieldTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",MESSENGER:"MESSENGER",STORE_LOOKUP:"STORE_LOOKUP",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF"})}),null);
__d("MNCommerceBubbleType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15})}),null);
__d("P2PPaymentRequestStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19})}),null);
__d("PaymentModulesClient",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock"})}),null);
__d("ServicesCalendarSyncType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"})}),null);
__d("bs_js_null_undefined",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l){if(k==null)return k;else return l(k)}function i(k,l){if(k==null)return 0;else return l(k)}function j(k){if(k)return k[0];else return undefined}g.bind=h;g.iter=i;g.from_opt=j}),null);
__d("bs_char",["bs_caml_string","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(o){if(o<0||o>255)throw[i.invalid_argument,"Char.chr"];else return o}function k(o){__p&&__p();var p=0;if(o>=40)if(o!==92)p=o>=127?1:2;else return"\\\\";else if(o>=32)if(o>=39)return"\\'";else p=2;else if(o>=14)p=1;else switch(o){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:p=1;break;case 13:return"\\r"}switch(p){case 1:var q=new Array(4);q[0]=92;q[1]=48+(o/100|0)|0;q[2]=48+(o/10|0)%10|0;q[3]=48+o%10|0;return h.bytes_to_string(q);case 2:var r=new Array(1);r[0]=o;return h.bytes_to_string(r)}}function l(o){if(o>=65&&o<=90||o>=192&&o<=214||o>=216&&o<=222)return o+32|0;else return o}function m(o){if(o>=97&&o<=122||o>=224&&o<=246||o>=248&&o<=254)return o-32|0;else return o}function n(o,p){return o-p|0}g.chr=j;g.escaped=k;g.lowercase=l;g.uppercase=m;g.compare=n}),null);
__d("bs_bytes",["bs_char","bs_list","bs_curry","bs_caml_obj","bs_caml_int32","bs_pervasives","bs_caml_string","bs_caml_builtin_exceptions"],(function aa(ba,ca,da,ea,fa,a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(Q,R){var S=h.caml_create_string(Q);h.caml_fill_string(S,0,Q,R);return S}function k(Q,R){var S=h.caml_create_string(Q);for(var T=0,U=Q-1|0;T<=U;++T)S[T]=d._1(R,T);return S}var l=[];function m(Q){var R=Q.length,S=h.caml_create_string(R);h.caml_blit_bytes(Q,0,S,0,R);return S}function n(Q){return h.bytes_to_string(m(Q))}function o(Q){return m(h.bytes_of_string(Q))}function p(Q,R,S){if(R<0||S<0||R>(Q.length-S|0))throw[i.invalid_argument,"String.sub / Bytes.sub"];else{var T=h.caml_create_string(S);h.caml_blit_bytes(Q,R,T,0,S);return T}}function q(Q,R,S){return h.bytes_to_string(p(Q,R,S))}function r(Q,R,S){var T=(Q.length+R|0)+S|0,U=h.caml_create_string(T),V=R<0?[-R|0,0]:[0,R],W=V[1],X=V[0],Y=g.min(Q.length-X|0,T-W|0);if(Y>0)h.caml_blit_bytes(Q,X,U,W,Y);return U}function s(Q,R,S,T){if(R<0||S<0||R>(Q.length-S|0))throw[i.invalid_argument,"String.fill / Bytes.fill"];else return h.caml_fill_string(Q,R,S,T)}function t(Q,R,S,T,U){if(U<0||R<0||R>(Q.length-U|0)||T<0||T>(S.length-U|0))throw[i.invalid_argument,"Bytes.blit"];else return h.caml_blit_bytes(Q,R,S,T,U)}function u(Q,R,S,T,U){if(U<0||R<0||R>(Q.length-U|0)||T<0||T>(S.length-U|0))throw[i.invalid_argument,"String.blit / Bytes.blit_string"];else return h.caml_blit_string(Q,R,S,T,U)}function v(Q,R){for(var S=0,T=R.length-1|0;S<=T;++S)d._1(Q,R[S]);return 0}function w(Q,R){for(var S=0,T=R.length-1|0;S<=T;++S)d._2(Q,S,R[S]);return 0}function x(Q,R){__p&&__p();if(R){var S=R[0],T=[0],U=[0];c.iter(function(X){T[0]=T[0]+1|0;U[0]=U[0]+X.length|0;return 0},R);var V=h.caml_create_string(U[0]+f.imul(Q.length,T[0]-1|0)|0);h.caml_blit_bytes(S,0,V,0,S.length);var W=[S.length];c.iter(function(X){h.caml_blit_bytes(Q,0,V,W[0],Q.length);W[0]=W[0]+Q.length|0;h.caml_blit_bytes(X,0,V,W[0],X.length);W[0]=W[0]+X.length|0;return 0},R[1]);return V}else return l}function y(Q,R){return Q.concat(R)}function z(Q){var R=Q-9|0;if(R>4||R<0)if(R!==23)return 0;else return 1;else if(R!==2)return 1;else return 0}function A(Q){var R=Q.length,S=0;while(S<R&&z(Q[S]))S=S+1|0;var T=R-1|0;while(T>=S&&z(Q[T]))T=T-1|0;if(T>=S)return p(Q,S,(T-S|0)+1|0);else return l}function B(Q){__p&&__p();var R=0;for(var S=0,T=Q.length-1|0;S<=T;++S){var U=Q[S],V;if(U>=32){var W=U-34|0;V=W>58||W<0?W>=93?4:1:W>57||W<1?2:1}else V=U>=11?U!==13?4:2:U>=8?2:4;R=R+V|0}if(R===Q.length)return m(Q);else{var X=h.caml_create_string(R);R=0;for(var Y=0,la=Q.length-1|0;Y<=la;++Y){var Z=Q[Y],$=0;if(Z>=35)if(Z!==92)if(Z>=127)$=1;else X[R]=Z;else $=2;else if(Z>=32)if(Z>=34)$=2;else X[R]=Z;else if(Z>=14)$=1;else switch(Z){case 8:X[R]=92;R=R+1|0;X[R]=98;break;case 9:X[R]=92;R=R+1|0;X[R]=116;break;case 10:X[R]=92;R=R+1|0;X[R]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:$=1;break;case 13:X[R]=92;R=R+1|0;X[R]=114;break}switch($){case 1:X[R]=92;R=R+1|0;X[R]=48+(Z/100|0)|0;R=R+1|0;X[R]=48+(Z/10|0)%10|0;R=R+1|0;X[R]=48+Z%10|0;break;case 2:X[R]=92;R=R+1|0;X[R]=Z;break}R=R+1|0}return X}}function C(Q,R){var S=R.length;if(S){var T=h.caml_create_string(S);for(var U=0,V=S-1|0;U<=V;++U)T[U]=d._1(Q,R[U]);return T}else return R}function D(Q,R){var S=R.length;if(S){var T=h.caml_create_string(S);for(var U=0,V=S-1|0;U<=V;++U)T[U]=d._2(Q,U,R[U]);return T}else return R}function E(Q){return C(b.uppercase,Q)}function F(Q){return C(b.lowercase,Q)}function G(Q,R){if(R.length){var S=m(R);S[0]=d._1(Q,R[0]);return S}else return R}function H(Q){return G(b.uppercase,Q)}function I(Q){return G(b.lowercase,Q)}function J(Q,R,S,T){__p&&__p();while(true){var U=S;if(U>=R)throw i.not_found;else if(Q[U]===T)return U;else{S=U+1|0;continue}}}function K(Q,R){return J(Q,Q.length,0,R)}function L(Q,R,S){var T=Q.length;if(R<0||R>T)throw[i.invalid_argument,"String.index_from / Bytes.index_from"];else return J(Q,T,R,S)}function M(Q,R,S){__p&&__p();while(true){var T=R;if(T<0)throw i.not_found;else if(Q[T]===S)return T;else{R=T-1|0;continue}}}function N(Q,R){return M(Q,Q.length-1|0,R)}function O(Q,R,S){if(R<-1||R>=Q.length)throw[i.invalid_argument,"String.rindex_from / Bytes.rindex_from"];else return M(Q,R,S)}function P(Q,R,S){var T=Q.length;if(R<0||R>T)throw[i.invalid_argument,"String.contains_from / Bytes.contains_from"];else try{J(Q,T,R,S);return 1}catch(U){if(U===i.not_found)return 0;else throw U}}function ga(Q,R){return P(Q,0,R)}function ha(Q,R,S){if(R<0||R>=Q.length)throw[i.invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];else try{M(Q,R,S);return 1}catch(T){if(T===i.not_found)return 0;else throw T}}var ia=e.caml_compare,ja=h.bytes_to_string,ka=h.bytes_of_string;a.make=j;a.init=k;a.empty=l;a.copy=m;a.of_string=o;a.to_string=n;a.sub=p;a.sub_string=q;a.extend=r;a.fill=s;a.blit=t;a.blit_string=u;a.concat=x;a.cat=y;a.iter=v;a.iteri=w;a.map=C;a.mapi=D;a.trim=A;a.escaped=B;a.index=K;a.rindex=N;a.index_from=L;a.rindex_from=O;a.contains=ga;a.contains_from=P;a.rcontains_from=ha;a.uppercase=E;a.lowercase=F;a.capitalize=H;a.uncapitalize=I;a.compare=ia;a.unsafe_to_string=ja;a.unsafe_of_string=ka}),null);
__d("bs_string",["bs_list","bs_bytes","bs_caml_int32","bs_caml_string"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(L,M){return k.bytes_to_string(i.make(L,M))}function m(L,M){return k.bytes_to_string(i.init(L,M))}function n(L){return k.bytes_to_string(i.copy(k.bytes_of_string(L)))}function o(L,M,N){return k.bytes_to_string(i.sub(k.bytes_of_string(L),M,N))}function p(L,M){__p&&__p();if(M){var N=M[0],O=[0],P=[0];h.iter(function(S){O[0]=O[0]+1|0;P[0]=P[0]+S.length|0;return 0},M);var Q=k.caml_create_string(P[0]+j.imul(L.length,O[0]-1|0)|0);k.caml_blit_string(N,0,Q,0,N.length);var R=[N.length];h.iter(function(S){k.caml_blit_string(L,0,Q,R[0],L.length);R[0]=R[0]+L.length|0;k.caml_blit_string(S,0,Q,R[0],S.length);R[0]=R[0]+S.length|0;return 0},M[1]);return k.bytes_to_string(Q)}else return""}function q(L,M){return i.iter(L,k.bytes_of_string(M))}function r(L,M){return i.iteri(L,k.bytes_of_string(M))}function s(L,M){return k.bytes_to_string(i.map(L,k.bytes_of_string(M)))}function t(L,M){return k.bytes_to_string(i.mapi(L,k.bytes_of_string(M)))}function u(L){var M=L-9|0;if(M>4||M<0)if(M!==23)return 0;else return 1;else if(M!==2)return 1;else return 0}function v(L){if(L===""||!(u(L.charCodeAt(0))||u(L.charCodeAt(L.length-1|0))))return L;else return k.bytes_to_string(i.trim(k.bytes_of_string(L)))}function w(L){__p&&__p();var M=function M(N){__p&&__p();while(true){var O=N;if(O>=L.length)return 0;else{var P=L.charCodeAt(O);if(P>=32){var Q=P-34|0;if(Q>58||Q<0)if(Q>=93)return 1;else{N=O+1|0;continue}else if(Q>57||Q<1)return 1;else{N=O+1|0;continue}}else return 1}}};if(M(0))return k.bytes_to_string(i.escaped(k.bytes_of_string(L)));else return L}function x(L,M){return i.index(k.bytes_of_string(L),M)}function y(L,M){return i.rindex(k.bytes_of_string(L),M)}function z(L,M,N){return i.index_from(k.bytes_of_string(L),M,N)}function A(L,M,N){return i.rindex_from(k.bytes_of_string(L),M,N)}function B(L,M){return i.contains(k.bytes_of_string(L),M)}function C(L,M,N){return i.contains_from(k.bytes_of_string(L),M,N)}function D(L,M,N){return i.rcontains_from(k.bytes_of_string(L),M,N)}function E(L){return k.bytes_to_string(i.uppercase(k.bytes_of_string(L)))}function F(L){return k.bytes_to_string(i.lowercase(k.bytes_of_string(L)))}function G(L){return k.bytes_to_string(i.capitalize(k.bytes_of_string(L)))}function H(L){return k.bytes_to_string(i.uncapitalize(k.bytes_of_string(L)))}var I=k.caml_string_compare,J=i.fill,K=i.blit_string;g.make=l;g.init=m;g.copy=n;g.sub=o;g.fill=J;g.blit=K;g.concat=p;g.iter=q;g.iteri=r;g.map=s;g.mapi=t;g.trim=v;g.escaped=w;g.index=x;g.rindex=y;g.index_from=z;g.rindex_from=A;g.contains=B;g.contains_from=C;g.rcontains_from=D;g.uppercase=E;g.lowercase=F;g.capitalize=G;g.uncapitalize=H;g.compare=I}),null);
__d("MessengerStoryAttachmentTransformer.bs",["URI","bs_array","Utils.bs","bs_string","fbt","bs_caml_array","bs_js_boolean","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function aa(ba,ca,da,ea,fa,a,ga,b,c,ha,d,e,f,ia,ja,g,ka,h,la,ma,na,oa,pa,qa,ra,i){"use strict";__p&&__p();function j(E){return b.map(function(F){var G=F.user_confirmation,H=G==null?[null,null,null,null,false]:[G.cancel_button_label,G.continue_button_label,G.confirmation_message,G.confirmation_title,true],I=F.payment_metadata;return{action_link:F.action_link,action_type:h.from_opt(g.undefined_to_opt(i[F.action_open_type])),action_objects:F.action_objects,title:F.title,confirmation_cancel_label:H[0],confirmation_continue_label:H[1],confirmation_message:H[2],confirmation_title:H[3],id:F.id,is_disabled:F.is_disabled,is_mutable_by_server:F.is_mutable_by_server,payment_metadata:I==null?{payment_module_config:null,total_price:null}:{payment_module_config:I.payment_module_config,total_price:I.total_price},render_style:F.render_style,webview_metadata:{fallback_url:F.webview_metadata.fallback_url,messenger_extensions:F.webview_metadata.messenger_extensions,webview_height_ratio:F.webview_metadata.webview_height_ratio,webview_share_button:F.webview_metadata.webview_share_button},should_show_user_confirmation:H[4],page_id:F.page_id}},E)}function k(E){return b.map(function(F){var G=F.url,H=G==null?null:new ga(G).getUnqualifiedURI().toString();return{title:F.title,uri:H}},E)}function sa(E){if(!(E==null)&&E!=="")return"#"+ha.sub(E,2,E.length-2|0);else return null}function ta(E){if(E==null)return null;else return{url:E.uri,src:E.uri,width:E.width,height:E.height}}function l(E,F){var G=F.cover_photo,H;if(G==null)H=[null,null,null];else{var I=G.photo.image,J=I==null?[null,null]:[I.uri,{height:I.height,width:I.width}];H=[G.photo.id,J[0],J[1]]}var K=F.location,L=K==null?[null,null]:[K.latitude,K.longitude],M=F.overall_star_rating;return{address:F.address.single_line_full_address,category:F.top_category_name,coverPhotoID:H[0],coverPhotoURL:H[1],coverPhotoDimensions:H[2],latitude:L[0],longitude:L[1],name:F.name,rating:M==null?null:M.value,pageID:F.id,priceRange:F.price_range_description,viewerID:E}}function m(E){var F=E.group_commerce_item_seller,G=E.primary_photo,H;if(G==null)H=null;else{var I=G.image;H=I==null?null:I.uri}return{caption:E.group_commerce_item_description.text,desc:E.group_commerce_item_description.text,owner_id:F==null?null:F.id,price:E.formatted_price.text,text:E.group_commerce_item_description.text,title:E.group_commerce_item_title,thumb_url:H,url:E.url}}function n(E){return{app_name:E.application_name,artists:E.artist_names,audio_url:E.audio_url,duration_ms:E.duration_ms,title:E.music_title}}function o(E){var F=E.payment;return{id:E.id,desc:E.desc,display_total_cost:E.total_cost,merchant_name:E.merchant_name,target_url:E.target_url,thumb_url:E.thumb_url,raw_amount:E.raw_amount,payment_id:F==null?null:F.id,total_cost:{amount:ia.caml_float_of_string(E.price_amount),currency:E.price_currency},name:E.name}}function p(E){return{fundraiserID:E.fundraiserID,canDonate:E.canDonate,hasViewerDonated:E.hasViewerDonated,fundraiserDetailedProgressText:E.fundraiserDetailedProgressText,fundraiserSubtitleText:E.fundraiserSubtitleText,focusedCoverPhoto:E.focusedCoverPhoto}}function q(E){return{id:E.id,name:E.name,desc:E.desc,thumb_url:E.thumb_url,item_url:E.item_url,title:E.name,text:E.desc,source:E.source,image_aspect_ratio:E.image_aspect_ratio,metalines:{metaline_1:E.first_metaline,metaline_2:E.second_metaline,metaline_3:E.third_metaline},default_action:E.default_action,call_to_actions:j(E.call_to_actions)}}function r(E){__p&&__p();var F=function F($){var H=$.page_call_to_action;if(H==null)return undefined;else return H.id},G=function G($){var H=$.page_call_to_action;if(H==null)return false;else{var I=H.component_flow_service_config;if(I==null)return false;else return true}},H=E.page,I=H==null?[undefined,undefined,undefined,false]:[H.id,h.from_opt(g.undefined_to_opt(ra[H.calendar_sync_type])),F(H),G(H)],J=E.native_component_flow_request,K;if(J==null)K=null;else{var L=J.page,M=J.page,N=J.page,O;if(N==null)O=undefined;else{var P=N.profile_picture;O=P==null?undefined:P.uri}var Q=J.suggested_time_range,R=J.product_item,S=J.product_item,T=J.product_item,U=J.product_item,V;if(U==null)V=undefined;else{var W=U.profile_picture;V=W==null?undefined:W.uri}var X=J.user,xa=J.user,ya=J.job_application,za=J.user,Y;if(za==null)Y=undefined;else{var Aa=za.profile_picture;Y=Aa==null?undefined:Aa.uri}K={additionalInfo:J.additional_info,availability:J.availability,hasSavedToCalendar:J.has_saved_to_calendar,requestFlowType:J.request_flow_type,generalInfo:J.service_general_info,id:J.id,pageID:L==null?undefined:L.id,pageName:M==null?undefined:M.name,pageProfilePic:O,preferredTimeRange:Q==null?null:{end:Q.end,start:Q.start},price:R==null?null:R.experimental_freeform_price,duration:S==null?null:S.duration_in_seconds,requestAdminApprovalType:J.request_admin_approval_type,requestedTime:J.requested_time,serviceName:T==null?null:T.name,serviceProfilePic:V,specialRequest:J.special_request,status:J.booking_status_value,statusLabel:J.status,userID:X==null?undefined:X.id,username:xa==null?undefined:xa.short_name,jobApplicationID:ya==null?undefined:ya.id,userProfilePic:Y}}var Ba=E.message_bubble_type,Z;switch(Ba){case"CANCELLED":Z=["Cancelled",d._("Cancelled")];break;case"DECLINED":Z=["Declined",d._("Declined")];break;case"REQUESTED":Z=["Requested",d._("Requested")];break;case"SCHEDULEED":Z=["Scheduled",d._("Scheduled")];break;default:throw[pa.invalid_argument,"Erroneous target status"]}return{id:E.id,pageID:I[0],calendarSyncType:I[1],ctaID:I[2],hasServiceConfig:I[3],userID:E.user.id,status:Z[0],statusLabel:Z[1],viewerID:ja.getAccountID(),requestMetadata:K}}function s(E){return{live_location_id:E.live_location_id,is_expired:f.to_js_boolean(E.is_expired),expiration_time:E.expiration_time,sender:E.sender,coordinate:E.coordinate,location_title:E.location_title,sender_destination:E.sender_destination,stop_reason:E.stop_reason}}function t(E){var F=E.first_metaline;return{desc:E.description,id:E.id,image_aspect_ratio:E.image_aspect_ratio,item_url:E.target_url,metalines:F==null?{}:{metaline_1:F},name:E.name,source:E.source_name,text:E.description,thumb_url:E.image_url,title:E.name,default_action:E.default_action,call_to_actions:j(E.call_to_actions),media_blob_attachments:E.media_blob_attachments}}function u(E){var F=b.map(t,E.business_items.nodes),G=j(E.call_to_actions);return{message:E.message,call_to_actions:G,items:F}}function v(E){return{message:E.message,call_to_actions:j(E.call_to_actions),items:b.map(t,E.promotion_items.nodes)}}function w(E){var F=E.structured_address.streets,G=E.partner_logo;return{account_holder_name:E.account_holder_name,adjustments:b.map(function(H){return{adjustment_type:H.adjustment_type,display_adjustment_amount:H.adjustment_amount}},E.adjustments),cancellation_url:E.cancellation_url,items:b.map(t,E.items.nodes),merchant_name:E.merchant_name,messenger_commerce_bubble_type:h.from_opt(g.undefined_to_opt(ma[E.messenger_commerce_bubble_type])),order_id:E.order_id,order_time:E.order_time,order_url:E.order_url,payment_method:E.payment_method,receipt_id:E.receipt_id,recipient_name:E.recipient_name,shipping_cost:E.shipping_cost,shipping_method:E.shipping_method,status:E.status,structured_address:{city:E.structured_address.city,state:E.structured_address.state,country:E.structured_address.country,postal_code:E.structured_address.postal_code,street_1:e.caml_array_get(F,0),street_2:e.caml_array_get(F,1)},subtotal:E.subtotal,total_cost:E.total_cost,total_tax:E.total_tax,partner_logo:G==null?undefined:G.uri}}function x(E,F){return{payment_modules_client:h.from_opt(g.undefined_to_opt(na[F.payment_modules_client])),is_viewer_seller:F.is_viewer_seller,payment_snippet:F.payment_snippet,item_list:b.map(function(G){return{item_id:G.item_id,name:G.name,subtitle:G.subtitle,description:G.description,unit_price:G.unit_price,image_urls:b.map(function(H){return H.uri},G.images),quantity:G.quantity}},F.item_list),components:F.components,payment_call_to_actions:F.payment_call_to_actions,click_action:F.click_action,actor_id:E,invoicer_id:F.invoicer_id}}var y=function y(E){__p&&__p();var F=ca("LeadGenInfoFieldTypes"),G={},H=[];for(var I=E.field_data_list,J=Array.isArray(I),K=0,I=J?I:I[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var L;if(J){if(K>=I.length)break;L=I[K++]}else{K=I.next();if(K.done)break;L=K.value}var M=L,N=M.field_type,O=M.label,P=M.values;if(N===F.CUSTOM||N===F.ZIP)H.push({label:O,values:P});else G[N]={label:O,values:P}}G.questions=H;return G};function z(E,F){var G=F.invite_recipient,H=G==null?null:G.id,I=F.invite_sender,J=I==null?null:I.id;return{quick_invite_id:F.id,recipient_id:H,sender_id:J,is_viewer_recipient:f.to_js_boolean(+(E===H))}}function A(E){var F=function F(I){if(I==null)return null;else return I.uri},G=E.listing_category,H=G==null?[null,null]:[G.offer_image,G.request_image];return{listingType:E.listing_type,mapURI:F(E.map_image),offerURI:F(H[0]),requestURI:F(H[1])}}function ua(E){return{sender:E.sender,receiver:E.receiver,transfer_id:E.transfer_id,bubbleView:E.bubble_view}}function B(E){__p&&__p();var F=E.receiver_profile,G;if(F==null)G=null;else{var H=F.profile_picture;G={id:F.id,name:F.short_name,full_name:F.name,picture:H==null?null:H.uri,profile_url:F.url}}var I=E.sender,J;if(I==null)J={};else{var K=I.profile_picture;J={id:I.id,name:I.name,full_name:I.full_name,picture:K==null?null:K.uri,profile_uri:I.url}}var L=E.transfer_context,M;if(L==null)M=[null,null,null];else{var N=L.transfer_theme;M=[L.memoText,b.map(function(Q){var F=Q.image;if(F==null)return null;else return F.uri},L.memo_images),N==null?null:N.id]}var O=E.platform_item,P=O==null?null:{name:O.name,description:O.description,image:b.map(function(Q){var F=Q.image;if(F==null)return null;else return F.uri},O.photos),refURL:O.url};return{sender:J,amountWithSymbol:E.transaction_amount.formatted_amount,status:h.from_opt(g.undefined_to_opt(la[E.transfer_status])),receiver:G,transfer_id:E.transfer_id,completedTime:E.completedTime,updatedTime:E.updatedTime,creationTime:E.creationTime,amount:E.transaction_amount.amount,memoText:M[0],memoPhotoURLs:M[1],themeID:M[2],discountAmount:E.amount_fb_discount.formatted,fundsAvailability:h.from_opt(g.undefined_to_opt(ka[E.funds_availability])),groupThreadFBID:E.group_thread_fbid,platform_item:P,statusDescription:{markup:E.status_description},bubbleView:E.bubble_view,currencyCode:E.currency_amount.currency}}function C(E){__p&&__p();var F=E.requester,G;if(F==null)G=undefined;else{var H=F.profile_picture;G={id:F.id,name:F.short_name,full_name:F.name,picture:H==null?null:H.uri,profile_url:F.url}}var I=E.requestee,J;if(I==null)J=undefined;else{var K=I.profile_picture;J={id:I.id,name:I.short_name,full_name:I.name,picture:K==null?null:K.uri,profile_url:I.url}}var L=h.from_opt(g.undefined_to_opt(qa[E.request_status])),M=E.transfer,N=M==null?[null,""]:[B(M),M.id],O=E.request_theme;return{amount:E.transaction_amount.amount,amountWithSymbol:E.amount.formatted,requestee:J,requester:G,currentStatus:L,currency:E.amount.currency,creationTime:E.creation_time,groupThreadFBID:E.group_thread_fbid,id:E.id,memoText:E.memo_text,themeID:O==null?null:O.id,transfer:N[0],transferID:N[1],updatedTime:E.updated_time,statusDescription:{markup:E.status_description}}}function va(E){var F=C({amount:E.amount,transaction_amount:E.transaction_amount,requester:E.requester,requestee:E.requestee,request_status:E.request_status,request_theme:E.request_theme,id:E.id,memo_text:E.memo_text,transfer:E.transfer,creation_time:E.creation_time,group_thread_fbid:E.group_thread_fbid,updated_time:E.updated_time,status_description:E.status_description}),G={individualRequests:b.map(C,E.individual_requests)};return Object.assign(F,G)}function D(E,F){__p&&__p();var G=F.media,H=G==null?null:G.animated_image,I=G==null?null:G.image,J={};b.iter(function(X){var K=X.value;J[X.key]=K==null?null:K.text;return 0},F.properties);var K=F.target,L;if(K==null)L=null;else switch(K.tag|0){case 0:L=A(K[0]);break;case 1:L=ua(K[0]);break;case 2:L=B(K[0]);break;case 3:L=va(K[0]);break;case 4:L=x(E,K[0]);break;case 7:L=v(K[0]);break;case 8:L=u(K[0]);break;case 10:L=y(K[0]);break;case 11:L=s(K[0]);break;case 12:L=z(E,K[0]);break;case 13:L=r(K[0]);break;case 14:var M=K[0],N=M.genie_sender,O=N==null?[null,null]:[N.messaging_actor.id,N.messaging_actor.name],P=O[0],Q=M.story_attachment,R=Q==null?null:wa(E,{legacy_attachment_id:P,story_attachment:{action_links:Q.action_links,messaging_attribution:Q.messaging_attribution,messenger_call_to_actions:Q.messenger_call_to_actions,deduplication_key:Q.deduplication_key,description:Q.description,media:Q.media,properties:Q.properties,source:Q.source,style_list:Q.style_list,title_with_entities:Q.title_with_entities,url:Q.url,subattachments:[],target:null}});L={genie_id:P,genie_name:O[1],attachment:R};break;case 16:L=n(K[0]);break;case 18:L=q(K[0]);break;case 19:L=o(K[0]);break;case 20:L=p(K[0]);break;case 21:L=w(K[0]);break;case 23:L=m(K[0]);break;case 24:L=l(E,K[0]);break;default:L=K[0]}var S=F.target,T=!(S==null)&&S.tag===7?0:null,U=F.description,V=F.source,W=F.title_with_entities;return{description:U==null?null:U.text,media:{animated_image:H==null?null:H.uri,animated_image_size:H==null?{height:null,width:null}:{height:H.height,width:H.width},image:I==null?null:I.uri,image_size:I==null?{height:null,width:null}:{height:I.height,width:I.width},duration:G==null?null:G.playable_duration,playable:G==null?null:G.is_playable,source:G==null?null:G.playable_url},source:V==null?null:V.text,style_list:F.style_list,title:W==null?null:W.text,action_links:k(F.action_links),messaging_attribution:F.messaging_attribution,messenger_ctas:b.map(function(X){return{id:X.id,page_id:c.$pipe$unknown(g.null_undefined_to_opt(X.page_id),""),action_title:X.title,action_url:X.action_link,action_open_type:h.from_opt(g.undefined_to_opt(i[X.action_open_type])),is_high_confidence:c.$pipe$unknown(g.null_undefined_to_opt(X.is_high_confidence),false),is_mutable_by_server:X.is_mutable_by_server,native_url:X.native_url,is_disabled:X.is_disabled,webview_metadata:{fallback_url:X.webview_metadata.fallback_url,messenger_extensions:X.webview_metadata.messenger_extensions,webview_height_ratio:X.webview_metadata.webview_height_ratio,webview_share_button:X.webview_metadata.webview_share_button}}},F.messenger_call_to_actions),properties:J,uri:F.url,deduplication_key:F.deduplication_key,target:L,label:T}}function wa(E,F){var G=F.story_attachment,H;if(G==null)H=null;else{var I={share_id:F.legacy_attachment_id,subattachments:b.map(function(K){return D(E,K)},G.subattachments)},J={description:G.description,media:G.media,source:G.source,style_list:G.style_list,title_with_entities:G.title_with_entities,properties:G.properties,url:G.url,deduplication_key:G.deduplication_key,action_links:G.action_links,messaging_attribution:G.messaging_attribution,messenger_call_to_actions:G.messenger_call_to_actions,target:G.target};H=Object.assign(I,D(E,J))}return{app_attribution:null,attach_type:oa.SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:H,thumbnail_url:null}}a._getCallToActions=j;a._getActionLinks=k;a._getColor=sa;a._getLogo=ta;a._getPageTarget=l;a._getGroupCommerceProductItemTarget=m;a._getExternalSongTarget=n;a._getAgentSuggestionItemTarget=o;a._getFundraiserTarget=p;a._getRetailItemTarget=q;a._getPagesPlatformBookingMessageTarget=r;a._getMessageLiveLocationTarget=s;a._getBusinessRetailItem=t;a._getMessengerBusinessMessageTarget=u;a._getMessengerRetailPromotionTarget=v;a._getMessengerRetailReceiptTarget=w;a._getPagesPlatformAttachmentTarget=x;a._getPagesPlatformLeadGenInfoTarget=y;a._getQuickInviteTarget=z;a._getCrisisListingTarget=A;a._getMoneyTransferTarget=ua;a._getP2PTransferTarget=B;a._getP2PTransferRequestTarget=C;a._getP2PTransferRequestWithIndividualRequests=va;a.transformStoryAttachment=D;a.getExtensibleAttachmentPayload=wa}),null);
__d("MessengerAttachmentTransformer.bs",["bs_array","fbt","bs_js_boolean","bs_pervasives","MercuryAttachmentType","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();function o(w){__p&&__p();if(w.is_malicious)return{app_attribution:null,icon_type:m.UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:l.ERROR,error_msg:i._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var x=w.attribution_app,y;if(x==null)y=null;else{var z=x.square_logo;y={id:x.id,icon_url:z==null?null:z.uri,metadata:w.attribution_metadata,name:x.name}}var A=w.url;return{app_attribution:y,icon_type:w.content_type,metadata:null,name:w.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:A==null?null:A,attach_type:l.FILE,error_msg:undefined,message_file_fbid:w.message_file_fbid,url_shimhash:w.url_shimhash,url_skipshim:w.url_skipshim}}}function p(w,x,y){var z=w.chat_image,A=z==null?[null,null,null]:[z.uri,z.width,z.height],B=A[0],C=w.chat_image,D=C==null?null:{width:C.width,height:C.height},E=w.large_image,F=E==null?[null,null]:[E.uri,{width:E.width,height:E.height}],G=w.inbox_image,H=G==null?[null,null]:[G.uri,{width:G.width,height:G.height}],I=w.attribution_app,J;if(I==null)J=null;else{var K=I.square_logo;J={id:I.id,icon_url:K==null?null:K.uri,metadata:w.attribution_metadata,name:I.name}}return{app_attribution:J,attach_type:l.VIDEO,name:w.filename,url:w.playable_url,rel:"async",preview_url:B,preview_width:A[1],preview_height:A[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:m.VIDEO,metadata:{fbid:w.legacy_attachment_id,render_as_sticker:j.to_js_boolean(+(w.video_type==="SPEAKING_STICKER")),dimensions:{width:w.original_dimensions.x,height:w.original_dimensions.y},duration:w.playable_duration_in_ms,large_size:F[1],large_preview:F[0],chat_size:D,chat_preview:B,inbox_size:H[1],inbox_preview:H[0],pageid:y?x:undefined},thumbnail_url:B,share:null}}function q(w){var x=w.attribution_app,y;if(x==null)y=null;else{var z=x.square_logo;y={id:x.id,icon_url:z==null?null:z.uri,metadata:w.attribution_metadata,name:x.name}}return{app_attribution:y,attach_type:l.FILE,name:w.filename,url:w.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:m.MUSIC,metadata:{duration:w.playable_duration_in_ms,isVoicemail:w.is_voicemail?"1":"0",type:w.audio_type==="VOICE_MESSAGE"?"fb_voice_message":w.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:w.url_shimhash,url_skipshim:w.url_skipshim}}function r(w,x,y){var z=w.preview_image,A=z==null?[null,null,null]:[z.uri,z.width,z.height],B=w.animated_image,C=B==null?null:B.uri,D=w.attribution_app,E;if(D==null)E=null;else{var F=D.square_logo;E={id:D.id,icon_url:F==null?null:F.uri,metadata:w.attribution_metadata,name:D.name}}return{app_attribution:E,attach_type:l.ANIMATED_IMAGE,name:w.filename,url:C,rel:"async",preview_url:A[0],preview_width:A[1],preview_height:A[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:m.PHOTO,metadata:{fbid:w.legacy_attachment_id,image:C,dimensions:k.string_of_int(w.original_dimensions.x)+(","+k.string_of_int(w.original_dimensions.y)),pageid:y?x:undefined},thumbnail_url:C,share:null}}function s(w){__p&&__p();var x=w.original_extension==="gif"?l.ANIMATED_IMAGE:w.render_as_sticker?l.THIRDPARTYSTICKER:l.PHOTO,y=w.preview,z=y==null?[null,null,null]:[y.uri,y.width,y.height],A;if(x===l.PHOTO){var B=w.large_preview;A=B==null?[null,null,null]:[B.uri,B.width,B.height]}else A=[null,null,null];var C=w.attribution_app,D;if(C==null)D=null;else{var E=C.square_logo;D={id:C.id,icon_url:E==null?null:E.uri,metadata:w.attribution_metadata,name:C.name}}var F=w.thumbnail;return{app_attribution:D,attach_type:x,name:w.filename,url:null,rel:"async",preview_url:z[0],preview_width:z[1],preview_height:z[2],large_preview_url:A[0],large_preview_width:A[1],large_preview_height:A[2],icon_type:m.PHOTO,metadata:{fbid:w.legacy_attachment_id,dimensions:k.string_of_int(w.original_dimensions.x)+(","+k.string_of_int(w.original_dimensions.y))},thumbnail_url:F==null?null:F.uri,share:null,photo_encodings:w.photo_encodings}}function t(w,x){var y=x,z=w;if(w>=x){var A=k.min(120,z/2),B=A/(z/2);return[A|0,y/2*B|0]}else{var C=k.min(120,y/2),D=C/(y/2);return[z/2*D|0,C|0]}}function u(w){var x=t(w.width,w.height),y=w.pack,z=w.sprite_image,A=w.sprite_image_2x,B=w.padded_sprite_image,C=w.padded_sprite_image_2x;return{app_attribution:null,attach_type:l.STICKER,name:null,url:w.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:m.UNKNOWN,metadata:{accessibilityLabel:w.label,stickerID:w.id,packID:y==null?null:y.id,frameCount:w.frame_count,frameRate:w.frame_rate,framesPerRow:w.frame_count>1?w.frames_per_row:1,framesPerCol:w.frame_count>1?w.frames_per_column:1,height:x[1],width:x[0],spriteURI:z==null?null:z.uri,spriteURI2x:A==null?null:A.uri,paddedSpriteURI:B==null?null:B.uri,paddedSpriteURI2x:C==null?null:C.uri,thumbnail_url:null,share:null}}}function v(w,x,y){__p&&__p();var z=[],A=x.extensible_attachment;if(!(A==null))z.push(n.getExtensibleAttachmentPayload(w,A));var B=x.sticker;if(!(B==null))z.push(u(B));var C=x.blob_attachments;if(!(C==null))h.iter(function(D){__p&&__p();switch(D.tag|0){case 0:z.push(s(D[0]));return 0;case 1:z.push(r(D[0],w,y));return 0;case 2:z.push(q(D[0]));return 0;case 3:z.push(p(D[0],w,y));return 0;case 4:z.push(o(D[0]));return 0}},C);return z}g._getFilePayload=o;g._getVideoPayload=p;g._getAudioPayload=q;g._getAnimatedImagePayload=r;g._getImagePayload=s;g._getStickerDimensions=t;g._getStickerPayload=u;g.transformAttachment=v}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",MEDIA:"media",PLACE_CARD:"place_card"})}),null);
__d("MessagingGenericAdminTextType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",MADE_POLL_VOTE:"made_poll_vote",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",GROUP_POLL:"group_poll",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MINGLE_PARTICIPANT_MATCHED:"mingle_participant_matched",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",ALOHA_CALL_INVITE:"aloha_call_invite",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",CHANGE_FAVORITE_COLOR:"change_favorite_color",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",MONTAGE_DIRECT_KEEP:"montage_direct_keep",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth"})}),null);
__d("MercuryMessageSourceTags",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile"})}),null);
__d("MessagingTagUtils",["MessagingSourceEnum","MessagingTagConstants","MercuryMessageSourceTags","Set"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=new k(Object.values(h));function m(p){__p&&__p();for(var q=p,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;if(l.has(u))return u}return h.UNKNOWN}function n(p){__p&&__p();for(var q=p,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t,v=u.split(i.app_id_root);if(v.length>1)return v[1].trim()}return null}function o(p,q){__p&&__p();var r=[],s=n(p);if(s&&i.orca_app_ids.indexOf(s)!==-1)r.push(j.MESSENGER);if(i.chat_sources.indexOf(q)!==-1)r.push(j.CHAT);if(i.email_source===q)r.push(j.EMAIL);if(i.mobile_sources.indexOf(q)!==-1)r.push(j.MOBILE);return r}f.exports={getSourceFromTags:m,getSourceTags:o}}),null);
__d("P2PPaymentLogMessageSubtype",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"})}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","bs_js_boolean","MercuryIDs","bs_pervasives","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function aa(ba,ca,da,ea,fa,a,b,c,ga,ha,d,e,f,g,ia,ja,h,i,j,k,l,ka,m,la,n,ma,o,na,oa){"use strict";__p&&__p();function p(v,w,x){__p&&__p();var y;if(v.__typename==="GroupPollExtensibleMessageAdminText"){var z=v.question,A;if(z==null)A=[{},null];else{var B=Object.assign({},z);Object.assign(B,{total_count:v.total_count,options:b.map(function(C){var D=Object.assign({},C);return Object.assign(D,{total_count:C.voters.nodes.length,voters:b.map(function(E){return E.id},C.voters.nodes)})},z.options.nodes)});A=[B,z.id]}y={message_type:j.from_opt(h.undefined_to_opt(o[w])),untypedData:{event_type:ga.lowercase(v.event_type),question_id:A[1],question_json:j.from_opt(h.undefined_to_opt(JSON.stringify(A[0])))}}}else y=v.__typename==="InstantGameUpdateExtensibleMessageAdminText"?{message_type:j.from_opt(h.undefined_to_opt(o[w])),untypedData:{game_id:d(v,["game","id"]),update_type:j.from_opt(h.undefined_to_opt(oa[v.update_type])),collapsed_text:v.collapsed_text,expanded_text:v.expanded_text,leaderboard_json:v.leaderboard_json,cta_url:d(v,["instant_game_update_data","cta_url"]),cta_title:d(v,["instant_game_update_data","cta_title"]),custom_image_url:d(v,["instant_game_update_data","photo","image","uri"]),template:d(v,["instant_game_update_data","template"])}}:v.__typename==="MessengerAdContextAdminText"?{message_type:j.from_opt(h.undefined_to_opt(o[w])),untypedData:{ad_url:v.ad_url}}:v.__typename==="AdExtensibleMessageAdminText"?{message_type:j.from_opt(h.undefined_to_opt(o[w])),untypedData:{ad_client_token:v.ad_client_token,ad_id:v.ad_id,ad_preferences_link:v.ad_preferences_link,ad_properties:v.ad_properties}}:v.__typename==="ThemeColorExtensibleMessageAdminText"||v.__typename==="ThreadIconExtensibleMessageAdminText"||v.__typename==="ThreadNicknameExtensibleMessageAdminText"||v.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||v.__typename==="AddContactExtensibleMessageAdminText"||v.__typename==="RtcCallLogExtensibleMessageAdminText"||v.__typename==="GameScoreExtensibleMessageAdminText"||v.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||v.__typename==="PartiesInviteExtensibleMessageAdminText"||v.__typename==="AppointmentReminderExtensibleMessageAdminText"||v.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"?{message_type:j.from_opt(h.undefined_to_opt(o[w])),untypedData:Object.assign({},v)}:{message_type:j.from_opt(h.undefined_to_opt(o[w])),untypedData:undefined};return{log_message_body:x,log_message_data:y,log_message_type:n.GENERIC_ADMIN_TEXT}}function q(v){return b.map(function(w){if(w==="p2p_transfer")return m.ORION;else if(w==="p2p_payment_request")return m.ORION_REQUEST;else return w},v)}function r(v){__p&&__p();var w=v.target,x;if(w==null)x=null;else if(w.__typename==="CrisisListing")x=c.__(0,[{listing_type:w.listing_type,listing_category:w.listing_category,map_image:w.map_image}]);else if(w.__typename==="MoneyTransfer")x=c.__(1,[{sender:w.sender,receiver:w.receiver,transfer_id:w.transfer_id,bubble_view:w.bubble_view}]);else if(w.__typename==="PeerToPeerTransfer")x=c.__(2,[{sender:w.sender,receiver_profile:w.receiver_profile,transaction_amount:w.transaction_amount,transfer_status:w.transfer_status,transfer_id:w.transfer_id,completedTime:w.completedTime,updatedTime:w.updatedTime,creationTime:w.creationTime,transfer_context:w.transfer_context,amount_fb_discount:w.amount_fb_discount,funds_availability:w.funds_availability,group_thread_fbid:w.group_thread_fbid,platform_item:w.platform_item,id:w.id,status_description:w.status_description,bubble_view:w.bubble_view,currency_amount:w.currency_amount}]);else if(w.__typename==="PeerToPeerPaymentRequest")x=c.__(3,[{amount:w.amount,transaction_amount:w.transaction_amount,requester:w.requester,requestee:w.requestee,request_status:w.request_status,request_theme:w.request_theme,id:w.id,memo_text:w.memo_text,transfer:w.transfer,creation_time:w.creation_time,group_thread_fbid:w.group_thread_fbid,updated_time:w.updated_time,status_description:w.status_description,individual_requests:w.individual_requests}]);else if(w.__typename==="PaymentPlatformAttachment")x=c.__(4,[{payment_modules_client:w.payment_modules_client,is_viewer_seller:w.is_viewer_seller,payment_snippet:w.payment_snippet,item_list:w.item_list,components:w.components,payment_call_to_actions:w.payment_call_to_actions,click_action:w.click_action,invoicer_id:w.invoicer_id}]);else if(w.__typename==="MomentsAppMessengerInvitation")x=c.__(5,[{snippet:w.snippet}]);else if(w.__typename==="MomentsAppMessengerPhotoRequest")x=c.__(6,[{snippet:w.snippet}]);else if(w.__typename==="MessengerRetailPromotion")x=c.__(7,[{message:w.message,call_to_actions:w.call_to_actions,promotion_items:w.promotion_items}]);else if(w.__typename==="MessengerBusinessMessage")x=c.__(8,[{message:w.message,call_to_actions:w.call_to_actions,business_items:w.business_items}]);else if(w.__typename==="Video")x=c.__(9,[{video_id:w.video_id}]);else if(w.__typename==="PagesPlatformLeadGenInfo")x=c.__(10,[{field_data_list:w.field_data_list}]);else if(w.__typename==="MessageLiveLocation")x=c.__(11,[{live_location_id:w.live_location_id,is_expired:w.is_expired,expiration_time:w.expiration_time,sender:w.sender,coordinate:w.coordinate,location_title:w.location_title,sender_destination:w.sender_destination,stop_reason:w.stop_reason}]);else if(w.__typename==="QuickInvite")x=c.__(12,[{id:w.id,invite_sender:w.invite_sender,invite_recipient:w.invite_recipient}]);else if(w.__typename==="PagesPlatformBookingMessage")x=c.__(13,[{id:w.id,page:w.page,message_bubble_type:w.message_bubble_type,user:w.user,native_component_flow_request:w.native_component_flow_request}]);else if(w.__typename==="GenieMessage")x=c.__(14,[{genie_sender:w.genie_sender,story_attachment:w.story_attachment}]);else if(w.__typename==="Event")x=c.__(15,[{eventID:w.eventID,guestStatus:w.guestStatus,canViewerJoin:w.canViewerJoin,timeString:w.timeString,event_place:w.event_place,social_context:w.social_context,watchStatus:w.watchStatus,connection_style:w.connection_style,canViewerWatch:w.canViewerWatch}]);else if(w.__typename==="ExternalSong")x=c.__(16,[{application_name:w.application_name,artist_names:w.artist_names,audio_url:w.audio_url,duration_ms:w.duration_ms,music_title:w.music_title}]);else if(w.__typename==="LightweightAction")x=c.__(17,[{lwa_state:w.lwa_state,lwa_type:w.lwa_type}]);else if(w.__typename==="MessengerRetailItem")x=c.__(18,[{id:w.id,name:w.name,desc:w.desc,thumb_url:w.thumb_url,item_url:w.item_url,source:w.source,image_aspect_ratio:w.image_aspect_ratio,first_metaline:w.first_metaline,second_metaline:w.second_metaline,third_metaline:w.third_metaline,default_action:w.default_action,call_to_actions:w.call_to_actions}]);else if(w.__typename==="AgentItemSuggestion")x=c.__(19,[{id:w.id,desc:w.desc,total_cost:w.total_cost,merchant_name:w.merchant_name,target_url:w.target_url,thumb_url:w.thumb_url,raw_amount:w.raw_amount,payment:w.payment,price_amount:w.price_amount,price_currency:w.price_currency,name:w.name}]);else if(w.__typename==="FundraiserPersonToCharity"||w.__typename==="FundraiserPersonForPerson"){var y=w.fundraiser_detailed_progress_text,z=w.fundraiser_subtitle_text,A=w.focused_cover_photo;x=c.__(20,[{fundraiserID:w.id,canDonate:w.can_donate,hasViewerDonated:w.has_viewer_donated,fundraiserDetailedProgressText:y==null?null:y.text,fundraiserSubtitleText:z==null?null:z.text,focusedCoverPhoto:A==null?null:{src:A.photo.image.uri,data:{height:A.photo.image.height,width:A.photo.image.width}}}])}else x=w.__typename==="MessengerRetailReceipt"?c.__(21,[{account_holder_name:w.account_holder_name,adjustments:w.retail_adjustments,cancellation_url:w.cancellation_url,items:w.retail_items,merchant_name:w.merchant_name,messenger_commerce_bubble_type:w.bubble_type,order_id:w.receipt_id,order_time:w.order_time_for_display,order_url:w.receipt_url,payment_method:w.order_payment_method,receipt_id:w.id,recipient_name:w.recipient_name,shipping_cost:w.shipping_cost,shipping_method:w.shipping_method,status:w.status,structured_address:w.structured_address,subtotal:w.subtotal,total_cost:w.total,total_tax:w.tax,partner_logo:w.partner_log}]):w.__typename==="JobApplication"?c.__(22,[{id:w.id}]):w.__typename==="GroupCommerceProductItem"?c.__(23,[{group_commerce_item_description:w.group_commerce_item_description,group_commerce_item_seller:w.group_commerce_item_seller,formatted_price:w.formatted_price,group_commerce_item_title:w.group_commerce_item_title,primary_photo:w.primary_photo,url:w.url}]):w.__typename==="Page"?c.__(24,[{address:w.address,top_category_name:w.top_category_name,cover_photo:w.cover_photo,location:w.location,name:w.name,overall_star_rating:w.overall_star_rating,id:w.id,price_range_description:w.price_range_description}]):w.__typename==="MessengerEventReminder"?c.__(25,[{is_active:w.is_active}]):w.__typename==="AirlineBoardingPassCollectionMessageAttachment"?c.__(26,[{tint_color:w.tint_color,logo:w.logo,flight_label:w.flight_label,boarding_time_label:w.boarding_time_label,departure_label:w.departure_label,passenger_names_label:w.passenger_names_label,passenger_seat_label:w.passenger_seat_label,flight_terminal_label:w.flight_terminal_label,flight_gate_label:w.flight_gate_label,view_boarding_pass_cta_label:w.view_boarding_pass_cta_label,boarding_passes:w.boarding_passes,share_cta_label:w.share_cta_label,message_cta_label:w.message_cta_label,boarding_pass_title_label:w.boarding_pass_title_label,boarding_pass_error_title_label:w.boarding_pass_error_title_label}]):w.__typename==="AirlineCheckInReminderMessageAttachment"?c.__(27,[{pnr_number:w.pnr_number,tint_color:w.tint_color,checkin_url:w.checkin_url,booking_number_label:w.booking_number_label,flight_label:w.flight_label,arrival_time_label:w.arrival_time_label,departure_time_label:w.departure_time_label,checkin_cta_label:w.checkin_cta_label,logo:w.logo,flight_infos:w.flight_infos}]):w.__typename==="AirlineUpdateMessageAttachment"?c.__(28,[{pnr_number:w.pnr_number,tint_color:w.tint_color,update_type:w.update_type,departure_time_label:w.departure_time_label,arrival_time_label:w.arrival_time_label,booking_number_label:w.booking_number_label,flight_gate_label:w.flight_gate_label,flight_label:w.flight_label,flight_status_label:w.flight_status_label,passenger_names_label:w.passenger_names_label,passenger_seat_label:w.passenger_seat_label,logo:w.logo,flight_info:w.flight_info,hightlighted_labels:w.hightlighted_labels}]):w.__typename==="AirlineItineraryMessageAttachment"?c.__(29,[{confirmation_number:w.confirmation_number,pnr_number:w.pnr_number,tint_color:w.tint_color,formatted_total:w.formatted_total,itemized_price_infos:w.itemized_price_infos,formatted_tax:w.formatted_tax,formatted_base_price:w.formatted_base_price,passenger_infos:w.passenger_infos,logo:w.logo,aircraft_type_label:w.aircraft_type_label,arrival_time_label:w.arrival_time_label,base_price_label:w.base_price_label,booking_number_label:w.booking_number_label,cabin_type_label:w.cabin_type_label,departure_time_label:w.departure_time_label,flight_confirmation_label:w.flight_confirmation_label,flight_date_label:w.flight_date_label,flight_label:w.flight_label,flight_terminal_label:w.flight_terminal_label,itinerary_error_title_label:w.itinerary_error_title_label,itinerary_title_label:w.itinerary_title_label,passenger_name_label:w.passenger_name_label,passenger_names_label:w.passenger_names_label,passenger_seat_label:w.passenger_seat_label,purchase_summary_label:w.purchase_summary_label,taxes_label:w.taxes_label,total_label:w.total_label,view_details_cta_label:w.view_details_cta_label,itinerary_legs:w.itinerary_legs}]):w.__typename==="MessengerRetailShipmentTrackingEvent"?c.__(30,[{id:w.id,shipment:w.shipment,tracking_event_time_for_display:w.tracking_event_time_for_display,shipment_tracking_event_type:w.shipment_tracking_event_type,messenger_commerce_location:w.messenger_commerce_location,tracking_event_description:w.tracking_event_description,bubble_type:w.bubble_type}]):w.__typename==="MessengerRetailShipment"?c.__(31,[{id:w.id,tracking_number:w.tracking_number,shipdate_for_display:w.shipdate_for_display,estimated_delivery_time_for_display:w.estimated_delivery_time_for_display,commerce_origin:w.commerce_origin,commerce_destination:w.commerce_destination,retail_carrier:w.retail_carrier,shipment_tracking_events:w.shipment_tracking_events,receipt:w.receipt,recipient:w.recipient,retail_shipment_items:w.retail_shipment_items,bubble_type:w.bubble_type}]):w.__typename==="TicketOrderAttachment"?c.__(33,[{ticket_order_id:w.ticket_order_id,event:w.event}]):w.__typename==="LeadGenDeepLinkData"?c.__(32,[{id:w.id,cover_image:w.cover_image,headline:w.headline,name:w.name,page:w.page}]):w.__typename==="UserLeadGenInfo"?c.__(34,[{id:w.id,field_data:w.field_data}]):w.__typename==="IceBreakerMessageAttachment"?c.__(35,[{ice_breaker_title:w.ice_breaker_title,ice_breaker_messages:w.ice_breaker_messages,ad_id:w.ad_id}]):w.__typename==="MontageDirect"?c.__(36,[{message_state:w.message_state,is_keep_disabled:w.is_keep_disabled}]):null;return{description:v.description,media:v.media,source:v.source,style_list:q(v.style_list),title_with_entities:v.title_with_entities,properties:v.properties,url:v.url,deduplication_key:v.deduplication_key,action_links:v.action_links,messaging_attribution:v.messaging_attribution,messenger_call_to_actions:v.messenger_call_to_actions,target:x}}function s(v){var w=r({description:v.description,media:v.media,source:v.source,style_list:v.style_list,title_with_entities:v.title_with_entities,properties:v.properties,url:v.url,deduplication_key:v.deduplication_key,action_links:v.action_links,messaging_attribution:v.messaging_attribution,messenger_call_to_actions:v.messenger_call_to_actions,target:v.target});if(w==null)return null;else{var x=b.map(r,v.subattachments);return Object.assign({subattachments:x},w)}}function t(v){__p&&__p();var w=v.blob_attachments,x=[];if(!(w==null))b.iter(function(y){__p&&__p();if(y.__typename==="MessageImage"){x.push(c.__(0,[{attribution_app:y.attribution_app,attribution_metadata:y.attribution_metadata,filename:y.filename,preview:y.preview,large_preview:y.large_preview,thumbnail:y.thumbnail,legacy_attachment_id:y.legacy_attachment_id,original_dimensions:y.original_dimensions,original_extension:y.original_extension,render_as_sticker:y.render_as_sticker,photo_encodings:y.photo_encodings}]));return 0}else if(y.__typename==="MessageAnimatedImage"){x.push(c.__(1,[{attribution_app:y.attribution_app,attribution_metadata:y.attribution_metadata,filename:y.filename,animated_image:y.animated_image,legacy_attachment_id:y.legacy_attachment_id,preview_image:y.preview_image,original_dimensions:y.original_dimensions}]));return 0}else if(y.__typename==="MessageAudio"){x.push(c.__(2,[{attribution_app:y.attribution_app,attribution_metadata:y.attribution_metadata,filename:y.filename,playable_url:y.playable_url,playable_duration_in_ms:y.playable_duration_in_ms,is_voicemail:y.is_voicemail,audio_type:y.audio_type,url_shimhash:y.url_shimhash,url_skipshim:y.url_skipshim}]));return 0}else if(y.__typename==="MessageVideo"){x.push(c.__(3,[{attribution_app:y.attribution_app,attribution_metadata:y.attribution_metadata,filename:y.filename,playable_url:y.playable_url,playable_duration_in_ms:y.playable_duration_in_ms,legacy_attachment_id:y.legacy_attachment_id,chat_image:y.chat_image,video_type:y.video_type,original_dimensions:y.original_dimensions,large_image:y.large_image,inbox_image:y.inbox_image}]));return 0}else if(y.__typename==="MessageFile"){x.push(c.__(4,[{attribution_app:y.attribution_app,attribution_metadata:y.attribution_metadata,filename:y.filename,url:y.url,content_type:y.content_type,is_malicious:y.is_malicious,message_file_fbid:y.message_file_fbid,url_shimhash:y.url_shimhash,url_skipshim:y.url_skipshim}]));return 0}else return 0},w);return x}function u(v){__p&&__p();var w=v.message;if(w==null)return[];else{var x=[];b.iter(function(y){__p&&__p();var w=y.entity;if(w==null)return 0;else{var z=w.id,A=w.thread_key;if(z==null)if(A==null)return 0;else{var B=A.thread_fbid;if(B==null)return 0;else{x.push({id:B,offset:y.offset,length:y.length,type:y.__typename});return 0}}else{x.push({id:z,offset:y.offset,length:y.length,type:y.__typename});return 0}}},w.ranges);return x}}function pa(v,w,x,y){__p&&__p();var z={};b.iter(function($){z[$.user.id]=$.reaction;return 0},w.message_reactions);var A=+ha.isUser_deprecated(w.message_sender.id),B=A?l.getSourceFromTags(w.tags_list):ka.UNKNOWN,C=A?l.getSourceTags(w.tags_list,B):[],D=w.commerce_message_type,E=w.customizations,F={thread_id:x.thread_id,thread_fbid:x.thread_fbid,other_user_fbid:x.other_user_fbid,action_type:w.__typename==="UserMessage"?k.USER_GENERATED_MESSAGE:k.LOG_MESSAGE,message_id:w.message_id,threading_id:null,offline_threading_id:w.offline_threading_id,author:f.getParticipantIDFromUserID(w.message_sender.id),author_email:w.message_sender.email,ephemeral_ttl_mode:w.ttl,timestamp:ia.caml_float_of_string(w.timestamp_precise),is_unread:w.unread,is_filtered_content:e.to_js_boolean(+(w.tags_list.indexOf(i.FILTERED_CONTENT)!==-1)),is_filtered_content_bh:e.to_js_boolean(+(w.tags_list.indexOf(i.FILTERED_CONTENT_BH)!==-1)),is_filtered_content_account:e.to_js_boolean(+(w.tags_list.indexOf(i.FILTERED_CONTENT_ACCOUNT)!==-1)),is_filtered_content_quasar:e.to_js_boolean(+(w.tags_list.indexOf(i.FILTERED_CONTENT_QUASAR)!==-1)),is_filtered_content_invalid_app:e.to_js_boolean(+(w.tags_list.indexOf(i.FILTERED_CONTENT_INVALID_APP)!==-1)),is_sponsored:w.is_sponsored,ad_id:w.ad_id,ad_client_token:w.ad_client_token,commerce_message_type:D==null?null:j.from_opt(h.undefined_to_opt(la[D])),customizations:E==null?[]:E,source:B,source_tags:C,tags:w.tags_list,is_spoof_warning:e.to_js_boolean(+(w.tags_list.indexOf(i.DOMAIN_AUTH_FAIL)!==-1||w.tags_list.indexOf(i.SPAM_SPOOFING)!==-1||w.tags_list.indexOf(i.SPOOF_WARNING)!==-1)),folder:x.folder,platform_xmd:w.platform_xmd_encoded,message_source:w.message_source_data,montage_reply_data:w.montage_reply_data,skip_bump_thread:false,profile_ranges:u(w),reactions:z};if(w.__typename==="UserMessage"){var qa=t(w),G=w.extensible_attachment,H;if(G==null)H=null;else{var I=G.story_attachment;H={legacy_attachment_id:G.legacy_attachment_id,story_attachment:I==null?null:s(I)}}var J=na.transformAttachment(v,{extensible_attachment:H,blob_attachments:qa,sticker:w.sticker},y),K=w.message,L=w.page_admin_sender;Object.assign(F,{body:K==null?null:K.text,creator_info:L==null?null:{creatorID:L.admin_id,creatorName:L.name,creatorType:L.sender_type,labelType:L.label_type,pageID:L.page_id,profileURI:L.profile_uri},subject:null,has_attachment:e.to_js_boolean(+(J.length>0)),attachments:J,raw_attachments:null,ranges:undefined,meta_ranges:w.meta_ranges.map(function($){return babelHelpers["extends"]({},$,{data:JSON.parse($.data)})})})}else if(w.__typename==="VoiceCallMessage"||w.__typename==="VideoCallMessage"){var ra=w.__typename,sa=ra==="VoiceCallMessage"?n.PHONE_CALL:n.VIDEO_CALL,M=w.message_sender.id,N=x.other_user_fbid,ta=N==null?null:f.getParticipantIDFromUserID(M===N?ja.getID():N),O=w.answered;Object.assign(F,{log_message_type:sa,log_message_data:{answered:O==null?false:O,caller:f.getParticipantIDFromUserID(M),callee:ta},log_message_body:w.snippet})}else if(w.__typename==="ThreadNameMessage")Object.assign(F,{log_message_type:n.THREAD_NAME,log_message_data:{name:w.thread_name},log_message_body:w.snippet});else if(w.__typename==="ThreadImageMessage"){var P=w.image_with_metadata,Q;if(P==null)Q=null;else{var R=P.preview;Q={preview_url:R==null?null:R.uri,metadata:{fbid:P.legacy_attachment_id,dimensions:g.string_of_int(P.original_dimensions.x)+(","+g.string_of_int(P.original_dimensions.y))}}}Object.assign(F,{log_message_type:n.THREAD_IMAGE,log_message_data:{image:Q},log_message_body:w.snippet})}else if(w.__typename==="ParticipantsAddedMessage"){var S=w.participants_added;Object.assign(F,{log_message_type:n.SUBSCRIBE,log_message_data:{added_participants:S==null?[]:b.map(function($){return f.getParticipantIDFromUserID($.id)},S)},log_message_body:w.snippet})}else if(w.__typename==="ParticipantLeftMessage"){var T=w.participants_removed;Object.assign(F,{log_message_type:n.UNSUBSCRIBE,log_message_data:{removed_participants:T==null?[]:b.map(function($){return f.getParticipantIDFromUserID($.id)},T)},log_message_body:w.snippet})}else if(w.__typename==="GenericAdminTextMessage"){var U=w.extensible_message_admin_text,V=w.extensible_message_admin_text_type;if(U==null){if(!(V==null))Object.assign(F,{log_message_body:w.snippet,log_message_data:{message_type:j.from_opt(h.undefined_to_opt(o[V])),untypedData:undefined},log_message_type:n.GENERIC_ADMIN_TEXT})}else if(!(V==null))Object.assign(F,p(U,V,w.snippet))}else if(w.__typename==="P2PPaymentRequestMessage"){var W=w.p2p_sender,X=w.p2p_receiver,Y=w.amount,Z=w.message_type;Object.assign(F,{log_message_body:w.snippet,log_message_data:{transfer_id:w.transfer_id,senderId:W==null?null:f.getParticipantIDFromUserID(W.id),receiverId:X==null?null:f.getParticipantIDFromUserID(X.id),formattedAmount:Y==null?null:Y.formatted,subtype:Z==null?null:j.from_opt(h.undefined_to_opt(ma[Z]))},log_message_type:n.ORION})}return F}a._getGenericAdminTextMessage=p;a._getStyleList=q;a.unsafeCastExtensibleAttachmentWithoutSubattachments=r;a.unsafeCastExtensibleAttachment=s;a.unsafeCastBlobAttachments=t;a._getProfileRanges=u;a.transformMessage=pa}),null);
__d("MessengerAttachmentTransformerForSend.bs",["bs_array","bs_caml_array","MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function a(b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();function m(o,p,q){__p&&__p();var r=p.node;if(r==null)return{attach_type:j.ERROR};else{var s;if(r.__typename==="ExtensibleMessageAttachment"){var t=r.story_attachment;s={legacy_attachment_id:r.legacy_attachment_id,story_attachment:t==null?null:k.unsafeCastExtensibleAttachment(t)}}else s=null;var u=r.__typename==="Sticker"?r:null,v=r.__typename,w;switch(v){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":w=[r];break;default:w=null}var x=k.unsafeCastBlobAttachments({blob_attachments:w}),y=l.transformAttachment(o,{extensible_attachment:s,blob_attachments:x,sticker:u},q);if(y.length)return i.caml_array_get(y,0);else return{}}}function n(o,p,q){return h.map(function(r){return m(o,r,q)},p)}g._transform=m;g.transform=n}),null);
__d("XMessagingSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/send/",{})}),null);
__d("MercuryServerSendMessageQueue",["BanzaiODS","ChatReliabilityInstrumentation","LogHistory","MercuryLoggingHelper","MercuryServerRequestsConfig","MessengerAttachmentTransformerForSend.bs","Run","MercuryServerDispatcher","MercuryServerSendMessageQueueSimulatedError","XMessagingSendController","fbt","idx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";__p&&__p();var t=j.getInstance("mercury_server_send_message_queue");function u(v,w,x,y){__p&&__p();var z;this.pending_message=null;this.queue=[];this.$MercuryServerSendMessageQueue5=function(){if(this.queue.length||this.pending_message)return r._("You haven't sent your message yet. Do you want to leave without sending?");return undefined}.bind(this);this.sender_id=v;this.queue_id=w;this.$MercuryServerSendMessageQueue2=x.success_handler;this.$MercuryServerSendMessageQueue1=x.error_handler;this.$MercuryServerSendMessageQueue4=x.transport_error_handler;this.$MercuryServerSendMessageQueue3=x.timeout_handler;this.client=y;n.onBeforeUnload(this.$MercuryServerSendMessageQueue5,false);var A=null;if(l.msgrRegion)A={name:"X-MSGR-Region",value:l.msgrRegion};var B=q.getURIBuilder().getURI().toString(),C=(z={},z[B]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:o.IMMEDIATE,customHeader:A,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:x.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:x.connection_retries},z);o.registerEndpoints(C)}u.prototype.enqueue=function(v){this.queue.push(v);this.$MercuryServerSendMessageQueue6()};u.prototype.$MercuryServerSendMessageQueue6=function(){__p&&__p();if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue7();return}this.pending_message=this.queue.shift();var v={client:this.client,action_type:this.pending_message.action_type,app_id:this.pending_message.app_id,audio_ids:this.pending_message.audio_ids,body:this.pending_message.body,client_thread_id:this.pending_message.client_thread_id,content_attachment:this.pending_message.content_attachment,ephemeral_ttl_mode:this.pending_message.ephemeral_ttl_mode,file_ids:this.pending_message.file_ids,gif_ids:this.pending_message.gif_ids,has_attachment:this.pending_message.has_attachment,image_ids:this.pending_message.image_ids,location_attachment:this.pending_message.location_attachment,lightweight_action_attachment:this.pending_message.lightweight_action_attachment,log_message_data:this.pending_message.log_message_data,log_message_type:this.pending_message.log_message_type,message_id:this.pending_message.message_id,message_source_data:this.pending_message.message_source_data,montage_reply_data:this.pending_message.montage_reply_data,offline_threading_id:this.pending_message.offline_threading_id,other_user_fbid:this.pending_message.other_user_fbid,photo_fbids:this.pending_message.photo_fbids,shareable_attachment:this.pending_message.shareable_attachment,signature_id:this.pending_message.signatureID,source:this.pending_message.source,specific_to_list:this.pending_message.specific_to_list,sticker_id:this.pending_message.sticker_id,tags:this.pending_message.tags,thread_fbid:this.pending_message.thread_fbid,timestamp:this.pending_message.timestamp,ui_push_phase:this.pending_message.ui_push_phase,video_ids:this.pending_message.video_ids,platform_xmd:this.pending_message.platform_xmd,profile_xmd:this.pending_message.profile_xmd};for(var w in v)if(v[w]===undefined||v[w]===null)delete v[w];if(!v.action_type){var x=k.obfuscateMessage(v);i.logERROR("missing action type before sending to send controller");t.debug("missing_action_type",JSON.stringify(x))}if(!v.message_id){var y=k.obfuscateMessage(v);i.logERROR("missing action type before sending to send controller"+JSON.stringify(y));t.debug("missing_message_id",JSON.stringify(y))}o.trySend(q.getURIBuilder().getURI().toString(),v,null,this.sender_id,this.queue_id)};u.prototype.$MercuryServerSendMessageQueue8=function(){while(this.queue.length)this.$MercuryServerSendMessageQueue9(this.queue.shift())};u.prototype.$MercuryServerSendMessageQueue9=function(v){this.$MercuryServerSendMessageQueue1(p.create(v));t.error("mark_as_failed",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:k.obfuscateMessage(v)}))};u.prototype.handleSuccess=function(v,w){__p&&__p();var x=(v.actions||[]).map(function(y){__p&&__p();var z,A=babelHelpers["extends"]({},y);if(y.graphql_payload&&y.graphql_payload.length>0){var B=m.transform(this.sender_id,y.graphql_payload,y.for_page);A=Object.assign(A,{attachments:B})}var C=(z=y)!=null?(z=z.log_message_data)!=null?z.graphql_image:z:z;if(C){var D=m.transform(this.sender_id,[C],y.for_page);A=Object.assign(A,{log_message_data:{image:D[0]}})}return A}.bind(this));v.actions=x;this.$MercuryServerSendMessageQueue2(v,w);this.pending_message=null;this.$MercuryServerSendMessageQueue6()};u.prototype.handleError=function(v){this.$MercuryServerSendMessageQueue1(v);this.$MercuryServerSendMessageQueue8();this.pending_message=null};u.prototype.handleTransportError=function(v){this.$MercuryServerSendMessageQueue4(v);this.$MercuryServerSendMessageQueue8();this.pending_message=null};u.prototype.handleTimeout=function(v){this.$MercuryServerSendMessageQueue3(v);this.$MercuryServerSendMessageQueue8();this.pending_message=null};u.prototype.$MercuryServerSendMessageQueue7=function(){t.debug("maybe_send_next_pending_message",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:k.obfuscateMessage(this.pending_message),queue:this.queue.map(function(w){return k.obfuscateMessage(w)})}));var v="send_queue.delayed.queue_length."+this.queue.length.toString();h.bumpEntityKey("chat.web",v)};f.exports=u}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={_getInstances:function j(){if(!this._instances)this._instances={};return this._instances},get:function j(){return this.getForFBID(h.getID())},getForFBID:function j(k){var l=this._getInstances();if(!l[k])l[k]=new this(k);return l[k]}};f.exports=i}),null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","Map","MercuryServerSendMessageQueue","MercurySingletonMixin"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=i.getInstance("mercury_server_send_message_queue_router"),n="chat.web.send_queue_router";h.setEntitySample(n,.1);function o(p){"use strict";this.queues=new j();this.fbid=p}o.prototype.enqueue=function(p,q,r,s){"use strict";var t=this.queues.get(p);if(t===undefined){t=new k(this.fbid,p,q,r);this.queues.set(p,t);m.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:p}));h.bumpEntityKey(n,"new_queue")}t.enqueue(s)};Object.assign(o,l);f.exports=o}),null);
__d("MercurySourceType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_PENDING:"source:internal:test_pending",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES:"source:instant_games",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",PAGE_PQI_MESSAGE:"source:pages:pqi_message"})}),null);
__d("MercurySyncConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({ARBITER_EVENT_INVALID_STATE:"SYNC:INVALID_STATE",ARBITER_EVENT_INVALID_STATE_RETRY:"SYNC:INVALID_STATE_RETRY",ARBITER_EVENT_INVALID_STATE_RECOVER:"SYNC:INVALID_STATE_RECOVER",ARBITER_EVENT_SERVER_REQUESTS_FAIL:"NET:SERVER_REQUESTS_FAIL",ARBITER_EVENT_SERVER_REQUESTS_RECOVER:"NET:SERVER_REQUESTS_RECOVER"});f.exports=h}),null);
__d("MercurySyncDeltaHolder",["Map","MercurySingletonProvider"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(){this.$MercurySyncDeltaHolder2=new h();this.$MercurySyncDeltaHolder3=[];this.$MercurySyncDeltaHolder1=0}j.getForFBID=function(l){return k.getForFBID(l)};j.get=function(){return k.get()};j.prototype.peek=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(l,m){return l-m});return this.$MercurySyncDeltaHolder3[0]};j.prototype.getTop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(l,m){return l-m});return this.$MercurySyncDeltaHolder3.reverse()[0]};j.prototype.pop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(n,o){return n-o});if(this.$MercurySyncDeltaHolder3.length===0)return undefined;var l=this.$MercurySyncDeltaHolder3.shift(),m=this.$MercurySyncDeltaHolder2.get(l);this.$MercurySyncDeltaHolder2["delete"](l);return{seqID:l,delta:m}};j.prototype.push=function(l,m){if(this.$MercurySyncDeltaHolder2.has(l))return;this.$MercurySyncDeltaHolder2.set(l,m);this.$MercurySyncDeltaHolder3.push(l)};j.prototype.getLastSeqID=function(){return this.$MercurySyncDeltaHolder1};j.prototype.updateLastSeqID=function(l){this.$MercurySyncDeltaHolder1=l};var k=new i(j);f.exports=j}),null);
__d("PageMessageEnumTag",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLAG:"flag",IMPORTANT:"important",LOW_VALUE:"low_value",SPAM_SPOOFING:"spam_spoofing",JOB_APPLICATION:"job_application",CONFIRMED_APPOINTMENT:"confirmed_appointment",PENDING_APPOINTMENT:"pending_appointment",REQUESTED_APPOINTMENT:"requested_appointment",MESSENGER_ADS:"messenger_ads"})}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["Arbiter","AsyncResponse","BanzaiODS","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","FBJSON","EventProfiler","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAssert","MercuryConfig","MercuryDispatcher","MercuryErrorType","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySendErrorLogger","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySourceType","MercurySyncDeltaHolder","MercurySyncConstants","MercuryThreadIDMap","MercuryThreadlistConstants","MercuryMessageIDs.bs","MessagingConfig","MessagingTag","PageMessageEnumTag","MercuryServerSendMessageQueueOptions","MercuryServerDispatcher","Set","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","errorCode","gkx","ifRequired","invariant","setTimeoutAcrossTransitions"],(function aa(ba,ca,da,ea,a,fa,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,ga,ha,t,ia,ja,u,ka,v,la,ma,na,w,oa,pa,x,qa,y,ra,sa,z,ta,A,B,C,D,ua,E,va,wa,xa){"use strict";__p&&__p();var F=j.getInstance("mercury_server"),G=m.MERCURY,ya=1e3,za=30*1e3,H=true;function I(N){return N.getError()?"_"+N.getError():""}function Aa(N,O){__p&&__p();var P=babelHelpers["extends"]({},N),Q=void 0;if(O.threads){if(!P.threads)P.threads={};for(Q in O.threads)P.threads[Q]=Object.keys(D((P.threads[Q]||[]).concat(O.threads[Q]||[])))}if(O.messages){if(!P.messages)P.messages={};for(Q in O.messages){if(!P.messages[Q])P.messages[Q]={};for(var R in O.messages[Q])if(P.messages[Q][R])P.messages[Q][R]=J(P.messages[Q][R],O.messages[Q][R]);else P.messages[Q][R]=O.messages[Q][R]}}P.client=N.client||O.client;return P}function Ba(N,O){var P=Object.assign(D(N.folders,true),D(O.folders,true)),Q=N.client||O.client;return{folders:Object.keys(P),client:Q}}function Ca(N,O){for(var P in O)if(N[P]&&typeof N[P]==="object")N[P]=J(N[P],O[P]);else if(O[P]&&typeof O[P]==="object"){var Q={};Object.assign(Q,O[P]);N[P]=Q}return N}function Da(N,O){return O}function J(N,O){var P=N.offset<O.offset?N.offset:O.offset,Q=N.offset+N.limit,R=O.offset+O.limit,S=Q>R?Q:R,T=S-P,U=N.timestamp>O.timestamp?N.timestamp:O.timestamp;return{offset:P,limit:T,timestamp:U}}function K(N,O){var P=N.client||O.client,Q={ids:{},client:P};Object.assign(Q.ids,N.ids,O.ids);return Q}function Ea(N,O){__p&&__p();var P={},Q=void 0,R=N.client||O.client;delete N.client;delete O.client;for(Q in N)Object.assign(P,D(N[Q],Q));for(Q in O)Object.assign(P,D(O[Q],Q));var S={client:R};for(var T in P){Q=P[T];if(!S[Q])S[Q]=[];S[Q].push(T)}return S}function Fa(N,O){var P=N.client||O.client,Q=D(N.ids,true),R=D(O.ids,true),S=Object.assign(Q,R);return{ids:Object.keys(S),client:P}}function L(N){__p&&__p();this.$MercuryServerRequests1=N;this.$MercuryServerRequests2=0;this.$MercuryServerRequests3={};this.$MercuryServerRequests4={};this.$MercuryServerRequests9=new ta();this.__threadIDMap=oa.getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests5=p.getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests6=ja.getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests7=new sa(function(O,P){this.__handleUpdate(O,P)}.bind(this),function(O){return this.$MercuryServerRequests10(O)}.bind(this),function(O){this.$MercuryServerRequests11(O)}.bind(this),function(O){return this.$MercuryServerRequests12(O)}.bind(this),u.sendMessageTimeout,qa.SEND_CONNECTION_RETRIES);this.$MercuryServerRequests8=na.getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests13()}L.getForFBID=function(N){return M.getForFBID(N)};L.get=function(){return M.get()};L.prototype.fetchThreadlistInfo=function(N,O){__p&&__p();var P=arguments.length<=2||arguments[2]===undefined?y.INBOX:arguments[2],Q=arguments[3],R=arguments.length<=4||arguments[4]===undefined?G:arguments[4],S=arguments[5];if(H){H=false;i.tagCurrentActiveInteractionsAs("FirstMercuryThreadFetch")}var T=Q?z.IMMEDIATE:null;if(o.MessengerInboxRequests&&!T&&E("AT6k4q_FpxHOg5pke0cIeoOSz9TDOKLGTv6uQmXW3Apzeacou2FfBIyiYS2xi1X396k4nIwSLJ6rBI1n0hbeA_ij"))T=z.BATCH_DEFERRED_MULTI;var U={client:R};U[P]={offset:N,limit:O,filter:Q,before:S};this.__sendRequest(v.THREADLIST_INFO,U,T)};L.prototype.fetchUnseenThreadIDs=function(){var N=arguments.length<=0||arguments[0]===undefined?y.INBOX:arguments[0],O=arguments.length<=1||arguments[1]===undefined?G:arguments[1];this.__sendRequest(A.getURIBuilder().getURI().toString(),{})};L.prototype.fetchUnreadThreadIDs=function(N){var O=arguments.length<=1||arguments[1]===undefined?G:arguments[1];this.__sendRequest(v.UNREAD_THREADS,{folders:[N],client:O})};L.prototype.fetchThreadData=function(N){__p&&__p();var O=arguments.length<=1||arguments[1]===undefined?G:arguments[1];n.allThreadID(N);var P={threads:{},client:O},Q=[],R=[];N.forEach(function(T){__p&&__p();if(this.$MercuryServerRequests3[T])return;this.$MercuryServerRequests3[T]=true;var U=this.__threadIDMap.getServerIDFromClientIDNow(T),V=s.tokenize(T);if(V.type=="user"){Q.push(V.value);P.threads.user_ids=Q}else if(V.type=="thread"){if(U)R.push(U);else R.push(V.value);P.threads.thread_fbids=R}else if(V.type=="root"){if(U){R.push(U);P.threads.thread_fbids=R}}else if(V.type!="pending")throw new Error("Unknown thread type",V)}.bind(this));this.$MercuryServerRequests5.inform("fetch-thread-data",P);if(P.threads.user_ids)P.threads.user_ids.forEach(function(T){if(!T){F.error("empty user id",JSON.stringify(Q));f.logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(Q))}});if(P.threads.thread_fbids)P.threads.thread_fbids.forEach(function(T){if(!T)f.logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(N))});for(var S in P.threads){this.__sendRequest(v.THREAD_INFO,P);break}};L.prototype.ensureThreadIsFetched=function(N){__p&&__p();var O=arguments.length<=1||arguments[1]===undefined?G:arguments[1];if(!this.__threadIDMap.getClientIDFromServerIDNow(N)&&!this.$MercuryServerRequests3[N]){if(!N){f.logERROR("Ensure invalid FBID sent to thread_info.php");F.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$MercuryServerRequests3[N]=true;this.__sendRequest(v.THREAD_INFO,{threads:{thread_fbids:[N]},client:O})}};L.prototype.fetchThreadMessages=function(N,O,P,Q,R){__p&&__p();var S=arguments.length<=5||arguments[5]===undefined?G:arguments[5];n.isThreadID(N);var T=void 0,U=void 0,V=s.tokenize(N),W=this.__threadIDMap.getServerIDFromClientIDNow(N),X=false;if(W){T=W;U=V.type=="user"?"user_ids":"thread_fbids"}else{T=V.value;switch(V.type){case"user":U="user_ids";X=true;break;case"thread":U="thread_fbids";break}}var Y={messages:{},threads:{},client:S};if(U){Y.messages[U]={};Y.messages[U][T]={offset:O,timestamp:Q,limit:P};if(X)Y.threads[U]=[T];this.__sendRequest(v.THREAD_INFO,Y,R)}else this.__threadIDMap.getServerIDFromClientID(N,function(Z){Y.messages.thread_fbids={};Y.messages.thread_fbids[Z]={offset:O,timestamp:Q,limit:P};this.__sendRequest(v.THREAD_INFO,Y,R)}.bind(this))};L.prototype.handleThreadInfoError=function(N,O){__p&&__p();var P,Q=this,R=N.getData(),S=[];if(R.messages){for(var T in R.messages.thread_fbids){var U=this.__threadIDMap.getClientIDFromServerIDNow(T);if(U)S.push(this.$MercuryServerRequests14(U))}for(var V in R.messages.user_ids)S.push(this.$MercuryServerRequests14("user:"+V));for(var W in R.messages.group_ids)S.push(this.$MercuryServerRequests14("group:"+W))}if(S.length)this.$MercuryServerRequests5.handleUpdate({actions:S,from_client:true,payload_source:t.CLIENT_CHANNEL_MESSAGE});if(R.threads&&(R.threads.user_ids||R.threads.thread_fbids||R.threads.group_ids||R.threads.thread_ids)){var X=5,Y=true;if(!R.retry_count){R.retry_count=0;if(R.messages)delete R.messages}else if(R.retry_count>=X&&(!O||!E("AT64J9YhwkyrHxbLybCQFLyzjkGHk3oI2YIajEOuOFur_lZPJRPR_CognCbUbaH7Kn5DndmAaaKKt6FL7dls2Aba"))){Y=false;(R.threads.thread_ids||[]).concat(R.threads.thread_fbids||[]).forEach(function($){if($ in this.$MercuryServerRequests3)delete this.$MercuryServerRequests3[$]},this)}[].concat(R.threads.thread_ids||[],R.threads.thread_fbids||[],R.threads.user_ids||[],R.threads.group_ids||[]).forEach(function($){if($)this.$MercuryServerRequests9.add($);else f.logERROR("lost a thread id somehow")}.bind(this));if(Y){var Z=Math.pow(2,Math.min(R.retry_count,X))*1e3;xa(function(){F.log("retry_thread","{}");this.__sendRequest(v.THREAD_INFO,R)}.bind(this),Z);R.retry_count++}if(this.$MercuryServerRequests9.size)(function(){var $=[];Q.$MercuryServerRequests9.forEach(function(Ga){return $.push(Ga)});F.debug("failed threads",JSON.stringify($));b.inform(w.ARBITER_EVENT_SERVER_REQUESTS_FAIL,$)})()}};L.prototype.markFolderAsRead=function(N){this.__sendRequest(v.MARK_FOLDER_READ,{folder:N});var O=[{action_type:r.MARK_ALL_READ,folder:N}];this.$MercuryServerRequests5.handleUpdate({global_actions:O,from_client:true,payload_source:t.CLIENT_CHANGE_READ_STATUS})};L.prototype.changeThreadReadStatus=function(N,O,P,Q,R,S){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(T){var U,V={ids:(U={},U[T]=O,U),source:P,watermarkTimestamp:Q,shouldSendReadReceipt:R,commerce_last_message_type:S};F.log("initiate_change_read_status",JSON.stringify({thread_id:N,thread_fbid:T,mark_as_read:O,watermarkTimestamp:Q}));this.__sendRequest(v.CHANGE_READ_STATUS,V)}.bind(this))};L.prototype.changeThreadArchivedStatus=function(N,O,P){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(Q){var R={ids:{},source:P};R.ids[Q]=O;this.__sendRequest(v.CHANGE_ARCHIVED_STATUS,R)}.bind(this))};L.prototype.changeThreadPageFollowUpStatus=function(N,O,P){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(Q){var R={ids:{},source:P};R.ids[Q]=O;this.__sendRequest(v.CHANGE_PAGE_FOLLOW_UP_STATUS,R)}.bind(this))};L.prototype.changeThreadFolder=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){var Q={};Q[O]=[P];this.__sendRequest(v.MOVE_THREAD,Q)}.bind(this))};L.prototype.changeMutingOnThread=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){this.__sendRequest(v.CHANGE_MUTE_THREAD,{thread_fbid:P,mute_settings:O,payload_source:G})}.bind(this))};L.prototype.changeMentionsMutingOnThread=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){this.__sendRequest(B.getURIBuilder().getURI(),{thread_fbid:P,mentions_mute_mode:O,payload_source:G})}.bind(this))};L.prototype.changeReactionsMutingOnThread=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){this.__sendRequest(C.getURIBuilder().getURI(),{thread_fbid:P,reactions_mute_mode:O,payload_source:G})}.bind(this))};L.prototype.markThreadSpam=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){this.__sendRequest(v.MARK_SPAM,{id:P,source:O})}.bind(this))};L.prototype.unmarkThreadSpam=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){this.__sendRequest(v.UNMARK_SPAM,{id:P,source:O})}.bind(this))};L.prototype.deleteThread=function(N,O){n.isThreadID(N);this.__threadIDMap.getServerIDFromClientID(N,function(P){var Q={ids:[P],source:O};this.__sendRequest(v.DELETE_THREAD,Q)}.bind(this))};L.prototype.deleteMessages=function(N,O){x.getServerIDs(O||[],function(P){this.__sendRequest(v.DELETE_MESSAGES,{message_ids:P})}.bind(this))};L.prototype.sendDeliveryReceipts=function(N,O){x.getServerIDs(N||[],function(P){this.__sendRequest(v.DELIVERY_RECEIPTS,{message_ids:P,thread_ids:O})}.bind(this))};L.prototype.sendNewMessage=function(N){__p&&__p();var O=arguments.length<=1||arguments[1]===undefined?G:arguments[1];if(!N.offline_threading_id)d.bumpEntityKey("chat.web","missing_otid_on_send");if(N.client_state&&N.client_state!==ha.SEND_TO_SERVER)return;var P=s.tokenize(N.thread_id),Q=P.type,R=babelHelpers["extends"]({},N);R.thread_id=null;if(Q=="user"){R.other_user_fbid=P.value;this.$MercuryServerRequests15(R,O)}else if(Q=="thread"){R.thread_fbid=P.value;this.$MercuryServerRequests15(R,O)}else if(Q=="root"&&P.value==R.offline_threading_id){R.client_thread_id=N.thread_id;this.$MercuryServerRequests15(R,O)}else{s.isLocalThread(N.thread_id)||wa(0);this.__threadIDMap.getServerIDFromClientID(N.thread_id,function(S){R.thread_fbid=S;this.$MercuryServerRequests15(R,O)}.bind(this))}f.logMESSAGE_SEND_START(h.stringify({otid:R.offline_threading_id,message_id:R.message_id,other_user_fbid:R.other_user_fbid,viewer_page_fbid:!R.creator_info?null:R.creator_info.pageID}))};L.prototype.$MercuryServerRequests15=function(N,O){b.inform(e.ATTEMPT_RECONNECT);this.$MercuryServerRequests4[N.message_id]=Date.now();ka.getForFBID(this.$MercuryServerRequests1).enqueue(N.other_user_fbid||N.thread_fbid||N.client_thread_id,this.$MercuryServerRequests7,O,N)};L.prototype.markSeen=function(){var N=this.$MercuryServerRequests2;this.__sendRequest(v.MARK_SEEN,{seen_timestamp:N})};L.prototype.$MercuryServerRequests16=function(N,O,P,Q){__p&&__p();var R=N.getData(),S=R.message_batch||[R];F.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:P,request_error_status:O,error_data:Q,message_list:S}));var T=S.map(function(V){var W={action_type:l.SEND_MESSAGE,other_user_fbid:V.other_user_fbid,thread_fbid:V.thread_fbid,client_message_id:V.message_id,message_id:V.message_id,client_thread_id:V.client_thread_id,status:O,error_data:Q};return W});T.forEach(function(V){if(V.action_type===l.SEND_MESSAGE&&V.status===k.ERROR)this.__logMercurySendError(V)},this);var U={actions:T,payload_source:t.CLIENT_HANDLE_ERROR};this.$MercuryServerRequests6.handleUpdate(U)};L.prototype.handleSendMessageError=function(N){__p&&__p();var O=N.getPayload(),P=null,Q=null;if(O&&O.error_payload){P=k.UNCONFIRMED;Q="send_error"}else{P=k.ERROR;Q="request_error"+I(N)}var R=N.error;if(R===1404102)c.verboseErrorHandler(N);var S=/<.*>/.test(N.getErrorDescription())?N.getErrorSummary():N.getErrorDescription();this.$MercuryServerRequests16(N.getRequest(),P,Q,{type:q.SERVER,code:N.getError(),description:S,is_transient:N.isTransient()})};L.prototype.handleSendMessageTransportError=function(N){this.$MercuryServerRequests16(N.getRequest(),k.ERROR,"transport_error"+I(N),{type:q.TRANSPORT,code:N.getError(),is_transient:true})};L.prototype.handleSendMessageTimeout=function(N){this.$MercuryServerRequests16(N,k.ERROR,"transport_timeout",{type:q.TIMEOUT,is_transient:true})};L.prototype.getLastActionTimestamp=function(){return this.$MercuryServerRequests2};L.prototype.__logMercurySendError=function(N){ia.log(N)};L.prototype.updateLastActionTimestamp=function(N){var O=Date.now()-1e3*60*60*24;if(N&&N>O)this.$MercuryServerRequests2=Math.max(this.$MercuryServerRequests2,N)};L.prototype.markThreadFetched=function(N){delete this.$MercuryServerRequests3[N];if(this.$MercuryServerRequests9["delete"](N)&&!this.$MercuryServerRequests9.size){F.debug("no_failed_threads","{}");b.inform(w.ARBITER_EVENT_SERVER_REQUESTS_RECOVER)}};L.prototype.$MercuryServerRequests14=function(N){return{action_type:l.LOG_MESSAGE,thread_id:N,message_id:N,timestamp:Date.now(),is_unread:false,source:ma.UNKNOWN,log_message_body:"",log_message_type:ga.SERVER_ERROR,log_message_data:{}}};L.prototype.__getForAsyncRequest=function(N){var O=N.getData(),P=O.request_user_id?O.request_user_id:g.getID();return L.getForFBID(P)};L.prototype.__handleUpdate=function(N,O){this.__getForAsyncRequest(O).$MercuryServerRequests6.handleUpdate(N)};L.prototype.$MercuryServerRequests17=function(N){var O=this.__getForAsyncRequest(N);O.handleThreadInfoError(N)};L.prototype.$MercuryServerRequests18=function(N){var O=this.__getForAsyncRequest(N);O.handleThreadInfoError(N,true)};L.prototype.$MercuryServerRequests10=function(N){var O=this.__getForAsyncRequest(N.getRequest());O.handleSendMessageError(N)};L.prototype.$MercuryServerRequests11=function(N){var O=this.__getForAsyncRequest(N.getRequest());O.handleSendMessageTransportError(N)};L.prototype.$MercuryServerRequests12=function(N){var O=this.__getForAsyncRequest(N);O.handleSendMessageTimeout(N)};L.prototype.$MercuryServerRequests13=function(){__p&&__p();var N,O=null;if(u.msgrRegion)O={name:"X-MSGR-Region",value:u.msgrRegion};var P=(N={},N[v.THREAD_INFO]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_DEFERRED_MULTI,customHeader:O,batch_function:Aa,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this),error_handler:function(T){return this.$MercuryServerRequests17(T.getRequest())}.bind(this),timeout_handler:function(T){return this.$MercuryServerRequests18(T)}.bind(this),timeout:za},N[v.MARK_FOLDER_READ]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.CHANGE_READ_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){this.__handleUpdate(T,U);var V=(T.threads||[]).map(function(W){return W&&W.thread_id});F.log("response_change_read_status",JSON.stringify({threads:V}))}.bind(this)},N[v.MARK_SEEN]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE,customHeader:O,batch_function:Da,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.THREADLIST_INFO]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE_UNIQUE,customHeader:O,batch_function:Ca,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.MARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.UNMARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.UNREAD_THREADS]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE_UNIQUE,customHeader:O,batch_function:Ba,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.CHANGE_ARCHIVED_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE,customHeader:O,batch_function:K,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE,customHeader:O,batch_function:K,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.DELETE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE,customHeader:O,batch_function:Fa,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.DELETE_MESSAGES]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.DELIVERY_RECEIPTS]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.MOVE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:z.BATCH_SUCCESSIVE,customHeader:O,batch_function:Ea,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N[v.CHANGE_MUTE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)},N),Q=A.getURIBuilder().getURI().toString();P[Q]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)};var R=B.getURIBuilder().getURI().toString();P[R]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)};var S=C.getURIBuilder().getURI().toString();P[S]={request_user_id:this.$MercuryServerRequests1,mode:z.IMMEDIATE,customHeader:O,handler:function(T,U){return this.__handleUpdate(T,U)}.bind(this)};z.registerEndpoints(P)};L.prototype.__sendRequest=function(N,O,P){if(E("AT5ciOxCuhvQiPHB-OF0aBC8VDwgTuUgU0qCNeLTy9HW8OGAaj6YECdnrVkZOqNRHzX5-Wxrb9FeQ1ToJxYOvCPs"))switch(N){case v.THREADLIST_INFO:case v.THREAD_INFO:O.cachius_min_seq_id=this.$MercuryServerRequests8.getLastSeqID();break;default:break}z.trySend(N,O,P,this.$MercuryServerRequests1)};L.prototype.__getFBID=function(){return this.$MercuryServerRequests1};var M=new la(L);a.exports=L}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(n){this.$MercuryThreadIDMap1=n;this.$MercuryThreadIDMap2=new h();this.$MercuryThreadIDMap3=new h()}l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};l.prototype.setServerIDToClientID=function(n,o){var p=this.getClientIDFromServerIDNow(n);if(p){p!==o;return}this.forceSetServerIDToClientID(n,o)};l.prototype.forceSetServerIDToClientID=function(n,o){this.$MercuryThreadIDMap2.setResource(n,o);this.$MercuryThreadIDMap3.setResource(o,n)};l.prototype.setDeprecatedServerIDToClientID=function(n,o){if(n)this.$MercuryThreadIDMap2.setResource(n,o)};l.prototype.getClientIDFromServerIDNow=function(n){return this.$MercuryThreadIDMap2.getResource(n)};l.prototype.getClientIDFromServerID=function(n,o){this.$MercuryThreadIDMap2.executeOrEnqueue(n,o);e(["MercuryServerRequests"],function(p){p.getForFBID(this.$MercuryThreadIDMap1).ensureThreadIsFetched(n)}.bind(this))};l.prototype.getServerIDFromClientIDNow=function(n){return this.$MercuryThreadIDMap3.getResource(n)};l.prototype.getServerIDFromClientID=function(n,o){i.isThreadID(n);var p=this.$MercuryThreadIDMap3.executeOrEnqueue(n,o);e(["MercuryServerRequests"],function(q){var r=this.$MercuryThreadIDMap3.getUnavailableResources(p),s=j.tokenize(n);if(r.length&&s.type!="root")q.getForFBID(this.$MercuryThreadIDMap1).fetchThreadData(r)}.bind(this))};l.prototype.hasClientIDForServerID=function(n){return!!this.getClientIDFromServerIDNow(n)};l.prototype.convertThreadIDIfAvailable=function(n){var o=this.getClientIDFromServerIDNow(n);return o||n};l.prototype.canLinkExternally=function(n){i.isThreadID(n);var o=j.tokenize(n);return o.type=="user"||!!this.getServerIDFromClientIDNow(n)};var m=new k(l);f.exports=l}),null);
__d("MercuryParticipantFetcher",["LogHistory","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","Set","ShortProfiles","setImmediate","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p=h.getInstance("short_profiles");function q(s){this.$MercuryParticipantFetcher4=k.getForFBID(s);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new l();this.$MercuryParticipantFetcher3=new l();this.$MercuryParticipantFetcher5=setInterval(this.$MercuryParticipantFetcher7.bind(this),20*1e3)}q.prototype.fetch=function(s){this.$MercuryParticipantFetcher8(s);this.$MercuryParticipantFetcher7()};q.prototype.fetchMulti=function(s){if(s.length){s.forEach(function(t){return this.$MercuryParticipantFetcher8(t)}.bind(this));this.$MercuryParticipantFetcher7()}};q.prototype.$MercuryParticipantFetcher8=function(s){if(!this.$MercuryParticipantFetcher3.has(s))this.$MercuryParticipantFetcher2.add(s)};q.prototype.$MercuryParticipantFetcher7=function(){__p&&__p();if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;n(function(){__p&&__p();this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(s){return this.$MercuryParticipantFetcher3.add(s)}.bind(this));this.$MercuryParticipantFetcher9(this.$MercuryParticipantFetcher2,function(s){s.forEach(function(t){return this.$MercuryParticipantFetcher3["delete"](t.id)}.bind(this));this.$MercuryParticipantFetcher10(s);if(this.$MercuryParticipantFetcher6)clearTimeout(this.$MercuryParticipantFetcher6)}.bind(this));this.$MercuryParticipantFetcher11();this.$MercuryParticipantFetcher2.clear()}.bind(this))};q.prototype.$MercuryParticipantFetcher11=function(){this.$MercuryParticipantFetcher6=o(function(){this.$MercuryParticipantFetcher3.forEach(function(s){return this.$MercuryParticipantFetcher2.add(s)}.bind(this));this.$MercuryParticipantFetcher3.clear()}.bind(this),11*1e3)};q.prototype.$MercuryParticipantFetcher9=function(s,t){__p&&__p();var u=[];s.forEach(function(v){var w=i.tokenize(v),x=w.type,y=w.value;x==="fbid"&&u.push(y)});if(u.length>0){m.getMulti(u,function(v){var w=[];for(var x in v)w.push(r(v[x],x));t(w);if(w.length!==u.length)p.error("server_fetch_participant_count_error",JSON.stringify({expectedIDs:u,receivedIDs:Object.keys(v)}))});p.debug("client_fetch_participants",JSON.stringify({userIDs:u}))}};q.prototype.$MercuryParticipantFetcher10=function(s){this.$MercuryParticipantFetcher4.handleUpdate({participants:s,from_client:false,payload_source:j.SERVER_FETCH_PARTICIPANTS})};function r(s,t){__p&&__p();var u=babelHelpers["extends"]({gender:s.gender,fbid:s.id||t,href:s.uri,id:i.getParticipantIDFromUserID(s.id||t),image_src:s.thumbSrc,name:s.name,short_name:s.firstName,employee:s.employee,is_employee_away:s.is_employee_away,type:s.type,vanity:s.vanity,is_friend:s.is_friend,is_messenger_user:s.is_messenger_user,is_coworker:s.is_coworker},{});if(s.officeStatus){u.officeStatus=s.officeStatus;u.officeStatusEndDate=s.officeStatusEndDate;u.officeStatusComment=s.officeStatusComment;u.officeStatusLocation=s.officeStatusLocation}if(s.timezone||s.timezone===0)u.timezone=s.timezone;if(s.personal_id)u.personal_id=s.personal_id;if(s.work_id)u.work_id=s.work_id;return u}f.exports=q}),null);
__d("MercuryVanityIDMap.bs",["bs_string","bs_js_primitive","MercuryAssert","bs_js_null_undefined"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l={},m={};function n(s){return k.from_opt(i.undefined_to_opt(l[h.lowercase(s)]))}function o(s){return k.from_opt(i.undefined_to_opt(m[s]))}function p(s){var t=m[s];if(t!==undefined)return true;else return false}function q(s){var t=l[h.lowercase(s)];if(t!==undefined)return true;else return false}function r(s,t){j.isParticipantID(t);var u=h.lowercase(s);l[u]=t;m[t]=u;return 0}g.vanityToID=l;g.idToVanity=m;g.getID=n;g.getVanity=o;g.hasID=p;g.hasVanity=q;g.set=r}),null);
__d("MercuryParticipants",["CurrentUser","EventEmitter","ImageSourceRequest","ImageSourceType","ImmutableObject","KeyedCallbackManager","MercuryAssert","MercuryIDs","MercuryParticipantFetcher","MercuryParticipantTypes","MercuryParticipantsConstants","MercuryDispatcher","MercuryVanityIDMap.bs","PhotoResizeModeConst","Set","createObjectFrom","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";__p&&__p();var y="change";function z(B){__p&&__p();this.$MercuryParticipants1=B;this.$MercuryParticipants2=new i();this.$MercuryParticipants3=new m();this.$MercuryParticipants4=new p(this.$MercuryParticipants1);this.$MercuryParticipants5=s.getForFBID(this.$MercuryParticipants1);this.$MercuryParticipants5.subscribe("update-participants",function(C,D){if(D.participants&&D.participants.length>0)this.$MercuryParticipants6(D.participants)}.bind(this));this.$MercuryParticipants5.subscribe("invalidate-global-state",function(){this.$MercuryParticipants7()}.bind(this))}z.prototype.addListener=function(B,C){return this.$MercuryParticipants2.addListener(B,C)};z.prototype.getIDFromVanityOrFBID=function(B){if(!B)return null;if(t.hasVanity(B))return t.getID(B);if(/^\d+$/.test(B))return o.getParticipantIDFromUserID(B);return undefined};z.prototype.getNow=function(B){return this.$MercuryParticipants8(B)};z.prototype.getOrFetch=function(B){var C=this.$MercuryParticipants8(B);if(!C)this.$MercuryParticipants4.fetch(B);return C};z.prototype.get=function(B,C){n.isParticipantID(B);return this.$MercuryParticipants9([B],function(D){C(D[B])})};z.prototype.getMulti=function(B,C){return this.$MercuryParticipants9(B,C)};z.prototype.getBigImageMulti=function(B,C){__p&&__p();var D=arguments.length<=2||arguments[2]===undefined?r.BIG_IMAGE_SIZE:arguments[2];n.allParticipantIDs(B);var E=false,F=this.$MercuryParticipants9(B,function(G){__p&&__p();var H={},I=0,J=new v(),K=function(M,O){I++;H[M]=O;if(I===B.length){if(!E)C(H);if(J.size>0)this.$MercuryParticipants10(J)}}.bind(this),L=function(M,O){var P=this.$MercuryParticipants3.getResource(M);if(!P)return;this.$MercuryParticipants3.setResource(M,l.set(P,{big_image_src:O.uri}));J.add(M);K(M,O.uri)}.bind(this);for(var M in G){var N=G[M];if(!N.big_image_src)new j().setFBID(o.getUserIDFromParticipantID(M)).setType(k.PROFILE_PICTURE).setDimensions(D,D).setResizeMode(u.COVER).setCallback(L.bind(null,M)).send();else K(N.id,N.big_image_src)}}.bind(this));return{remove:function G(){E=true;F.remove()}}};z.prototype.getOrderedBigImageMulti=function(B,C){return this.getBigImageMulti(B,function(D){C(B.map(function(E){return D[E]}))})};z.prototype.$MercuryParticipants9=function(B,C){__p&&__p();n.allParticipantIDs(B);var D=this.$MercuryParticipants3.executeOrEnqueue(B,C),E=this.$MercuryParticipants3.getUnavailableResources(D).filter(function(F){__p&&__p();var G=o.tokenize(F),H=G.type,I=G.value;if(H==="email"){this.$MercuryParticipants11(F,I);return false}if(H==="name"){this.$MercuryParticipants12(F,I);return false}return true}.bind(this));this.$MercuryParticipants4.fetchMulti(E);return this.$MercuryParticipants13(D)};z.prototype.$MercuryParticipants8=function(B){var C=this.$MercuryParticipants3.getResource(B);if(!C){var D=o.tokenize(B),E=D.type,F=D.value;if(E==="email")C=this.$MercuryParticipants11(B,F);if(E==="name")C=this.$MercuryParticipants12(B,F)}return C};z.prototype.$MercuryParticipants11=function(B,C){var D=new l(A(B,C));this.$MercuryParticipants3.setResource(B,D);return D};z.prototype.$MercuryParticipants12=function(B,C){var D=new l({gender:r.UNKNOWN_GENDER,href:null,id:B,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:C,short_name:C,employee:false});this.$MercuryParticipants3.setResource(B,D);return D};z.prototype.$MercuryParticipants10=function(B){this.$MercuryParticipants2.emit(y,B)};z.prototype.$MercuryParticipants6=function(B){var C=B.map(function(D){return D.id});B=B.map(function(D){if(D.vanity)t.set(D.vanity,D.id);var E=this.$MercuryParticipants3.getResource(D.id);return E?l.set(E,D):new l(this.$MercuryParticipants14(D))}.bind(this));this.$MercuryParticipants3.addResourcesAndExecute(w(C,B));this.$MercuryParticipants10(new v(C))};z.prototype.$MercuryParticipants14=function(B){var C=B.type===q.USER||B.type===q.FRIEND;if(!C)return B;if(!B.name&&!B.href&&!B.vanity){var D=x._("Facebook User");B.name=D;B.short_name=D}return B};z.prototype.$MercuryParticipants13=function(B){return{remove:function(){this.$MercuryParticipants3.unsubscribe(B)}.bind(this)}};z.prototype.$MercuryParticipants7=function(){this.$MercuryParticipants3=new m()};function A(B,C){return{gender:r.UNKNOWN_GENDER,href:null,id:B,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:C,short_name:C,employee:false,fbid:undefined,accepts_messenger_user_feedback:undefined,is_business_enabled:undefined,is_messenger_platform_bot:undefined,is_employee_away:undefined,is_friend:undefined,is_messenger_user:undefined,is_verified:undefined,type:undefined,vanity:undefined,timezone:undefined,personal_id:undefined,work_id:undefined}}f.exports=new z(h.getID())}),null);
__d("MercurySyncFakeDFFSender",["Arbiter","ChannelConstants","MercurySingletonProvider","MercurySyncDeltaTypes"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=i.getArbiterType(i.FAKE_DFF);m.getForFBID=function(o){return n.getForFBID(o)};m.get=function(){return n.get()};function m(o){this.$MercurySyncFakeDFFSender1=o}m.prototype.sendGlobalDFF=function(){h.inform(l,{obj:{delta:{"class":k.ForcedFetch},queue:this.$MercurySyncFakeDFFSender1}})};m.prototype.sendThreadDFF=function(o,p){h.inform(l,{obj:{delta:{"class":k.ForcedFetch,threadKey:{otherUserFbId:o,threadFbId:p}},queue:this.$MercurySyncFakeDFFSender1}})};m.prototype.sendMessageDFF=function(o,p,q){h.inform(l,{obj:{delta:{"class":k.ForcedFetch,threadKey:{otherUserFbId:o,threadFbId:p},messageId:q},queue:this.$MercurySyncFakeDFFSender1}})};var n=new j(m);f.exports=m}),null);
__d("MessengerThreadCannotReplyReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d("MercuryThreadInfo",["CurrentUser","MercuryIDs","MessengerThreadCannotReplyReason"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k={canReply:function m(n){return!!(n.is_subscribed&&(n.can_reply===undefined||n.can_reply)&&!n.has_email_participant&&!n.read_only)},getMuteSetting:function m(n){return!n.mute_until?undefined:n.mute_until},isEmptyLocalThread:function m(n){return i.tokenize(n.thread_id).type==="root"&&!n.timestamp},isMuted:function m(n){return k.getMuteSetting(n)!==undefined},areMentionsMuted:function m(n){return n.mentions_mute_mode===1},areReactionsMuted:function m(n){return n.reactions_mute_mode===1},isNewEmptyLocalThread:function m(n){return!!(k.isEmptyLocalThread(n)&&n.participants&&n.participants.length===0)},showComposer:function m(n){return!!(n.is_subscribed&&(n.can_reply||!n.cannot_reply_reason||n.cannot_reply_reason===j.BLOCKED)&&!n.has_email_participant&&!n.read_only)},isColdOpen:function m(n){return!!(n.is_canonical_user&&(n.message_count===0||!n.timestamp))}};function l(m){return m+"@facebook.com"}f.exports=k}),null);
__d("MessagingGiftWrapConstants",[],(function a(b,c,d,e,f,g){"use strict";var h="gift_wrap",i="gift_unwrapped",j="valentines2016";f.exports={TAG_PREFIX:h,UNWRAPPED_TAG:i,VALENTINES_GIFT:j}}),null);
__d("MessagingGiftWrapChecker",["MercuryConfig","MercuryTagHelper","MessagingGiftWrapConstants"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k={shouldRenderWithGiftWrap:function n(o){return!!(o.tags&&l(o.tags)&&!m(o.tags))}};function l(n){return i.get(n,j.TAG_PREFIX)===j.VALENTINES_GIFT}function m(n){return!!i.get(n,j.UNWRAPPED_TAG)}f.exports=k}),null);
__d("MercuryThreads",["ChatReliabilityInstrumentation","EventEmitter","EventReminderConstants","MercuryDisplayTimeFilterMessageRenderer","ImmutableObject","KeyedCallbackManager","LogHistory","Map","MercuryActionType","MercuryAssert","MercuryAttachment","MercuryDispatcher","MercuryGiftSnippetRenderer","MercuryGlobalActionType","MercuryIDs","MercuryLocalIDs","MercuryLoggingHelper","MercuryLogMessageType","MercuryParticipants","MercuryPayloadSource","MercuryServerRequests","MercurySingletonProvider","MercurySyncFakeDFFSender","MercuryThreadInfo","MercuryThreadInformer","MessagingGenericAdminTextType","MessagingGiftWrapChecker","MessagingTag","PageCommItemStatus","Set","emptyFunction","ifRequired","invariant","requireWeak","setImmediate"],(function aa(ba,ca,da,ea,a,fa,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,ga,q,r,ha,ia,ja,ka,la,s,ma,t,na,u,v,w,x,y,z,oa,pa){"use strict";__p&&__p();var A=d.GuestStates,B=new c(),C=h.getInstance("mercury_threads"),D=new w();function E(G){__p&&__p();this.$MercuryThreads1=G;this.$MercuryThreads2=ja.getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=ma.getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=p.getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=m.getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=la.getForFBID(this.$MercuryThreads1);this.$MercuryThreads7=false;this.$MercuryThreads8=new g();this.$MercuryThreads9=new w();this.$MercuryThreads10=false;this.$MercuryThreads11=new w();this.$MercuryThreads12=new w();this.$MercuryThreads13()}E.getForFBID=function(G){return F.getForFBID(G)};E.get=function(){return F.get()};E.prototype.getThreadMetaNow=function(G){k.isThreadID(G);var H=this.$MercuryThreads8.getResource(G);if(H&&!H.participants){b.logERROR("participants are null!",{thread_id:G});this.$MercuryThreads6.sendThreadDFF(null,G);return new f(babelHelpers["extends"]({},H,{participants:[]}))}return H};E.prototype.getOrFetch=function(G){var H=this.getThreadMetaNow(G);if(!H&&!this.$MercuryThreads12.has(G))this.$MercuryThreads11.add(G);if(this.$MercuryThreads11.size>0&&!this.$MercuryThreads10)this.$MercuryThreads14();return H};E.prototype.$MercuryThreads14=function(){__p&&__p();if(this.$MercuryThreads10)return;this.$MercuryThreads10=true;pa(function(){this.$MercuryThreads10=false;this.$MercuryThreads11.forEach(function(G){return this.$MercuryThreads12.add(G)}.bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads11),function(G){for(var H in G)Object.prototype.hasOwnProperty.call(G,H)&&this.$MercuryThreads12["delete"](H)}.bind(this));this.$MercuryThreads11.clear()}.bind(this))};E.prototype.getThreadMeta=function(G,H,I){return this.getMultiThreadMeta([G],function(J){return H(J[G])},I)};E.prototype.getMultiThreadMeta=function(G,H,I){__p&&__p();k.allThreadID(G);var J=this.$MercuryThreads8.executeOrEnqueue(G,H),K=this.$MercuryThreads8.getUnavailableResources(J);if(K.length){var L=[];for(var M=0;M<K.length;M++){var N=K[M],O=p.tokenize(N),P=O.type,Q=O.value;if(P=="user"){var R=p.getParticipantIDFromUserID(Q);this.createNewLocalThread(N,R===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,R])}L.push(N)}if(L.length)this.$MercuryThreads2.fetchThreadData(L,I)}return J};E.addListener=function(G,H){return B.addListener(G,H)};E.prototype.unsubscribe=function(G){this.$MercuryThreads8.unsubscribe(G)};E.prototype.getCanonicalThreadToParticipant=function(G,H,I,J){var K=p.getThreadIDFromParticipantID(G);!!K||z(0);var L=this.$MercuryThreads8.getResource(K);if(L==undefined){L=this.createNewLocalThread(K,this.$MercuryThreads4===G?[this.$MercuryThreads4]:[this.$MercuryThreads4,G],H);!J&&this.$MercuryThreads2.fetchThreadData([K],I)}return L};E.prototype.createNewLocalThread=function(G,H,I){var J=this.$MercuryThreads8.getResource(G);if(!J){var K=p.tokenize(G),L=K.type,M=K.value;J=new f({thread_id:G,participants:Array.from(H),admin_ids:[],name:"",snippet:"",snippet_sender:null,unread_count:I?I:0,message_count:0,image_src:null,timestamp:null,other_user_fbid:L==="user"?M:null,is_canonical_user:L=="user",is_canonical:this.$MercuryThreads15(H),is_subscribed:true,folder:u.INBOX,is_archived:false,is_page_follow_up:false});this.$MercuryThreads8.setResource(G,J)}return J};E.prototype.createNewLocalThreadGenerateID=function(){var G=ga.generateThreadID();this.createNewLocalThread(G,[]);return G};E.prototype.isEmptyLocalThread=function(G){var H=this.$MercuryThreads8.getResource(G);if(!H)return false;return s.isEmptyLocalThread(H)};E.prototype.isNewEmptyLocalThread=function(G){var H=this.$MercuryThreads8.getResource(G);if(!H)return false;return s.isNewEmptyLocalThread(H)};E.prototype.$MercuryThreads16=function(G,H){__p&&__p();if(!G||!G.length)return;var I=new i(),J=new i(),K=new i(),L=[];for(var M=0;M<G.length;M++){var N=G[M],O=N.action_type;if(O==j.LOG_MESSAGE&&N.log_message_type==r.SERVER_ERROR)continue;var P=!H&&!!(N.thread_fbid||N.other_user_fbid||N.is_from_iris),Q=N.thread_id;k.isThreadID(Q);var R=this.$MercuryThreads8.getResource(Q);if(!R&&!P&&O===j.USER_GENERATED_MESSAGE){R=this.$MercuryThreads17(N);if(!R.participants||!R.participants.length){C.debug("missing_local_participants",JSON.stringify(q.obfuscateMessage(N)));b.logERROR("missing_local_participants",{thread_id:Q});R=new f(babelHelpers["extends"]({},R,{participants:[]}));var S=N.other_user_fbid,T=N.thread_fbid;if(S||T)this.$MercuryThreads6.sendThreadDFF(S,T);else continue}this.$MercuryThreads8.setResource(Q,R)}if(!R)continue;if(O==j.LOG_MESSAGE||O==j.USER_GENERATED_MESSAGE)P=!H;if(R.server_timestamp&&N.timestamp<R.server_timestamp&&P)continue;if(R.server_timestamp&&O===j.USER_GENERATED_MESSAGE&&N.offline_threading_id&&N.author!==p.getParticipantIDFromUserID(this.$MercuryThreads1))if(D.has(N.offline_threading_id))continue;else D.add(N.offline_threading_id);if(!K.has(Q))K.set(Q,babelHelpers["extends"]({},R));else C.error("skipping thread metadata update",JSON.stringify({have:K.get(Q),skipped:R}));var U=K.get(Q);!!U||z(0);this.$MercuryThreads18(U,N,H);var V=I.get(Q);if(O==j.USER_GENERATED_MESSAGE&&(!V||N.timestamp>V.timestamp))I.set(Q,N);if((O==j.USER_GENERATED_MESSAGE||O==j.LOG_MESSAGE)&&!N.skip_bump_thread)if(N&&N.timestamp&&(!J.has(Q)||N.timestamp>J.get(Q).timestamp))J.set(Q,N)}K.forEach(function(W,X){__p&&__p();var Y=J.get(X),V=I.get(X);if(V)this.$MercuryThreads19(W,V);else if(Y&&Y.log_message_body){var qa=babelHelpers["extends"]({},Y,{body:Y.log_message_body});this.$MercuryThreads19(W,qa)}var ra=W.timestamp;if(Y){if(Y.timestamp>ra)Object.assign(W,{timestamp:Y.timestamp});var sa=W.server_timestamp;if(!H&&Y.timestamp>sa)W.server_timestamp=Y.timestamp}var Z=new f(W);if((!Z.participants||!Z.participants.length)&&!this.isEmptyLocalThread(Z.thread_id)){var ta=(G||[]).map(q.obfuscateMessage),$={update:q.obfuscateThread(Z),actions:ta};C.error("bad metadata update no_participants",JSON.stringify($));b.logERROR("refusing to set thread metadata with no participants",$);return}this.$MercuryThreads8.setResource(X,Z);L.push(q.obfuscateThread(Z))}.bind(this),this);L.length&&this.$MercuryThreads7&&C.debug("threads_updated",JSON.stringify({threads:L}))};E.prototype.$MercuryThreads18=function(G,H,I){__p&&__p();var J=H.action_type;if(J==j.USER_GENERATED_MESSAGE||J==j.LOG_MESSAGE){if(H.is_unread||H.skip_bump_thread)if(!(G.unread_count===0&&H.skip_bump_thread))if(H.timestamp>G.server_timestamp)G.unread_count++;G.message_count++;G.is_archived=false}switch(J){case j.DELETE_THREAD:G.message_count=0;this.$MercuryThreads20(H.thread_id);break;case j.USER_GENERATED_MESSAGE:if(G.unread_count===0&&H.author===this.$MercuryThreads4&&H.timestamp>=G.last_read_timestamp)G.last_read_timestamp=H.timestamp;if(H.offline_threading_id!==H.message_id)G.last_message_timestamp=H.timestamp;if(H.comm_status!=null)if(G.comm_status&&G.comm_status.toUpperCase()!==v.FOLLOW_UP)G.comm_status=H.comm_status;if(H.creator_info&&H.creator_info.pageID===this.$MercuryThreads1)G.folder=H.folder;this.$MercuryThreads21(G,H.author);break;case j.SEND_MESSAGE:var K=H.log_message_type;if(K==r.THREAD_IMAGE){G.image_src=H.log_message_data.image?H.log_message_data.image.preview_url:null;this.$MercuryThreads22(H.thread_id)}if(K!==r.SUBSCRIBE&&K!==r.UNSUBSCRIBE)G.snippet_attachments=H.attachments;break;case j.LOG_MESSAGE:var K=H.log_message_type;if(K==r.SUBSCRIBE&&!I){this.$MercuryThreads23(G,H.log_message_data.added_participants);this.$MercuryThreads22(H.thread_id)}else if(K==r.UNSUBSCRIBE&&!I){this.$MercuryThreads24(G,H.log_message_data.removed_participants);this.$MercuryThreads22(H.thread_id)}else if(K==r.THREAD_IMAGE){if(!I)G.image_src=H.log_message_data.image?H.log_message_data.image.preview_url:null}else if(K==r.THREAD_NAME){if(G.name!==H.log_message_data.name)this.$MercuryThreads22(H.thread_id);G.name=H.log_message_data.name}else if(K===r.GENERIC_ADMIN_TEXT)this.$MercuryThreads25(G,H);break;case j.CHANGE_READ_STATUS:var L=this.$MercuryThreads26(G,H,H.mark_as_read);if(L)G.last_read_timestamp=G.last_message_timestamp;var M=!G.read_only&&G.folder===u.INBOX;if(L&&I)this.$MercuryThreads2.changeThreadReadStatus(G.thread_id,H.mark_as_read,H.source,G.last_read_timestamp,M,G.last_message_type);break;case j.CHANGE_ARCHIVED_STATUS:if(G.is_archived!=H.archived){G.is_archived=H.archived;if(G.comm_status!=null)G.comm_status=H.archived?v.DONE:v.TODO;this.$MercuryThreads22(H.thread_id)}break;case j.CHANGE_PAGE_FOLLOW_UP_STATUS:if(G.is_page_follow_up!=H.is_page_follow_up){G.is_page_follow_up=H.is_page_follow_up;this.$MercuryThreads22(H.thread_id)}break;case j.CHANGE_FOLDER:if(G.folder!=H.new_folder){G.folder=H.new_folder;if(G.comm_status!=null)if(H.new_folder===u.OTHER)G.comm_status=v.SPAM;else if(H.new_folder===u.INBOX)G.comm_status=v.TODO;this.$MercuryThreads22(H.thread_id)}break;case j.DELETE_MESSAGES:if(I){G.snippet="...";G.snippet_attachments=null;G.snippet_sender=null;this.$MercuryThreads22(H.thread_id)}else if(H.message_ids){G.message_count-=H.message_ids.length;y("MercuryMessages",function(Q){__p&&__p();Q=Q.getForFBID(this.$MercuryThreads1);for(var R=H.message_ids,S=Array.isArray(R),T=0,R=S?R:R[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var U;if(S){if(T>=R.length)break;U=R[T++]}else{T=R.next();if(T.done)break;U=T.value}var V=U,W=Q.getMessagesFromIDs([V]),X=W[0];if(X&&X.timestamp>G.last_read_timestamp)G.unread_count=Math.max(0,G.unread_count-1)}this.$MercuryThreads22(H.thread_id)}.bind(this),x)}break;case j.UPDATE_SNIPPET:y("MercuryMessages",function(Q){__p&&__p();Q=Q.getForFBID(this.$MercuryThreads1);var R=0,S=1,T=Q.getThreadMessagesRangeNow(H.thread_id,R,S),U=T[0];if(U){G.snippet=U.body;G.snippet_attachments=U.attachments;G.snippet_sender=U.author}else{G.snippet="...";G.snippet_attachments=null;G.snippet_sender=null;Q.getThreadMessagesRange(H.thread_id,R,S,function(V){if(V.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:H.thread_id,action_type:j.UPDATE_SNIPPET,deleted_ids:H.deleted_ids}]})}.bind(this))}this.$MercuryThreads22(H.thread_id)}.bind(this),x);break;case j.CHANGE_MUTE_SETTINGS:if(Object.prototype.hasOwnProperty.call(H,"reactions_mute_mode"))G.reactions_mute_mode=H.reactions_mute_mode;else if(Object.prototype.hasOwnProperty.call(H,"mentions_mute_mode"))G.mentions_mute_mode=H.mentions_mute_mode;else G.mute_until=!H.mute_until?undefined:H.mute_until;this.$MercuryThreads22(G.thread_id);break;case j.BLOCK_STATUS_CHANGED:G.can_reply=H.canViewerReply;this.$MercuryThreads22(G.thread_id);break;case j.ADD_PARTICIPANTS:this.$MercuryThreads23(G,H.participants);this.$MercuryThreads22(G.thread_id);break;case j.CHANGE_FLAG:this.$MercuryThreads27(G,H.mark_as_flag);this.$MercuryThreads22(G.thread_id);break;case j.MOVE_PENDING_TO_INBOX:this.$MercuryThreads28(G);this.$MercuryThreads22(G.thread_id);break;case j.UPDATE_CUSTOM_LIKE:G.custom_like_icon=H.custom_like;this.$MercuryThreads22(G.thread_id);break;case j.ADD_GROUP_ADMINS:G.admin_ids=G.admin_ids.concat(H.added_admin_ids.filter(function(Q){return G.admin_ids.indexOf(Q)===-1}));this.$MercuryThreads22(H.thread_id);break;case j.REMOVE_GROUP_ADMINS:G.admin_ids=G.admin_ids.filter(function(Q){return H.removed_admin_ids.indexOf(Q)===-1});this.$MercuryThreads22(H.thread_id);break;case j.JOINABLE_MODE:G.joinable_mode=H.joinable_mode;this.$MercuryThreads22(H.thread_id);break;case j.APPROVAL_MODE:G.approval_mode=H.approval_mode;this.$MercuryThreads22(H.thread_id);break;case j.APPROVAL_QUEUE:if(H.added_id&&G.approval_queue_ids&&G.approval_queue_ids.indexOf(H.added_id)===-1)G.approval_queue_ids=G.approval_queue_ids.concat(H.added_id);if(H.removed_id&&G.approval_queue_ids)G.approval_queue_ids=G.approval_queue_ids.filter(function(Q){return H.removed_id!==Q});this.$MercuryThreads22(H.thread_id);break;case j.IS_PIN_PROTECTED:G.is_pin_protected=H.is_pin_protected;this.$MercuryThreads22(H.thread_id);break;case j.UPDATE_RTC_CALL_DATA:var N=H.initiator_fbid||(G.rtc_call_data?G.rtc_call_data.initiator_fbid:undefined);G.rtc_call_data=new f({call_state:H.call_state,server_info_data:H.server_info_data,initiator_fbid:N});this.$MercuryThreads22(H.thread_id);break;case j.UPDATE_COMM_STATUS:this.$MercuryThreads29(G,H.comm_status);this.$MercuryThreads22(G.thread_id);break;case j.UPDATE_COMM_ITEM_OWNER:var O=void 0;if(H.id===null)O={nodes:[]};else O={nodes:[{admin:{id:H.id,name:H.name,profile_picture:{uri:H.profile_pic_uri}}}]};G.comm_item_owners=O;this.$MercuryThreads22(G.thread_id);break;case j.EVENT_RSVP_CHANGED:var P=G.participants_event_status.filter(function(Q){return Q.participant_id!==H.actor_fbid});P.push({participant_id:H.actor_fbid.toString(),event_status:H.rsvp_status});G.participants_event_status=P;this.$MercuryThreads22(H.thread_id);break}};E.prototype.$MercuryThreads25=function(G,H){__p&&__p();var I,J=this;if(H.log_message_data&&H.log_message_data.untypedData)(function(){__p&&__p();var K=H.log_message_data.untypedData,event=G.lightweight_event;switch(H.log_message_data.message_type){case t.THREAD_EPHEMERAL_SEND_MODE:var L=parseInt(K.ttl,10);if(L!==null&&G.ephemeral_ttl_mode!==L){G.ephemeral_ttl_mode=L;J.$MercuryThreads22(H.thread_id)}break;case t.CHANGE_THREAD_NICKNAME:var M={};for(var N in G.custom_nickname){if(N==K.participant_id&&K.nickname.trim().length==0)continue;M[N]=G.custom_nickname[N]}if(K.nickname.trim().length>0)M[K.participant_id]=K.nickname;G.custom_nickname=M;J.$MercuryThreads22(H.thread_id);break;case t.CHANGE_THREAD_ICON:oa("MercuryThreadActions",function(R){R.getForFBID(this.$MercuryThreads1).updateCustomLike(H.thread_id,K.thread_icon)}.bind(J));break;case t.CHANGE_THREAD_THEME:var O=K.theme_color;if(O&&O.length>0)G.custom_color="#".concat(O.substring(2));else G.custom_color=null;J.$MercuryThreads22(H.thread_id);break;case t.LIGHTWEIGHT_EVENT_CREATE:var P={};G.participants.map(function(R){var S=p.getUserIDFromParticipantID(R);if(S)P[S]=S===K.event_creator_id?A.GOING:A.INVITED},J);G.lightweight_event={track_rsvp:K.event_track_rsvp,title:K.event_title,event_time:parseInt(K.event_time,10),location_name:K.event_location_name,event_members:P,oid:K.event_id,event_type:K.event_type};J.$MercuryThreads22(H.thread_id);break;case t.LIGHTWEIGHT_EVENT_UPDATE:case t.LIGHTWEIGHT_EVENT_UPDATE_TIME:case t.LIGHTWEIGHT_EVENT_UPDATE_TITLE:case t.LIGHTWEIGHT_EVENT_UPDATE_LOCATION:if(event)G.lightweight_event=J.$MercuryThreads30(K,event,event.event_members);J.$MercuryThreads22(H.thread_id);break;case t.LIGHTWEIGHT_EVENT_RSVP:if(event&&event.event_members){var Q=J.$MercuryThreads31(event.event_members,K);G.lightweight_event=J.$MercuryThreads30(K,event,Q)}J.$MercuryThreads22(H.thread_id);break;case t.LIGHTWEIGHT_EVENT_DELETE:case t.LIGHTWEIGHT_EVENT_NOTIFY:G.lightweight_event=null;J.$MercuryThreads22(H.thread_id);break}})()};E.prototype.$MercuryThreads31=function(G,H){var I={};for(var J in G)I[J]=G[J];I[H.guest_id]=H.guest_status;return I};E.prototype.$MercuryThreads30=function(G,event,H){return{track_rsvp:event.track_rsvp,title:G.event_title===undefined?event.title:G.event_title,event_time:G.event_time===undefined?event.event_time:parseInt(G.event_time,10),location_name:G.event_location_name===undefined?event.location_name:G.event_location_name,event_members:H===undefined?event.event_members:H,oid:event.oid,event_type:event.event_type}};E.prototype.$MercuryThreads17=function(G){var H=p.tokenize(G.thread_id),I=H.type,J=H.value,K=I==="user",L=K||G.specific_to_list&&this.$MercuryThreads15(G.specific_to_list),M=L||K?this.$MercuryThreads32(G):G.specific_to_list;return new f({thread_id:G.thread_id,participants:M,name:null,snippet:G.body,snippet_attachments:[],snippet_sender:G.author,unread_count:0,message_count:0,image_src:null,timestamp:G.timestamp,other_user_fbid:K?J:null,is_canonical_user:K,is_canonical:L,is_subscribed:true,folder:u.INBOX,is_archived:false,is_page_follow_up:false})};E.prototype.$MercuryThreads26=function(G,H,I){__p&&__p();if(H.timestamp)this.$MercuryThreads33(G.thread_id,I,H.timestamp);if(!G||!G.thread_id||!G.participants)return false;if(!G.timestamp){this.$MercuryThreads9.add(G.thread_id);return false}var J=!G.unread_count;if(I==J)return false;G.unread_count=I?0:1;this.$MercuryThreads22(G.thread_id);return true};E.prototype.$MercuryThreads34=function(G){var H=this.$MercuryThreads8.getAllResources();for(var I in H)if(Object.prototype.hasOwnProperty.call(H,I)){var J=H[I];if(J.folder==G){this.$MercuryThreads8.setResource(I,f.setProperty(J,"unread_count",0));this.$MercuryThreads22(I)}}};E.prototype.$MercuryThreads23=function(G,H){__p&&__p();var I=new w(G.participants);G.participants=Array.from(G.participants||[]);H.forEach(function(J){if(!I.has(J)){G.participants.push(J);if(J===this.$MercuryThreads4){G.is_subscribed=true;G.can_reply=true;G.cannot_reply_reason=null;this.$MercuryThreads6.sendThreadDFF(undefined,G.thread_fbid)}}}.bind(this))};E.prototype.$MercuryThreads24=function(G,H){__p&&__p();var I=new w(H);if(G&&!G.participants)b.logERROR("participants are null in thread_info!",{thread_info:G});else G.participants=G.participants.filter(function(J){return!I.has(J)});if(G&&!G.admin_ids)b.logERROR("admin_ids are null in thread_info!",{thread_info:G});else G.admin_ids=G.admin_ids.filter(function(J){return!I.has(J)});if(I.has(this.$MercuryThreads4))G.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([G.thread_id])};E.prototype.$MercuryThreads21=function(G,H){if(!G.participants){var I=JSON.stringify({thread_info:G,participant:H});C.error("missing_participants",I);return}var J=G.participants.indexOf(H);if(J>0)G.participants=[H].concat(G.participants.slice(0,J),G.participants.slice(J+1))};E.prototype.$MercuryThreads19=function(G,H){__p&&__p();var I=H.body,J=H.subject,K="";if(J){J=J.toLowerCase();if(I.slice(0,J.length).toLowerCase()==J)K=I;else if(I)K=J+" \xb7 "+I;else K=J}else K=I;if(H.is_filtered_content)K=e.renderFilteredContent(H);if(na.shouldRenderWithGiftWrap(H)){var L=H.author,M=L==this.$MercuryThreads4,N=null;if(!M){N=G.custom_nickname&&G.custom_nickname[p.getUserIDFromParticipantID(L)];if(!N){var O=ha.getNow(L);if(O!=null)N=O.short_name}}K=n.renderText(M,N)}G.snippet=K;if(H.raw_attachments&&H.raw_attachments.length>0){var P=l.convertRaw(H.raw_attachments);G.snippet_attachments=P}else G.snippet_attachments=H.attachments;if(H.log_message_type)G.snippet_sender=null;else G.snippet_sender=H.author};E.prototype.$MercuryThreads27=function(G,H){G.page_thread_info=babelHelpers["extends"]({},G.page_thread_info,{flagged:H})};E.prototype.$MercuryThreads29=function(G,H){G.comm_status=H};E.prototype.$MercuryThreads28=function(G){if(G.folder!==u.PENDING)return;G.folder=u.INBOX};E.prototype.$MercuryThreads15=function(G){return G.filter(function(H){return H!=this.$MercuryThreads4}.bind(this)).length<=1};E.prototype.$MercuryThreads13=function(){__p&&__p();this.$MercuryThreads5.subscribe("invalidate-thread-state",function(G,H){return this.$MercuryThreads35(H)}.bind(this));this.$MercuryThreads5.subscribe("invalidate-global-state",function(G,H){return this.$MercuryThreads36()}.bind(this));this.$MercuryThreads5.subscribe("update-threads",function(G,H){__p&&__p();var I=(H.actions||[]).filter(function(J){return J.thread_id});if(H.threads&&H.payload_source==ia.SERVER_FETCH_THREAD_INFO)H.threads.forEach(function(J){var K=J.thread_id;if(this.$MercuryThreads9.has(K)){this.$MercuryThreads9["delete"](K);if(J.unread_count)this.$MercuryThreads2.changeThreadReadStatus(J.thread_id,true)}}.bind(this));this.$MercuryThreads37(H.threads);this.$MercuryThreads16(I,H.from_client);H.threads&&H.threads.forEach(function(J){this.$MercuryThreads22(J.thread_id)}.bind(this));if(H.global_actions)H.global_actions.forEach(function(J){if(J.action_type==o.MARK_ALL_READ)this.$MercuryThreads34(J.folder)}.bind(this));if(this.$MercuryThreads7){this.$MercuryThreads7=false;B.emit("change")}}.bind(this))};E.prototype.$MercuryThreads37=function(G){if(!G||!G.length)return;var H={},I=[];G.forEach(function(J){var K=new f(J);H[J.thread_id]=K;I.push(q.obfuscateThread(K))});I.length&&C.debug("threads_added",JSON.stringify({threads:I}));this.$MercuryThreads8.addResourcesAndExecute(H)};E.prototype.$MercuryThreads22=function(G){this.$MercuryThreads7=true;this.$MercuryThreads3.updatedThread(G)};E.prototype.$MercuryThreads20=function(G){this.$MercuryThreads7=true;this.$MercuryThreads3.deletedThread(G)};E.prototype.$MercuryThreads33=function(G,H,I){this.$MercuryThreads7=true;this.$MercuryThreads3.changedThreadReadState(G,H,I)};E.prototype.$MercuryThreads35=function(G){this.$MercuryThreads8.setResource(G,undefined)};E.prototype.$MercuryThreads36=function(){this.$MercuryThreads7=false;this.$MercuryThreads8=new g();this.$MercuryThreads9=new w();this.$MercuryThreads10=false;this.$MercuryThreads11=new w();this.$MercuryThreads12=new w()};E.prototype.$MercuryThreads32=function(G){if(G.specific_to_list)return G.specific_to_list;var H=p.tokenize(G.thread_id),I=H.type,J=H.value;if(!J||I!=="user")return[this.$MercuryThreads4];return[p.getParticipantIDFromUserID(J),this.$MercuryThreads4]};var F=new ka(E);a.exports=E}),null);
__d("ChatSidebarComposeLink.react",["ChatOpenTabEventLogger","FantaTabActions","Link.react","React","TooltipData","fbt","MercuryThreads"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n,o,p=c("MercuryThreads").get();n=babelHelpers.inherits(q,k.Component);o=n&&n.prototype;function q(r){o.constructor.call(this,r)}q.prototype.render=function(){var r=m._("New Message");return k.createElement(j,babelHelpers["extends"]({className:this.props.className,href:"#",onClick:this.$ChatSidebarComposeLink1},l.propsFor(r,"below")))};q.prototype.$ChatSidebarComposeLink1=function(r){var s=p.createNewLocalThreadGenerateID();i.openTab(s,"compose_link");h.logClickOpen("sidebar",s);r.preventDefault()};f.exports=q}),null);
__d("ChatSidebarDropdownConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({SOUND:"sound",ADVANCED_SETTINGS:"advanced_settings",BLOCK_SETTINGS:"block_settings",TURN_OFF_DIALOG:"turn_off_dialog",CLOSE_ALL_TABS:"close_all_tabs",LOWER_ALL_TABS:"lower_all_tabs",TOGGLE_DISCOVER_BOTS:"toggle_discover_bots",SIDEBAR:"sidebar",HIDE_GROUPS:"hide_groups",ONLINE:"online",VIDEOCALL_ON:"videoon",VIDEOCALL_OFF:"videooff",PAUSE:"pause",SHOW_APPS:"show_apps",HIDE_APPS:"hide_apps",SHOW_TICKER:"show_ticker",HIDE_TICKER:"hide_ticker",HIDE_ADMINED_PAGES:"hide_admined_pages",HIDE_BUSINESSES:"hide_businesses",EMOJI_SETTINGS:"emoji_settings"});f.exports=h}),null);
__d("ConversationNubTabStateListStorage",[],(function a(b,c,d,e,f,g){"use strict";function h(){this.$ConversationNubTabStateListStorage1=[]}h.prototype.modify=function(i){this.$ConversationNubTabStateListStorage1=i(this.$ConversationNubTabStateListStorage1)};h.prototype.getData=function(){return this.$ConversationNubTabStateListStorage1};f.exports=h}),null);
__d("differenceSets",["filterSet"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];return h(j,function(n){return!l.some(function(o){return o.has(n)})})}f.exports=i}),null);
__d("ConversationNubTabStateList",["ConversationNubTabStateListStorage","Set","differenceSets","invariant"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(){this.$ConversationNubTabStateList2=new i();this.$ConversationNubTabStateList1=new h()}l.prototype.modifyTabState=function(m,n){this.modifyTabs(function(o){var p=o.findIndex(function(q){return q.tabID===m});p!==-1||k(0);n(o[p]);return o})};l.prototype.$ConversationNubTabStateList3=function(m){return new i(m.map(function(n){return n.tabID}))};l.prototype.modifyTabs=function(m){try{this.$ConversationNubTabStateList1.modify(function(n){var o=this.$ConversationNubTabStateList3(n),p=m(n),q=this.$ConversationNubTabStateList3(p);this.$ConversationNubTabStateList2=j(o,q);return p}.bind(this))}finally{this.$ConversationNubTabStateList2=new i()}};l.prototype.getTabs=function(){return this.$ConversationNubTabStateList1.getData()};l.prototype.getTabState=function(m){var n=this.getTabStateIfExists(m);n||k(0);return n};l.prototype.getTabStateIfExists=function(m){return this.getTabs().find(function(n){return n.tabID===m})};l.prototype.push=function(){for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];this.modifyTabs(function(p){n.forEach(function(q){if(p.find(function(r){return r.tabID===q.tabID}))k(0);else p.push(q)});return p})};l.prototype.remove=function(m){this.modifyTabs(function(n){var o=n.findIndex(function(p){return p.tabID===m});if(o!==-1)n.splice(o,1);return n})};f.exports=l}),null);
__d("ConversationNubTabState",["ConversationNubTabStateList","invariant"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=12;function k(){this.$ConversationNubTabStateClass1=Object.create(null);this.$ConversationNubTabStateClass2=new h();this.$ConversationNubTabStateClass3=Infinity}k.prototype.anyTabHasFocus=function(){return this.getUnsortedLoadedTabs().some(function(l){return l.getIsFocused()})};k.prototype.anyTabHasText=function(){return this.getUnsortedLoadedTabs().some(function(l){return l.getHasText()})};k.prototype.getTabState=function(l){return this.$ConversationNubTabStateClass2.getTabState(l)};k.prototype.getTabStateIfExists=function(l){return this.$ConversationNubTabStateClass2.getTabStateIfExists(l)};k.prototype.getUnloadedTabs=function(){var l=this.$ConversationNubTabStateClass2.getTabs().filter(function(m){return!this.getLoadedTab(m.tabID)}.bind(this));return l};k.prototype.setMaxDockTabs=function(l){this.$ConversationNubTabStateClass3=l};k.prototype.getNumDockTabs=function(){var l=this.$ConversationNubTabStateClass3,m=this.getTotalTabCount();return Math.min(l,m)};k.prototype.getNumMenuTabs=function(){return this.getTotalTabCount()-this.getNumDockTabs()};k.prototype.addTabState=function(l){this.$ConversationNubTabStateClass2.push(l)};k.prototype.addLoadedTab=function(l,m){var n=this.getTabState(l);if(!n)return;var o=this.getLoadedTab(l);if(o)return;this.$ConversationNubTabStateClass1[l]=m;this.$ConversationNubTabStateClass4()};k.prototype.getLoadedTab=function(l){return this.$ConversationNubTabStateClass1[l]};k.prototype.getLoadedTabByFeedbackTarget=function(l){return this.getLoadedTabs().find(function(m){return m.getPersistentState().ftID===l})};k.prototype.isTabInDock=function(l){var m=this.getLoadedTab(l);if(!m)return false;var n=this.$ConversationNubTabStateClass5(m);return 0<=n&&n<this.getNumDockTabs()};k.prototype.clearTabNotifications=function(l){this.$ConversationNubTabStateClass2.modifyTabState(l,function(m){m.unseenCommentsSinceLastCleared={};m.hasFakeInitBadge=false;m.badgeCount=0;m.isBlinkingUnread=false})};k.prototype.deleteTab=function(l){var m=this.getLoadedTab(l);if(m){delete this.$ConversationNubTabStateClass1[l];m.destroy()}this.$ConversationNubTabStateClass2.remove(l);return Boolean(m)};k.prototype.deleteAllTabs=function(){this.getUnsortedLoadedTabs().forEach(function(l){return this.deleteTab(l.getTabID())}.bind(this))};k.prototype.modifyTabState=function(l,m){return this.$ConversationNubTabStateClass2.modifyTabState(l,m)};k.prototype.moveTabToDockLeft=function(l){__p&&__p();var m=this.getLoadedTab(l);if(!m)return;this.$ConversationNubTabStateClass2.modifyTabs(function(n){__p&&__p();var o=n.findIndex(function(m){return m.tabID===l});o!==-1||i(0);var p=n[o],q=this.$ConversationNubTabStateClass5(m),r=this.getLoadedTabs().length,s=this.getNumDockTabs();if(q<0||r===0)return n;else if(s===0){if(q!==0){n.splice(o,1);n.unshift(p)}return n}var t=s-1;if(q===t)return n;n.splice(o,1);if(q<t)t-=1;var u=this.getLoadedTabs()[t],v=this.getTabState(u.getTabID());v||i(0);var w=n.findIndex(function(m){return m.tabID===v.tabID});n.splice(w,0,p);return n}.bind(this))};k.prototype.getLoadedTabs=function(){var l=this.$ConversationNubTabStateClass2.getTabs().map(function(m){return this.getLoadedTab(m.tabID)}.bind(this)).filter(Boolean);return l};k.prototype.getUnsortedLoadedTabs=function(){var l=Object.values(this.$ConversationNubTabStateClass1);return l};k.prototype.getTotalTabCount=function(){return this.getUnsortedLoadedTabs().length};k.prototype.getTabsForDockOldestFirst=function(){return this.getLoadedTabs().slice(0,this.getNumDockTabs())};k.prototype.getTabsForDockNewestFirst=function(){return this.getTabsForDockOldestFirst().slice().reverse()};k.prototype.getTabsForMenuOldestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs())};k.prototype.getTabsForMenuNewestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs()).reverse()};k.prototype.$ConversationNubTabStateClass4=function(){var l=this.getLoadedTabs().length;if(l>j){var m=l-j,n=this.getTabsForMenuOldestFirst().slice(0,m);n.map(function(o){return o.getTabID()}).forEach(function(o){return this.deleteTab(o)}.bind(this))}};k.prototype.$ConversationNubTabStateClass5=function(l){return this.getLoadedTabs().indexOf(l)};f.exports=new k()}),null);
__d("ConversationNub",["Arbiter","ConversationNubHeader","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","CSS","DOM","EventListener","NotificationUserActions","SubscriptionsHandler","UFIComposerIsTypingStore","URI","containsNode","csx","cx","debounce","guid"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";__p&&__p();var y=k.minimizeAndInformTabUpdate,z=k.popOutAndInformTabUpdate,A=j,B=10,C=500,D=100;E.createDefaultState=function(F,G,H,I,J,K){return{tabID:F,permalinkURI:G?new s(G):null,ftID:H,notifAlertID:I,notificationType:J,title:K,keepAtBottom:false,isTabRaised:false,isBlinkingUnread:false,badgeCount:0,allSeenNewComments:{},unseenCommentsSinceLastCleared:{},hasFakeInitBadge:false}};function E(F,G,H,I){__p&&__p();var J=arguments.length<=4||arguments[4]===undefined?false:arguments[4],K=arguments.length<=5||arguments[5]===undefined?false:arguments[5];this.$ConversationNub13=false;this.$ConversationNub14=false;this.$ConversationNub1=F;this.$ConversationNub12=G;this.$ConversationNub5=x();this.$ConversationNub7=null;this.$ConversationNub8=false;this.$ConversationNub9=null;this.$ConversationNub10=J;this.$ConversationNub11=K;this.$ConversationNub15=I;this.$ConversationNub6=new q();this.$ConversationNub16();this.$ConversationNub17();if(H!=null)A.modifyTabState(this.$ConversationNub12,function(L){if(H)L.hasFakeInitBadge=false;else{L.hasFakeInitBadge=true;this.$ConversationNub18(1);this.$ConversationNub19(true)}}.bind(this));this.$ConversationNub20()}E.prototype.$ConversationNub20=function(){this.$ConversationNub21();this.$ConversationNub22();l.informShouldRecheckTabVisibility(this);this.forceReflow()};E.prototype.getPersistentState=function(){return A.getTabState(this.$ConversationNub12)};E.prototype.getPersistentStateIfExists=function(){return A.getTabStateIfExists(this.$ConversationNub12)};E.prototype.$ConversationNub16=function(){__p&&__p();var F=this.$ConversationNub23();if(F){this.$ConversationNub6.addSubscriptions(o.listen(F,"click",this.$ConversationNub24.bind(this)),o.listen(F,"mouseenter",this.$ConversationNub25.bind(this)),o.listen(F,"mouseleave",this.$ConversationNub26.bind(this)));var G=l.getCloseButtonElem(F);if(G)l.addCloseButtonListeners(G,this.$ConversationNub6,this.$ConversationNub27.bind(this))}var H=this.$ConversationNub28();if(H){A.modifyTabState(this.$ConversationNub12,function(J){J.keepAtBottom=true});this.$ConversationNub6.addSubscriptions(o.listen(H,"scroll",w(this.$ConversationNub29.bind(this),D)),h.subscribe("reflow",this.$ConversationNub30.bind(this)))}var I=this.$ConversationNub31();if(I)this.$ConversationNub6.addSubscriptions(o.listen(I,"focusin",this.$ConversationNub32.bind(this,true)),o.listen(I,"focusout",this.$ConversationNub32.bind(this,false)))};E.prototype.$ConversationNub17=function(){__p&&__p();var F=this.$ConversationNub33();if(!F){this.$ConversationNub2=null;return}var G=function(){var I=this.getPersistentState();return{permalinkURI:I.permalinkURI,ftID:I.ftID,tabID:I.tabID}}.bind(this),H=new i(F,G);this.$ConversationNub6.addSubscriptions(H.subscribe("closeButton",this.$ConversationNub27.bind(this)),H.subscribe("showMenu",this.$ConversationNub34.bind(this)),H.subscribe("hideMenu",this.$ConversationNub35.bind(this)),H.subscribe("minimizeButton",this.$ConversationNub36.bind(this,true)),H.subscribe("clickHeader",this.$ConversationNub36.bind(this,true)),H.subscribe("menuPermalinkClick",this.$ConversationNub36.bind(this,false)),r.addListener(function(){var I=this.getPersistentStateIfExists();if(!I)return;var J=this.$ConversationNub14,K=r.getValueFor(I.ftID);this.$ConversationNub14=K===true;if(J!==this.$ConversationNub14)k.informTabsUpdated()}.bind(this)));this.$ConversationNub2=H};E.prototype.$ConversationNub33=function(){return this.$ConversationNub1&&n.scry(this.$ConversationNub1,".fbNubFlyoutTitlebar")[0]};E.prototype.$ConversationNub23=function(){return this.$ConversationNub1&&n.scry(this.$ConversationNub1,".fbNubButton")[0]};E.prototype.$ConversationNub28=function(){if(!this.$ConversationNub3&&this.$ConversationNub1)this.$ConversationNub3=n.scry(this.$ConversationNub1,".uiScrollableAreaWrap")[0];return this.$ConversationNub3};E.prototype.$ConversationNub31=function(){if(!this.$ConversationNub4&&this.$ConversationNub1)this.$ConversationNub4=n.scry(this.$ConversationNub1,".fbNubFlyoutBodyContent")[0];return this.$ConversationNub4};E.prototype.$ConversationNub37=function(){var F=this.$ConversationNub23();if(F)return n.scry(F,"._37op")[0];return null};E.prototype.$ConversationNub27=function(){l.informShouldCloseTab(this.$ConversationNub12,this.getFeedbackTargetID(),l.CLOSE_REASON_TAB_X_OUT)};E.prototype.$ConversationNub36=function(F){y(this,F)};E.prototype.$ConversationNub34=function(){this.$ConversationNub1&&m.addClass(this.$ConversationNub1,"_1uw3")};E.prototype.$ConversationNub35=function(){this.$ConversationNub1&&m.removeClass(this.$ConversationNub1,"_1uw3")};E.prototype.$ConversationNub24=function(){if(this.getPersistentState().isTabRaised)y(this,true);else z(this,true)};E.prototype.$ConversationNub25=function(){if(this.getPersistentState().isBlinkingUnread)this.$ConversationNub9=new Date()};E.prototype.$ConversationNub26=function(){var F=this.$ConversationNub9;if(F&&this.getPersistentState().isBlinkingUnread){var G=new Date();if(G-F>=C)this.$ConversationNub19(false)}this.$ConversationNub9=null};E.prototype.$ConversationNub38=function(){var F=this.$ConversationNub28();if(F){var G=F.scrollHeight;if(G>0&&!this.$ConversationNub39(F)){this.$ConversationNub8=true;F.scrollTop=G}}};E.prototype.$ConversationNub39=function(F){F=F||this.$ConversationNub28();return!!(F&&F.scrollTop>=F.scrollHeight-F.clientHeight-B)};E.prototype.$ConversationNub29=function(){if(!A.getTabStateIfExists(this.$ConversationNub12)||!this.getPersistentState().isTabRaised)return;A.modifyTabState(this.$ConversationNub12,function(F){F.keepAtBottom=this.$ConversationNub39();l.informShouldRecheckTabVisibility(this)}.bind(this));if(!this.$ConversationNub8)this.clearJewelNotifications();this.$ConversationNub8=false};E.prototype.$ConversationNub32=function(F){if(this.$ConversationNub13===F)return;this.$ConversationNub13=F;if(this.$ConversationNub13)this.clearJewelNotifications();k.informTabsUpdated()};E.prototype.getIsFocused=function(){return this.$ConversationNub13};E.prototype.getPageID=function(){return this.$ConversationNub15};E.prototype.getHasText=function(){return this.$ConversationNub14};E.prototype.$ConversationNub30=function(){__p&&__p();var F=this.getPersistentState();if(!F.isTabRaised)return;if(F.keepAtBottom){this.$ConversationNub38();this.$ConversationNub7&&clearTimeout(this.$ConversationNub7);this.$ConversationNub7=setTimeout(function(){if(F.keepAtBottom)this.$ConversationNub38()}.bind(this),100)}};E.prototype.$ConversationNub18=function(F){A.modifyTabState(this.$ConversationNub12,function(G){G.badgeCount=F;this.$ConversationNub21()}.bind(this))};E.prototype.$ConversationNub19=function(F){A.modifyTabState(this.$ConversationNub12,function(G){G.isBlinkingUnread=F;this.$ConversationNub22()}.bind(this))};E.prototype.$ConversationNub21=function(){__p&&__p();var F=this.$ConversationNub37();if(!F)return;var G=this.getPersistentState().badgeCount,H=G>0;if(H){n.setContent(F,G);m.show(F)}else{m.hide(F);n.setContent(F,G)}};E.prototype.$ConversationNub22=function(){if(this.$ConversationNub1){var F=this.getPersistentState().isBlinkingUnread;if(this.$ConversationNub1)m.conditionClass(this.$ConversationNub1,"_53tf",F)}};E.prototype.getRootDOM=function(){return this.$ConversationNub1};E.prototype.getShouldShowIntroNux=function(){return this.$ConversationNub10};E.prototype.getShouldShowHideNux=function(){return this.$ConversationNub11};E.prototype.getTabID=function(){return this.$ConversationNub12};E.prototype.getNotificationPayloadAlertID=function(){return this.getPersistentState().notifAlertID};E.prototype.getNotificationType=function(){return this.getPersistentState().notificationType};E.prototype.setNotificationType=function(F){A.modifyTabState(this.$ConversationNub12,function(G){G.notificationType=F})};E.prototype.getFeedbackTargetID=function(){return this.getPersistentState().ftID};E.prototype.getPermalinkURI=function(){return this.getPersistentState().permalinkURI};E.prototype.getTitle=function(){return this.getPersistentState().title};E.prototype.getBadgeCount=function(){return this.getPersistentState().badgeCount};E.prototype.getIsRaised=function(){return this.getPersistentState().isTabRaised};E.prototype.getSessionID=function(){return this.$ConversationNub5};E.prototype.markCommentsAsSeenWithoutBadging=function(F){A.modifyTabState(this.$ConversationNub12,function(G){F.forEach(function(H){G.allSeenNewComments[H]=true})})};E.prototype.attemptAddNewCommentsToBadge=function(F){__p&&__p();A.modifyTabState(this.$ConversationNub12,function(G){__p&&__p();F.forEach(function(J){if(G.allSeenNewComments[J])return;G.allSeenNewComments[J]=true;G.unseenCommentsSinceLastCleared[J]=true});var H=Object.keys(G.unseenCommentsSinceLastCleared).length;if(G.hasFakeInitBadge)H+=1;var I=G.badgeCount;this.$ConversationNub18(H);this.$ConversationNub19(H>0&&H>I)}.bind(this))};E.prototype.clearBadge=function(){A.clearTabNotifications(this.$ConversationNub12);this.$ConversationNub21();this.$ConversationNub22()};E.prototype.clearJewelNotifications=function(){var F=this.getNotificationPayloadAlertID();if(F)p.markNotificationsAsRead([F])};E.prototype.popOutAndInformTabUpdate=function(){this.popOut();k.informTabsUpdated()};E.prototype.popOut=function(){A.modifyTabState(this.$ConversationNub12,function(F){if(this.$ConversationNub1)m.addClass(this.$ConversationNub1,"_5r93");F.isTabRaised=true;this.clearBadge();if(F.keepAtBottom)this.$ConversationNub38()}.bind(this))};E.prototype.minimize=function(){A.modifyTabState(this.$ConversationNub12,function(F){if(this.$ConversationNub1)m.removeClass(this.$ConversationNub1,"_5r93");F.isTabRaised=false;this.$ConversationNub2&&this.$ConversationNub2.hideMenu();this.clearBadge()}.bind(this))};E.prototype.forceReflow=function(){this.$ConversationNub30()};E.prototype.isFormForThisUFI=function(F){return this.$ConversationNub1&&t(this.$ConversationNub1,F)};E.prototype.destroy=function(){__p&&__p();this.$ConversationNub6.release();this.$ConversationNub2&&this.$ConversationNub2.destroy();this.$ConversationNub2=null;this.$ConversationNub7&&clearTimeout(this.$ConversationNub7);this.minimize();if(this.$ConversationNub1){n.remove(this.$ConversationNub1);h.inform("ConversationNub/destroy",{root:this.$ConversationNub1});this.$ConversationNub1=null}};f.exports=E}),null);
__d("ConversationNubAddCommentSubscription",["Arbiter","ConversationNubTabState","UFIUIEvents"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function k(l){return h.subscribe(j.Comment,function(m,n){var o=n.ft_id,p=n.form;if(!o||!p)return;var q=i.getLoadedTabByFeedbackTarget(o);if(q&&q.isFormForThisUFI(p))l(q,o)})}f.exports={subscribe:k}}),null);
__d("XConversationNubActionTakenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/conversation/nub_story/action_taken/",{})}),null);
__d("ConversationNubActionTakenReporter",["Arbiter","AsyncRequest","ConversationNubAddCommentSubscription","ConversationNubUtils","PinnedConversationNubsActionTaken","SubscriptionsHandler","XConversationNubActionTakenController"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();function o(){this.$ConversationNubActionTakenReporter2=function(p,q){this.$ConversationNubActionTakenReporter4(q,l.COMMENT_ADDED)}.bind(this);this.$ConversationNubActionTakenReporter3=function(event,p){var q=p.tabID,r=p.ftID,s=p.tabState,t=p.sessionID,u=p.reason;if(u===k.CLOSE_REASON_TAB_X_OUT||u===k.CLOSE_REASON_OVERFLOW_X_OUT||u===k.CLOSE_REASON_UNPIN)this.$ConversationNubActionTakenReporter4(r,l.TAB_CLOSED_BY_USER)}.bind(this);this.$ConversationNubActionTakenReporter1=new m(j.subscribe(this.$ConversationNubActionTakenReporter2),h.subscribe(k.CLOSE_TAB_EVENT,this.$ConversationNubActionTakenReporter3))}o.prototype.destroy=function(){this.$ConversationNubActionTakenReporter1.release()};o.prototype.$ConversationNubActionTakenReporter4=function(p,q){var r=n.getURIBuilder().getURI();new i().setURI(r).setMethod("POST").setData({ft_id:p,action:q}).setAllowCrossPageTransition(true).send()};f.exports=o}),null);
__d("ConversationNubHeader",["ArbiterMixin","Bootloader","ConversationNubUtils","DOM","Event","EventListener","Keys","SubscriptionsHandler","ifRequired","csx","mixin"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s,t;function u(w,x){return m.listen(w,"keydown",function(y){if(l.getKeyCode(y)===n.RETURN)x(y)})}s=babelHelpers.inherits(v,r(h));t=s&&s.prototype;function v(w,x){t.constructor.call(this);this.$ConversationNubHeader6=false;this.$ConversationNubHeader1=w;this.$ConversationNubHeader3=x;this.$ConversationNubHeader4=null;this.$ConversationNubHeader5=false;this.$ConversationNubHeader2=new o();this.$ConversationNubHeader7()}v.prototype.$ConversationNubHeader7=function(){__p&&__p();var w=this.$ConversationNubHeader1;this.$ConversationNubHeader2.addSubscriptions(m.listen(w,"click",this.$ConversationNubHeader8.bind(this)));var x=j.getCloseButtonElem(w);if(x)j.addCloseButtonListeners(x,this.$ConversationNubHeader2,this.$ConversationNubHeader9.bind(this));var y=this.$ConversationNubHeader10();if(y)this.$ConversationNubHeader2.addSubscriptions(m.listen(y,"click",this.$ConversationNubHeader11.bind(this)),u(y,this.$ConversationNubHeader11.bind(this)));var z=this.$ConversationNubHeader12();if(z)this.$ConversationNubHeader2.addSubscriptions(m.listen(z,"click",this.$ConversationNubHeader13.bind(this)),m.listen(z,"mouseover",this.$ConversationNubHeader14.bind(this)),m.listen(z,"focus",this.$ConversationNubHeader15.bind(this)),u(z,this.$ConversationNubHeader16.bind(this)))};v.prototype.$ConversationNubHeader12=function(){return k.scry(this.$ConversationNubHeader1,"._1rf1")[0]};v.prototype.$ConversationNubHeader10=function(){return k.scry(this.$ConversationNubHeader1,"._4a56")[0]};v.prototype.$ConversationNubHeader17=function(){return j.getCloseButtonElem(this.$ConversationNubHeader1)};v.prototype.$ConversationNubHeader9=function(){this.inform("closeButton")};v.prototype.$ConversationNubHeader11=function(w){if(w.type==="click")w.kill();this.inform("minimizeButton")};v.prototype.$ConversationNubHeader8=function(){this.inform("clickHeader")};v.prototype.$ConversationNubHeader18=function(){this.inform("showMenu")};v.prototype.$ConversationNubHeader19=function(){this.inform("hideMenu");var w=this.$ConversationNubHeader12();w&&w.blur()};v.prototype.$ConversationNubHeader20=function(){this.inform("menuPermalinkClick")};v.prototype.$ConversationNubHeader21=function(w){__p&&__p();if(this.$ConversationNubHeader4)return;var x=this.$ConversationNubHeader12();if(!x)return;if(w)this.$ConversationNubHeader5=true;i.loadModules(["React","ReactDOM","ConversationNubHeaderMenu.react"],function(y,z,A){if(this.$ConversationNubHeader6)return;var B=babelHelpers["extends"]({},this.$ConversationNubHeader3(),{onMenuShow:this.$ConversationNubHeader18.bind(this),onMenuHide:this.$ConversationNubHeader19.bind(this),onPermalinkClick:this.$ConversationNubHeader20.bind(this),showOnMount:this.$ConversationNubHeader5});this.$ConversationNubHeader4=z.render(y.createElement(A,B),x)}.bind(this),"ConversationNubHeader")};v.prototype.$ConversationNubHeader13=function(w){w.kill();this.$ConversationNubHeader21(true)};v.prototype.$ConversationNubHeader14=function(){this.$ConversationNubHeader21(false)};v.prototype.$ConversationNubHeader15=function(){this.$ConversationNubHeader21(false)};v.prototype.$ConversationNubHeader16=function(){if(this.$ConversationNubHeader4)this.$ConversationNubHeader4.toggle();else this.$ConversationNubHeader21(true)};v.prototype.hideMenu=function(){this.$ConversationNubHeader4&&this.$ConversationNubHeader4.hide()};v.prototype.destroy=function(){this.$ConversationNubHeader6=true;var w=this.$ConversationNubHeader12();if(w&&this.$ConversationNubHeader4)p("ReactDOM",function(x){x.unmountComponentAtNode(w)});this.$ConversationNubHeader2.release()};f.exports=v}),null);
__d("ConversationNubTabsUpdateEventController",["Arbiter","ConversationNubUtils"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="ConversationNub/tabsUpdated",k="ConversationNub/minimizedByUser",l="ConversationNub/maximizedByUser",m=false;function n(r){if(!m)h.inform(j,r)}function o(r){return h.subscribe(j,function(s,t){m=true;r(t);m=false})}function p(r,s){s&&h.inform(k,{tab:r});r.minimize();n()}function q(r,s){if(!s&&!i.allowProgrammaticPopOut())return;s&&h.inform(l,{tab:r});r.popOut();n()}f.exports={TAB_MINIMIZED_BY_USER_EVENT:k,TAB_MAXIMIZED_BY_USER_EVENT:l,informTabsUpdated:n,subscribeToTabsUpdated:o,minimizeAndInformTabUpdate:p,popOutAndInformTabUpdate:q}}),null);
__d("XConversationNubTogglePinController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/conversation/nub_story/toggle_pin/",{ft_id:{type:"String"},pin:{type:"Bool",defaultValue:false},with_render:{type:"Bool",defaultValue:false},notif_setting:{type:"Enum",enumType:1}})}),null);
__d("XConversationsToggleController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/conversation/toggle_feature/",{turn_conversations_on:{type:"Bool",defaultValue:false}})}),null);
__d("isBusinessURI",["isFacebookURI"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return h(j)&&j.getSubdomain()==="business"}f.exports=i}),null);
__d("isGamesURI",["isFacebookURI"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return h(j)&&j.getPath().startsWith("/games")}f.exports=i}),null);
__d("ConversationNubUtils",["Arbiter","AsyncRequest","ConversationNubTabState","DOM","Event","EventListener","Keys","NotificationConversationController","URI","XConversationNubTogglePinController","XConversationsToggleController","csx","isBusinessURI","isCanvasAppURI","isGamesURI"],(function aa(ba,ca,da,ea,a,fa,b,c,d,e,f,g,h,i,j,k,l,ga,m,n,o){"use strict";__p&&__p();var p=d,q=Object.freeze({DISABLE:"disable",ENABLE:"enable"}),r="ConversationNubUtils/closeTab",s="ConversationNubUtils/unpinnedFromHeader",t="ConversationNubUtils/recheckTabVisibility",u="ConversationNubUtils/openPermalinkFromHeader",v="ConversationNubUtils/turnOff",w="ConversationNubUtils/turnOn",x="tab-x-out",y="browser-tab-sync",z="overflow-x-out",A="unpin";function B(T){var U=Object.values(q);return U.find(function(V){return V===T})||null}function C(T,U,V,W){var X=W||{},Y=X.notif_setting,Z=k.getURIBuilder().setString("ft_id",String(T)).setBool("pin",U);if(Y)Z.setEnum("notif_setting",Y);var ja=Z.getURI(),$=new c().setURI(ja).setMethod("POST");if(V)$.setAllowCrossPageTransition(true);$.send()}function D(L){var T=l.getURIBuilder().setBool("turn_conversations_on",L).getURI();L?S():R();var U=new c().setURI(T).setAllowCrossPageTransition(true).setHandler(function(V){if(V.getPayload().conversationsStatus)S();else R()}).setErrorHandler(function(V){L?R():S()}).setMethod("POST");U.send()}function E(T,U,V){C(T,true,U,V)}function F(T,U,V){C(T,false,U,V)}function G(T,U){E(T,false,U)}function H(T,U){F(T,false,U)}function I(T,U){E(T,true,U)}function J(T,U){F(T,true,U)}function K(){D(false);i.deleteAllTabs()}function L(){D(true)}function M(T){return e.scry(T,"._4iz6")[0]}function N(T,U,V){var W=function W(){V()};U.addSubscriptions(g.listen(T,"click",W),g.listen(T,"keydown",function(X){if(f.getKeyCode(X)===h.RETURN)W()}))}function O(){var T=j.getRequestURI();return!n(T)&&!m(T)&&!o(T)}function P(T,U,V){var W=p.getLoadedTab(T);if(!W)return;var X=W.getPersistentState(),Y=W.getSessionID(),Z=W.getPageID();b.inform(r,{tabID:T,ftID:U,tabState:X,sessionID:Y,reason:V,pageID:Z})}function Q(T){var U=p.getLoadedTab(T);if(!U)return;b.inform(s,{tab:U})}function ha(T){b.inform(t,{tab:T})}function ia(T){var U=p.getLoadedTab(T);if(!U)return;b.inform(u,{tab:U})}function R(){b.inform(v,{})}function S(){b.inform(w,{})}a.exports={CLOSE_TAB_EVENT:r,UNPIN_FROM_HEADER_EVENT:s,OPEN_PERMALINK_FROM_HEADER_EVENT:u,TURN_CONVERSATIONS_OFF_EVENT:v,TURN_CONVERSATIONS_ON_EVENT:w,CLOSE_REASON_TAB_X_OUT:x,CLOSE_REASON_SYNCHRONIZED_FROM_OTHER_TAB:y,CLOSE_REASON_OVERFLOW_X_OUT:z,CLOSE_REASON_UNPIN:A,coerceToPinRequestNotifSetting:B,sendPinRequest:G,sendUnpinRequest:H,sendPinRequestAcrossTransitions:I,sendUnpinRequestAcrossTransitions:J,getCloseButtonElem:M,addCloseButtonListeners:N,informShouldCloseTab:P,informDidUnpinFromHeaderMenu:Q,informShouldRecheckTabVisibility:ha,informOpenPermalinkFromHeader:ia,allowProgrammaticPopOut:O,turnConversationsOff:K,turnConversationsOn:L}}),null);
__d("ConversationNubPermalinkUtils",["URI","isFacebookURI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(n){return n.substr(-1)==="/"?n.slice(0,-1):n}function k(n,o){var p=n.getPath(),q=o.getPath();return j(p)===j(q)}function l(n,o,p){var q=n.getQueryData(),r=o.getQueryData(),s=q[p],t=r[p];if(s==null&&t==null)return true;return s===t}function m(n){var o=new h(window.location.href);return o&&n&&i(o)&&i(n)&&k(o,n)&&l(o,n,"fbid")&&l(o,n,"story_fbid")}f.exports={isOnPermalink:m}}),null);
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","BlueBar","ChatQuietLinks","CSS","DataStore","DOM","Parent","Scroll","Style","Toggler","Vector","csx","emptyFunction"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){__p&&__p();function x(){}Object.assign(x,k,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function y(z){__p&&__p();this.init=w;this.rootEl=z;this.calculateViewportDimensions();m.removeEmptyHrefs(this.rootEl);h.listen(z,"click",this._onClick.bind(this));h.listen(window,"resize",this._onWindowResize.bind(this));t.subscribe(["show","hide"],function(A,B){__p&&__p();var C=B.getActive();if(!p.contains(z,C))return;if(n.hasClass(C,"fbNub")){this.notifyNub(C,A);if(A==="show")this._resizeNubFlyout(C)}else{var D=q.byClass(C,"fbNubFlyout");if(D)n.conditionClass(D,"menuOpened",A==="show")}}.bind(this));this.inform("init",{},j.BEHAVIOR_PERSISTENT)},calculateViewportDimensions:function y(){return this.viewportDimensions=u.getViewportDimensions()},getFlyoutHeightOffset:function y(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+u.getElementDimensions(this.rootEl).y;var z=l.getBar();if(z){var A=s.isFixed(z)?"viewport":"document";this.flyoutHeightOffset+=u.getElementPosition(z,A).y+u.getElementDimensions(z).y}return this.flyoutHeightOffset},toggle:function y(z){var A=this._findFlyout(z);if(!A)return;this.subscribe("init",function(){t.toggle(z)})},show:function y(z){this.subscribe("init",function(){t.show(z)})},showNub:function y(z){n.show(z)},hide:function y(z){this.subscribe("init",function(){var A=t.getInstance(z);p.contains(z,A.getActive())&&A.hide()})},hideNub:function y(z){n.hide(z);this.hide(z)},setUseMaxHeight:function y(z,A){n.conditionClass(z,"maxHeight",A!==false);this._resizeNubFlyout(z)},_resizeNubFlyout:function y(z){__p&&__p();var A=this._findFlyout(z);if(!A||n.hasClass(z,"placeholder")||!(n.hasClass(z,"openToggler")||n.hasClass(z,"opened")))return;var B=p.find(A,"div.fbNubFlyoutOuter"),C=p.find(B,"div.fbNubFlyoutInner"),D=p.find(C,"div.fbNubFlyoutBody"),E=n.hasClass(z,"canBeCompactTab"),F=r.getTop(D),G=D.offsetHeight;s.set(D,"height","auto");var H=u.getElementDimensions(A),I=u.getElementDimensions(D),J=this.getMaxFlyoutHeight(z);s.set(A,"max-height",J+"px");s.set(B,"max-height",J+"px");H=u.getElementDimensions(A);var K=u.getElementDimensions(C),L=K.y-I.y,M=H.y-L,N=parseInt(D.style.height||D.clientHeight,10),O=M!==N;if(H.y>L&&O&&!E)s.set(D,"height",M+"px");n.removeClass(A,"swapDirection");var P=u.getElementPosition(A).x;n.conditionClass(A,"swapDirection",function(){if(P<0)return true;if(!H||!this.viewportDimensions)return false;return P+H.x>this.viewportDimensions.x}.bind(this)());if(O&&F+G>=I.y)r.setTop(D,D.scrollHeight);else r.setTop(D,F);this.notifyNub(z,"resize")},getMaxFlyoutHeight:function y(z){var A=this._findFlyout(z),B=u.getElementPosition(A,"viewport"),C=u.getElementDimensions(A);if(!this.viewportDimensions||!B)return 0;var D=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-B.y-C.y);return Math.max(D,0)},resizeAllFlyouts:function y(){var z=this._getAllNubs(),A=z.length;while(A--)this._resizeNubFlyout(z[A])},_getAllNubs:function y(){var z=p.scry(this.rootEl,"div._50-v.openToggler:not(._s0f)");return z.concat(p.scry(this.rootEl,"div._50-v.opened:not(._s0f)"))},_onClick:function y(event){__p&&__p();var z=event.getTarget(),A=q.byClass(z,"fbNub");if(A){if(q.byClass(z,"fbNubFlyoutTitlebar")){var B=q.byTag(z,"a"),C=z.nodeName=="INPUT"&&z.getAttribute("type")=="submit";if(!B&&!C){this.hide(A);return false}}this.notifyNub(A,"click")}},_onWindowResize:function y(event){this.calculateViewportDimensions();this.resizeAllFlyouts()},_findFlyout:function y(z){return n.hasClass(z,"fbNubFlyout")?z:p.scry(z,"div.fbNubFlyout")[0]||null},registerNubController:function y(z,A){o.set(z,"dock:nub:controller",A);A.subscribe("nub/button/content-changed",i(this.inform,this,"resize",z));A.subscribe("nub/flyout/content-changed",i(this._resizeNubFlyout,this,z))},unregisterNubController:function y(z){o.remove(z,"dock:nub:controller")},notifyNub:function y(z,A,B){var C=o.get(z,"dock:nub:controller");C&&C.inform(A,B)}});f.exports=b.Dock||x}),null);
__d("DockTabsViewportFantaTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=269;function i(){return h+1}function j(m){return Math.floor(m/h)}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null}function l(m){return m?m.size:0}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=496+9+2,i=210+9+2,j=52;function k(){return h}function l(){return i}function m(){return j}function n(r){return r.getIsRaised()?k():l()}function o(){return k()+j}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null}function q(r){return r?r.getTotalTabCount():0}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q}}),null);
__d("DockTabsViewportCalculator",["Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","csx","ge","getViewportDimensions","setImmediate"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();var w=50,x=35,y=x,z="dock-tab-viewport-inst",A=k.getMinRequiredWidthForFirstFantaTab,B=k.getFantaTabModelFromCallbacks,C=k.getNumFantaTabsFromModel,D=l.getMinRequiredWidthForFirstConvoTab,E=l.getNumPinnedConvoTabsFromModel,F=l.getPinnedConvoTabsStateFromCallbacks;function G(I){return I?q.getElementDimensions(I).x:0}function H(I){__p&&__p();this.$DockTabsViewportCalculatorImpl1=I;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new p();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11()}H.prototype.$DockTabsViewportCalculatorImpl10=function(){__p&&__p();var I=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(n.listen(window,"resize",I),j.subscribe("resize",I),h.subscribeOnce("sidebar/initialized",I,h.SUBSCRIBE_NEW),o.subscribe("changed",function(){__p&&__p();if(o.isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){v(function(){I()});this.$DockTabsViewportCalculatorImpl8=false}}}.bind(this)))};H.prototype.registerFantaTabCallbacks=function(I){this.$DockTabsViewportCalculatorImpl5=I};H.prototype.registerPinnedConvoTabCallbacks=function(I){this.$DockTabsViewportCalculatorImpl6=I};H.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null})};H.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null})};H.prototype.forceRecalculatePinnedConvoTabs=function(I){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:I})};H.prototype.$DockTabsViewportCalculatorImpl12=function(){if(o.isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return}this.forceRecalculateFBDockWidth()};H.prototype.$DockTabsViewportCalculatorImpl13=function(I){var J=I.forceRecalculateChatTabs,K=I.pinnedConvoUpdateData,L=this.$DockTabsViewportCalculatorImpl14(),M=L.chatTabAvailableWidth,N=L.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(M,!!J);this.$DockTabsViewportCalculatorImpl16(N,K)};H.prototype.$DockTabsViewportCalculatorImpl16=function(I,J){var K=this.$DockTabsViewportCalculatorImpl6||{},L=K.onAvailableWidthChanged;L&&L(I,J)};H.prototype.$DockTabsViewportCalculatorImpl15=function(I,J){var K=this.$DockTabsViewportCalculatorImpl5||{},L=K.onAvailableWidthChanged;L&&L(I)};H.prototype.$DockTabsViewportCalculatorImpl17=function(){var I=B(this.$DockTabsViewportCalculatorImpl5);return C(I)};H.prototype.$DockTabsViewportCalculatorImpl18=function(){return A()};H.prototype.$DockTabsViewportCalculatorImpl14=function(){__p&&__p();var I=this.$DockTabsViewportCalculatorImpl3,J={chatTabAvailableWidth:I,pinnedConvoTabAvailableWidth:0},K={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:I},L=this.$DockTabsViewportCalculatorImpl17(),M=F(this.$DockTabsViewportCalculatorImpl6),N=E(M);if(!M||N===0)return J;else if(L===0)return K;var O=this.$DockTabsViewportCalculatorImpl18();if(I<=O)return J;var P=D(),Q=I-O,R=0;if(Q<P)return J;else R=P;var S=R,T=Math.max(O,I-R);return{chatTabAvailableWidth:T,pinnedConvoTabAvailableWidth:S}};H.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};H.prototype.$DockTabsViewportCalculatorImpl21=function(){var I=this.$DockTabsViewportCalculatorImpl1;if(!I)return{buddyListNubWidth:0,employeeNubsWidth:0};var J=G(I),K=G(m.find(I,"._56ox")),L=G(m.scry(I,"._56oy")[0]),M=G(m.scry(I,"._ph1")[0]),N=Math.max(J-K-L-M,0);return{buddyListNubWidth:K,employeeNubsWidth:N}};H.prototype.$DockTabsViewportCalculatorImpl19=function(){var I=u.withoutScrollbars().width;I-=r.getLeft()+r.getRight();I-=w;var J=this.$DockTabsViewportCalculatorImpl21(),K=J.buddyListNubWidth,L=J.employeeNubsWidth;I-=K;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,L);I-=this.$DockTabsViewportCalculatorImpl4;I-=y;return Math.max(I,0)};H.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true};H.prototype.$DockTabsViewportCalculatorImpl20=function(I){if(this.$DockTabsViewportCalculatorImpl9)h.inform(I)};H.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth};H.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth};H.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3};f.exports={getInstance:function I(J){__p&&__p();var K=t("pagelet_dock");if(!K||!m.contains(K,J))return null;var L=i.get(K,z);if(L instanceof H)return L;var M=m.scry(K,".fbDockWrapperRight .fbDock")[0];L=new H(M);i.set(K,z,L);return L}}}),null);
__d("ConversationNubViewportManager",["DockTabsViewportCalculator","DockTabsViewportPinnedConversationTabUtils"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i.getMinRequiredWidthForFirstConvoTab;function k(l,m,n){this.$ConversationNubViewportManager1=l;this.$ConversationNubViewportManager3=m;this.$ConversationNubViewportManager2=h.getInstance(this.$ConversationNubViewportManager1);this.$ConversationNubViewportManager2&&this.$ConversationNubViewportManager2.registerPinnedConvoTabCallbacks(babelHelpers["extends"]({},n,{pinnedConvoTabStateGetter:function(){return this.$ConversationNubViewportManager3}.bind(this)}))}k.prototype.getNumDockTabsToShow=function(l){return this.getCouldFitAtLeastOneDockTab(l)?1:0};k.prototype.getCouldFitAtLeastOneDockTab=function(l){var m=j();return m<=l};k.prototype.forceRecalculatePinnedConvoTabs=function(l){this.$ConversationNubViewportManager2&&this.$ConversationNubViewportManager2.forceRecalculatePinnedConvoTabs(l)};f.exports=k}),null);
__d("ConversationNubVisibilityDedupeUtils",["Bootloader","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g,h,i,j){"use strict";function k(m){h.loadModules(["UFICommentVisibilityStore"],m,"ConversationNubVisibilityDedupeUtils")}function l(m){return j("UFICommentVisibilityStore",function(n){return n.isFeedbackTargetVisible(m)},i.thatReturnsFalse)}f.exports={bootloadUFIVisibilityModule:k,isFeedbackTargetVisible:l}}),null);
__d("XNotificationNubStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/conversation/nub_story/",{notif_alert_id:{type:"String"},notif_id:{type:"Int"},ft_id:{type:"String"},force_minimized:{type:"Bool",defaultValue:false}})}),null);
__d("NotificationConversationController",["Arbiter","AsyncRequest","Bootloader","ConversationNub","ConversationNubActionTakenReporter","ConversationNubPermalinkUtils","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","ConversationNubViewportManager","ConversationNubVisibilityDedupeUtils","CSS","DOM","PinnedConversationNubsConfig","SubscriptionsHandler","URI","XNotificationNubStoryController","csx","cx","ge","ifRequired","nullthrows"],(function aa(ba,ca,da,ea,a,fa,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,ga,ha,s,ia,t){"use strict";__p&&__p();var u=l.isFeedbackTargetVisible,ja=1,v=h,w=Object.create(null),x=null,y=null,z=null,A=null,B=null,C=null,D=false,E=null,F=null,G=null,H=null,I=Object.create(null);function J(){if(!y)y=n.scry(s("pagelet_dock"),"._1mw-")[0];return y}function K(){if(!z){var N=J();if(N)z=n.scry(N,"._1tvj")[0]}return z}function L(){if(!A){var N=J();if(N)A=n.scry(N,"._2ikx .fbNubButton")[0]}return A}M.prototype.init=function(){__p&&__p();if(D)return;D=true;var N=new p();N.addSubscriptions(i.subscribeToTabsUpdated(this.$NotificationConversationController2.bind(this)),b.subscribe(j.CLOSE_TAB_EVENT,function(O,P){var Q=P||{},R=Q.tabID;if(R)this.$NotificationConversationController3(R)}.bind(this)));this.$NotificationConversationController1=new f();E=N};M.prototype.$NotificationConversationController4=function(N){var O=x?x.getNumDockTabsToShow(N):ja;v.setMaxDockTabs(O)};M.prototype.$NotificationConversationController5=function(N,O){this.$NotificationConversationController4(N);if(O){var P=O.tabToPromote,Q=O.tabToOpenIfInDock;if(P&&!v.isTabInDock(P.getTabID()))v.moveTabToDockLeft(P.getTabID());if(j.allowProgrammaticPopOut()&&Q&&v.isTabInDock(Q.getTabID()))Q.popOut()}this.$NotificationConversationController6(N)};M.prototype.$NotificationConversationController2=function(N){x&&x.forceRecalculatePinnedConvoTabs(N)};M.prototype.$NotificationConversationController6=function(N){__p&&__p();var O=v.getTotalTabCount(),P=v.getNumDockTabs(),Q=x?x.getCouldFitAtLeastOneDockTab(N):false,R=O>0&&Q,S=P<O&&R,T=J();if(T){m.conditionClass(T,"_1tvf",R);m.conditionClass(T,"_1dex",S);m.conditionClass(T,"_1tvi",S)}var U=o.pinnedToLeft?v.getTabsForDockOldestFirst():v.getTabsForDockNewestFirst();U.forEach(function(W){if(W.getIsRaised())W.clearBadge()});var V=v.getTabsForMenuNewestFirst();this.$NotificationConversationController7(U);this.$NotificationConversationController8(V)};M.prototype.handleNotificationsRead=function(N){__p&&__p();this.init();v.getUnsortedLoadedTabs().forEach(function(P){var Q=P.getNotificationPayloadAlertID();if(Q&&N[Q])P.clearBadge()});v.getUnloadedTabs().forEach(function(P){if(P.notifAlertID&&N[P.notifAlertID])v.clearTabNotifications(P.tabID)});var O=v.getTabsForMenuNewestFirst();this.$NotificationConversationController8(O)};M.prototype.handleNewNotificationFromGraphQL=function(N,O){this.init();var P=t(N),Q=P.tab_id,R=P.notification,S=P.feedback_target_id,T=P.permalink_uri,U=t(R),V=U.notif_id,W=U.alert_id,X=U.notif_type;this.$NotificationConversationController9(t(Q),t(V),t(S),t(W),T?new q(T):null,O,X)};M.prototype.handleNewNotificationsFromChannel=function(N,O){this.init();N.forEach(function(P){var Q=P.alert_id,R=P.pinnedConvoConfig,S=P.tracking,T=P.notif_type;if(!R)return;var U=R.tab_id,V=R.ft_id,W=R.permalink_uri,X=JSON.parse(S),Y=W?new q(W):null;this.$NotificationConversationController9(U,X.alert_id,V,Q,Y,O,T)}.bind(this))};M.prototype.$NotificationConversationController9=function(N,O,P,Q,R,S,T){var U=r.getURIBuilder().setString("notif_alert_id",Q).setInt("notif_id",O);this.$NotificationConversationController10(P,S);this.$NotificationConversationController11(N,P,T,R,U)};M.prototype.$NotificationConversationController10=function(N,O){if(!I[N])I[N]=O};M.prototype.$NotificationConversationController11=function(N,O,P,Q,R){__p&&__p();if(w[N])return;var S=v.getLoadedTab(N);if(S){if(P)S.setNotificationType(P);return}if(g.isOnPermalink(Q)||u(O))R.setBool("force_minimized",true);w[N]=true;new c().setURI(R.getURI()).setAllowCrossPageTransition(true).setFinallyHandler(function(){delete w[N]}).send()};M.prototype.$NotificationConversationController12=function(N){__p&&__p();var O=true;v.getUnsortedLoadedTabs().forEach(function(P){__p&&__p();var Q=P.getFeedbackTargetID(),R=N[Q],S=R?Object.keys(R):[];if(S.length){var T=P.getBadgeCount();if(u(Q)){P.markCommentsAsSeenWithoutBadging(S);P.clearBadge()}else P.attemptAddNewCommentsToBadge(S);var U=P.getBadgeCount();if(T!==U)O=true}});if(O)i.informTabsUpdated()};M.prototype.$NotificationConversationController13=function(N){if(H)return;d.loadModules(["ConversationNubSurveys"],function(O){if(!H)H=new O(N)},"NotificationConversationController")};M.prototype.$NotificationConversationController14=function(N,O,P){__p&&__p();if(G){G.addTab(N,P);delete I[N.getPersistentState().ftID];return}d.loadModules(["ConversationNubLogger"],function(Q){if(!G)G=new Q(O);G.addTab(N,P);delete I[N.getPersistentState().ftID]},"NotificationConversationController")};M.prototype.$NotificationConversationController15=function(){if(F)return;d.loadModules(["ConversationNubUFICentralUpdateManager"],function(N){if(F)return;F=new N(this.$NotificationConversationController12.bind(this))}.bind(this),"NotificationConversationController")};M.prototype.$NotificationConversationController7=function(N){var O=K();if(!O)return;d.loadModules(["React","ReactDOM","ConversationNubDockedTabGroup.react"],function(P,Q,R){C=Q.render(P.createElement(R,{dockTabs:N}),O)},"NotificationConversationController")};M.prototype.$NotificationConversationController16=function(N){N.popOut();i.informTabsUpdated({tabToPromote:N})};M.prototype.$NotificationConversationController8=function(N){var O=L();if(!O)return;d.loadModules(["React","ReactDOM","ConversationNubCollapsedSelectorMenu.react"],function(P,Q,R){B=Q.render(P.createElement(R,{menuTabs:N,onTabSelected:this.$NotificationConversationController16}),O)}.bind(this),"NotificationConversationController")};M.prototype.$NotificationConversationController17=function(){if(!x){var N=J();if(N){var O={onAvailableWidthChanged:this.$NotificationConversationController5.bind(this)};x=new k(N,v,O)}}};M.prototype.storyFromServer=function(N,O){__p&&__p();if(!D)this.init();var P=O.attempt_open_on_init,Q=O.ft_id,R=O.init_without_badge,S=O.notif_alert_id,T=O.notification_type,U=O.permalink_uri,V=O.promote_on_init,W=O.tab_add_source,X=O.tab_id,Y=O.title,ka=O.should_show_intro_nux,la=O.should_show_hide_nux,ma=O.page_id,Z=v.getLoadedTab(X);if(Z){if(V||P)i.informTabsUpdated({tabToPromote:V?Z:null,tabToOpenIfInDock:P?Z:null});return}R=R||u(Q);var na=v.getTabStateIfExists(X);if(na)R=null;else{var oa=e.createDefaultState(X,U,Q,S,T,Y);v.addTabState(oa)}var $=new e(N,X,R,ma,Boolean(ka),Boolean(la));v.addLoadedTab(X,$);P=P||$.getPersistentState().isTabRaised;this.$NotificationConversationController15();this.$NotificationConversationController17();i.informTabsUpdated({tabToPromote:V?$:null,tabToOpenIfInDock:P?$:null});this.$NotificationConversationController13(v);var pa=I[Q]||W||"unknown";this.$NotificationConversationController14($,v,pa)};M.prototype.deleteAllTabs=function(){v.deleteAllTabs();i.informTabsUpdated()};M.prototype.$NotificationConversationController3=function(N){var O=v.deleteTab(N);if(O)i.informTabsUpdated()};M.prototype.unsubscribe=function(){__p&&__p();E&&E.release();E=null;G&&G.destroy();G=null;H&&H.destroy();H=null;F&&F.destroy();F=null;this.$NotificationConversationController1.destroy();ia("ReactDOM",function(N){var O=L();if(B&&O)N.unmountComponentAtNode(O);var P=K();if(C&&P)N.unmountComponentAtNode(P)})};function M(){}a.exports=new M()}),null);
__d("MenuSeparator.react",["MenuSeparator"],(function a(b,c,d,e,f,g,h){function i(k){k.isReactLegacyFactory={};k.type=k}var j=h;i(j);f.exports=j}),null);
__d("XChatEmojiSettingsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/emoji_settings/",{__asyncDialog:{type:"Int"}})}),null);
__d("ChatSidebarDropdown.react",["AppsDivebarDisplayController","Arbiter","AsyncRequest","ChatConfig","ChatOptions","ChatSidebarDropdownConstants","ChatVisibility","ContextualDialogArrow","ContextualLayerAutoFlip","ConversationNubUtils","CurrentUser","FantaTabActions","FBRTCCallBlockingStore","FBRTCSupport","LayerHideOnBlur","Link.react","LogHistory","MenuSeparator.react","PinnedConversationNubsConfig","PopoverMenu.react","PresencePrivacy","PresenceState","React","ReactXUIMenu","SidebarType","SubscriptionsHandler","TrackingNodes","URI","XChatEmojiSettingsController","cx","emptyFunction","fbt","ge","gkx","joinClasses","ChatSidebarBotsActions","ChatSidebarBotsStore"],(function aa(ba,a,ca,da,b,ea,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,fa,F,G,H,I,J){"use strict";__p&&__p();var K,L,M=a("ChatSidebarBotsActions").module,N=a("ChatSidebarBotsStore").module,O=z.SelectableItem,P=z.SelectableMenu,Q=z.Item,R=y.PropTypes,S=s.getInstance("blackbird");K=babelHelpers.inherits(T,y.PureComponent);L=K&&K.prototype;function T(){var U,V;for(var W=arguments.length,X=Array(W),Y=0;Y<W;Y++)X[Y]=arguments[Y];return V=(U=L.constructor).call.apply(U,[this].concat(X)),this.$ChatSidebarDropdown6=function(ga,Z){var $=Z.item.getValue(),ha=Z.item.isSelected&&Z.item.isSelected();this.$ChatSidebarDropdown5($,!!ha)}.bind(this),this.state={appsVisible:c.isVisible(),isConversationsEnabled:u.isEnabled,isDiscoverBotsHidden:N?N.getState().isHidden:true,isOnline:i.isOnline(),isTickerVisible:this.$ChatSidebarDropdown2(),isCallBlocked:o.getBlockingStatus(),pendingChange:false},V}T.prototype.componentDidMount=function(){__p&&__p();this.$ChatSidebarDropdown1=new B();this.$ChatSidebarDropdown1.addSubscriptions(d.subscribe(["Ticker/resized","ticker/show"],function(){this.setState({isTickerVisible:this.$ChatSidebarDropdown2()})}.bind(this)),d.subscribe(["AppsDivebar/show-apps","AppsDivebar/hide-apps"],function(){this.setState({appsVisible:c.isVisible()})}.bind(this)),w.subscribe("privacy-user-presence-changed",function(){this.setState({isOnline:i.isOnline()})}.bind(this)),d.subscribe("buddylist/hide",function(){this.refs.menu.hidePopover()}.bind(this)),d.subscribe("sidebar/visibility",function(U,V){if(!V)this.refs.menu.hidePopover()}.bind(this)),o.addListener(function(){this.setState({isCallBlocked:o.getBlockingStatus()})}.bind(this)));if(N)this.$ChatSidebarDropdown1.addSubscriptions(N.addListener(function(){this.setState({isDiscoverBotsHidden:N.getState().isHidden})}.bind(this)));if(u.userSettingsIsEnabled)this.$ChatSidebarDropdown1.addSubscriptions(d.subscribe(l.TURN_CONVERSATIONS_OFF_EVENT,function(){this.setState({isConversationsEnabled:false})}.bind(this)),d.subscribe(l.TURN_CONVERSATIONS_ON_EVENT,function(){this.setState({isConversationsEnabled:true})}.bind(this)))};T.prototype.componentWillUnmount=function(){this.$ChatSidebarDropdown1&&this.$ChatSidebarDropdown1.release()};T.prototype.$ChatSidebarDropdown2=function(){var U=H("pagelet_ticker");return!!(U&&U.offsetHeight!==0)};T.prototype.$ChatSidebarDropdown3=function(U,V){var W=V?"sidebar_dropdown_visibility_error":"sidebar_dropdown_set_visibility";S.debug(W,JSON.stringify({action:U}))};T.prototype.$ChatSidebarDropdown4=function(U,V){if(this.state.pendingChange)return;this.setState({pendingChange:true});var W={};W[U]=!V;g.setSetting(U,!V,"mini_sidebar_menu");new e("/ajax/chat/settings.php").setHandler(x.doSync).setErrorHandler(function(){return g.setSetting(U,V,"mini_sidebar_menu_error")}).setFinallyHandler(function(){return this.setState({pendingChange:false})}.bind(this)).setData(W).setAllowCrossPageTransition(true).send()};T.prototype.$ChatSidebarDropdown5=function(U,V){__p&&__p();var W=true;switch(U){case h.SOUND:this.$ChatSidebarDropdown4(U,V);break;case h.ADVANCED_SETTINGS:case h.TURN_OFF_DIALOG:this.$ChatSidebarDropdown3(U,false);break;case h.LOWER_ALL_TABS:n.minimizeAllTabs();break;case h.CLOSE_ALL_TABS:n.closeAllTabs();this.$ChatSidebarDropdown3(U,false);break;case h.HIDE_GROUPS:this.$ChatSidebarDropdown4(U,V);break;case h.TOGGLE_DISCOVER_BOTS:if(M)M.saveSettings({isHidden:!this.state.isDiscoverBotsHidden});break;case h.SIDEBAR:this.props.onToggleSidebar();W=false;break;case h.ONLINE:!this.state.isOnline?i.goOnline():this.$ChatSidebarDropdown3(U,true);break;case h.VIDEOCALL_ON:o.turnOnVideoCalling();break;case h.VIDEOCALL_OFF:break;case h.PAUSE:break;case h.SHOW_TICKER:d.inform("ChatSidebarDropdown/openTicker");break;case h.HIDE_TICKER:d.inform("ChatSidebarDropdown/closeTicker");break;case l.TURN_CONVERSATIONS_OFF_EVENT:l.turnConversationsOff();break;case l.TURN_CONVERSATIONS_ON_EVENT:l.turnConversationsOn();break;case h.SHOW_APPS:c.showApps();break;case h.HIDE_APPS:c.hideApps();break;case h.HIDE_ADMINED_PAGES:this.$ChatSidebarDropdown4(U,V);break;case h.HIDE_BUSINESSES:this.$ChatSidebarDropdown4(U,V);break}if(W&&this.refs.menu)this.refs.menu.hidePopover()};T.prototype.$ChatSidebarDropdown7=function(){return y.createElement(O,{value:h.SOUND,selected:g.getSetting(h.SOUND)},G._("Chat Sounds"))};T.prototype.$ChatSidebarDropdown8=function(){var U=E.getURIBuilder().getURI();return y.createElement(Q,{href:U,rel:"dialog",value:h.EMOJI_SETTINGS},G._("Emoji"))};T.prototype.$ChatSidebarDropdown9=function(){if(m.isWorkUser())return null;return y.createElement(Q,{href:new D("/settings?tab=blocking"),value:h.BLOCK_SETTINGS},G._("Block Settings"))};T.prototype.$ChatSidebarDropdown10=function(){return y.createElement(Q,{href:new D("/ajax/chat/privacy/settings_dialog.php"),rel:"dialog",value:h.ADVANCED_SETTINGS},G._("Advanced Settings"))};T.prototype.$ChatSidebarDropdown11=function(){return y.createElement(Q,{value:h.LOWER_ALL_TABS},G._("Collapse All Chat Tabs"))};T.prototype.$ChatSidebarDropdown12=function(){return y.createElement(Q,{value:h.CLOSE_ALL_TABS},G._("Close All Chat Tabs"))};T.prototype.$ChatSidebarDropdown13=function(){return y.createElement(Q,{className:"_4kqp",value:h.SIDEBAR},G._("Hide Sidebar"))};T.prototype.$ChatSidebarDropdown14=function(){if(this.props.sidebarType===A.BUDDYLIST_NUB||!f.get("show_admined_pages"))return null;return y.createElement(O,{className:"_4kqp",value:h.HIDE_ADMINED_PAGES,selected:g.getSetting(h.HIDE_ADMINED_PAGES)},G._("Hide Pages You Manage"))};T.prototype.$ChatSidebarDropdown15=function(){if(this.props.sidebarType===A.BUDDYLIST_NUB||!f.get("show_businesses"))return null;return y.createElement(O,{className:"_4kqp",value:h.HIDE_BUSINESSES,selected:g.getSetting(h.HIDE_BUSINESSES)},G._("Hide Pages to Contact"))};T.prototype.$ChatSidebarDropdown16=function(){if(this.props.sidebarType===A.BUDDYLIST_NUB)return null;return y.createElement(O,{value:h.HIDE_GROUPS,selected:g.getSetting(h.HIDE_GROUPS)},G._("Hide Groups"))};T.prototype.$ChatSidebarDropdown17=function(){var U=i.isOnline(),V=U?new D("/ajax/chat/privacy/settings_dialog.php").addQueryData("dialog_type","turn_off_dialog"):"#",W="";if(I("AT69r4Tjj4qkJ_vN9jQ6gElERSeEr7u62xiMa_cx47RRkJ105PHueucCfKn05FryjNTRlgeKhVV5K6cdO6mpY_4fixxY2c-NmAOkc0BTwRAPmw"))W=U?G._("Turn Off Chat (Advanced Settings)"):G._("Turn On Chat");else W=U?G._("Turn Off Chat"):G._("Turn On Chat");var X=U?h.TURN_OFF_DIALOG:h.ONLINE;return y.createElement(Q,{href:V,rel:U?"dialog":"",value:X},W)};T.prototype.$ChatSidebarDropdown18=function(){if(!p.isVideoCallBlockingSupported())return null;var U=this.state.isCallBlocked,V=U?"#":new D("/videocall/off/"),W=U?G._("Turn On Video\/Voice Calls"):G._("Turn Off Video\/Voice Calls"),X=U?h.VIDEOCALL_ON:h.VIDEOCALL_OFF;return y.createElement(Q,{href:V,rel:U?"":"dialog",value:X},W)};T.prototype.$ChatSidebarDropdown19=function(){var U=N?N.getState().bots:[];if(!M||U.length===0)return null;var V=this.state.isDiscoverBotsHidden?G._("Show bot discovery"):G._("Hide bot discovery");return y.createElement(Q,{value:h.TOGGLE_DISCOVER_BOTS},V)};T.prototype.$ChatSidebarDropdown20=function(){if(!u.userSettingsIsEnabled)return null;var U=this.state.isConversationsEnabled,V=U?G._("Turn Off Post Tabs"):G._("Turn On Post Tabs"),W=U?l.TURN_CONVERSATIONS_OFF_EVENT:l.TURN_CONVERSATIONS_ON_EVENT;return y.createElement(Q,{value:W},V)};T.prototype.$ChatSidebarDropdown21=function(){if(!f.get("has_apps_option")||this.props.sidebarType!==A.SIDEBAR)return null;var U=this.state.appsVisible,V=U?G._("Hide Games"):G._("Show Games"),W=U?h.HIDE_APPS:h.SHOW_APPS;return[y.createElement(t,{key:"apps_separator"}),y.createElement(Q,{value:W,key:"apps_menu"},V)]};T.prototype.$ChatSidebarDropdown22=function(){return y.createElement(P,{className:"fbChatSidebarDropdown/PopoverMenu",multiple:true,onItemClick:this.$ChatSidebarDropdown6},this.$ChatSidebarDropdown7(),this.$ChatSidebarDropdown8(),this.$ChatSidebarDropdown9(),this.$ChatSidebarDropdown10(),y.createElement(t,null),this.$ChatSidebarDropdown11(),this.$ChatSidebarDropdown12(),this.$ChatSidebarDropdown19(),this.$ChatSidebarDropdown13(),this.$ChatSidebarDropdown14(),this.$ChatSidebarDropdown15(),this.$ChatSidebarDropdown16(),this.$ChatSidebarDropdown17(),this.$ChatSidebarDropdown18(),this.$ChatSidebarDropdown20(),this.$ChatSidebarDropdown21())};T.prototype.render=function(){var U=G._("Options"),V=J(this.props.className,"_5qth _5vm9"+(!i.isOnline()?" _5vma":"")),W=C.getTrackingInfo(C.types.DROPDOWN_BUTTON);return y.createElement(v,{alignh:"right",alignv:"top",className:V,layerBehaviors:[k,j,q],menu:this.$ChatSidebarDropdown22(),onHide:this.props.onHide,onShow:this.props.onShow,ref:"menu"},y.createElement(r,{"aria-label":U,className:"_5vmb button","data-ft":W,"data-hover":"tooltip","data-tooltip-content":U,"data-tooltip-position":"below",href:"#"}))};T.propTypes={className:R.string,onHide:R.func,onShow:R.func,onToggleSidebar:R.func.isRequired,sidebarType:R.string.isRequired};T.defaultProps={className:"",onHide:F,onShow:F};b.exports=T}),null);
__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","ChatNotificationConstants"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=false,m=i.getWebChatNotification&&i.getWebChatNotification(),n=l,o=true,p=Object.assign(new h(),{ON_CHANGED:"changed",notifiesUserMessages:function r(){return m!==k.NO_USER_MESSAGE_NOTIFICATION},ignoresRemoteTabRaise:function r(){return n},showsTabUnreadUI:function r(){return o}});function q(){p.inform(p.ON_CHANGED)}i.subscribe&&i.subscribe(j.ON_CHAT_NOTIFICATION_CHANGED,function(){var r=m,s=i.getWebChatNotification();m=s;if(r!=s)q()});h.subscribe("chat/set_does_page_occlude_tabs",function(r,s){n=!!s;q()});h.subscribe("chat/set_show_tab_unread_ui",function(r,s){o=!!s;q()});f.exports=p}),null);
__d("ChatSidebarSheetChatOffline.react",["Link.react","React","fbt"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=i.PropTypes;k=babelHelpers.inherits(n,i.PureComponent);l=k&&k.prototype;n.prototype.render=function(){return i.createElement("div",null,j._("{=Go online} to see who's available.",[j.param("=Go online",i.createElement(h,{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},j._("Turn on chat")))]))};function n(){k.apply(this,arguments)}n.propTypes={onGoOnlineClick:m.func.isRequired};f.exports=n}),null);
__d("ImageReact.bs",["Image.react","ReasonReact.bs","bs_js_null_undefined"],(function a(b,c,d,e,f,g,h,i,j){"use strict";function k(l,m,n,o,p,q,r,s){return i.wrapJsForReason(h,{className:j.from_opt(l),alt:j.from_opt(m),src:j.from_opt(n),height:j.from_opt(o),title:j.from_opt(p),width:j.from_opt(q),style:j.from_opt(r)},s)}g.make=k}),null);
__d("MessengerSpinnerReact.bs",["React","cx","ix","fbt","ImageReact.bs","ReasonReact.bs","joinClasses"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o=j("86853"),p=j("86857"),q=j("86854"),r=m.statelessComponent("MessengerSpinnerReact");function s(w,x,y,z){__p&&__p();var A=w?w[0]:"",B=x?x[0]:"blue",C=y?y[0]:24,D=function D(){var F=+(C===24);if(F!==0){var G=+(B==="blue");if(G!==0)return o;else return p}else return q},E=r.slice();E[9]=function(){return h.cloneElement(m.element(0,0,l.make([n(A,"_3u55 _3qh2")],0,[D(0)],[C],0,[C],0,[])),{"aria-label":k._("Loading..."),"aria-busy":true})};return E}var t=m.wrapReasonForJs(r,function(w){var x=w.className,y=w.color,z=w.size;return s([x==null?"":x],[y==null?"blue":y],[z==null?24:z],[])}),u=32,v=24;g.large_size=u;g.medium_size=v;g.blue_src=o;g.grey_src=p;g.large_blue_src=q;g.component=r;g.make=s;g.jsComponent=t}),null);
__d("MessengerSpinner.react",["MessengerSpinnerReact.bs"],(function a(b,c,d,e,f,g,h){f.exports=h.jsComponent;f.exports.large_size=h.large_size;f.exports.medium_size=h.medium_size}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["ChannelConstants","Link.react","MessengerSpinner.react","React","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m,n,o=k.PropTypes;m=babelHelpers.inherits(p,k.PureComponent);n=m&&m.prototype;p.prototype.render=function(){var q=this.props,r=q.isMessenger,s=q.msecs,t=k.createElement(i,{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},l._("No Internet connection"));if(s==null||false===navigator.onLine)return r?t:k.createElement("div",null,l._("Unable to connect to chat. Check your Internet connection."));else if(s>h.WARNING_COUNTDOWN_THRESHOLD_MSEC)return r?t:k.createElement("div",null,l._("Unable to connect to chat. {try-again-link}",[l.param("try-again-link",k.createElement(i,{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},l._("Try again")))]));else if(s>1e3)return r?t:k.createElement("div",null,l._("Unable to connect to chat. Reconnecting in {seconds}",[l.param("seconds",Math.floor(s/1e3))]));else return r?k.createElement("div",null,k.createElement(j,{color:"grey"}),l._("Connecting...")):k.createElement("div",null,l._("Unable to connect to chat. Reconnecting..."))};function p(){m.apply(this,arguments)}p.propTypes={isMessenger:o.bool,msecs:o.number,onManuallyConnectClick:o.func};f.exports=p}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["ChannelConstants","CurrentUser","React","fbt"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=j.PropTypes;l=babelHelpers.inherits(o,j.PureComponent);m=l&&l.prototype;o.prototype.render=function(){var p=this.props,q=p.hint,r=p.isMessenger;switch(q){case h.HINT_AUTH:return j.createElement("div",null,k._("Your session has timed out. Please log in."));case h.HINT_MAINT:return r?j.createElement("div",null,k._("Messenger is currently down for maintenance.")):j.createElement("div",null,k._("{Chat} is currently down for maintenance.",[k.param("Chat",k._("Chat"))]));case h.HINT_CONN:default:if(!r)return j.createElement("div",null,k._("{Chat} is currently unavailable.",[k.param("Chat",k._("Chat"))]));else if(i.isWorkUser())return j.createElement("div",null,k._("Workplace Chat is currently unavailable."));else return j.createElement("div",null,k._("Messenger is currently unavailable."))}};function o(){l.apply(this,arguments)}o.propTypes={hint:n.string,isMessenger:n.bool};f.exports=o}),null);
__d("ChatSidebarSheet.react",["Arbiter","ChannelConnection","ChatBehavior","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","MercuryConfig","MessengerEnvironment","CSS","JSLogger","LogHistory","MercurySyncConstants","PresencePrivacy","React","SubscriptionsHandler","emptyFunction","fbt","joinClasses","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){"use strict";__p&&__p();var B,C,D=r.create("sidebar_sheet"),E=s.getInstance("sidebar_sheet"),F=v.PropTypes;B=babelHelpers.inherits(G,v.PureComponent);C=B&&B.prototype;function G(H){C.constructor.call(this,H);this.$ChatSidebarSheet3=function(I,J){this.setState({channelStatus:I,channelData:J});this.$ChatSidebarSheet4()}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!i.disconnected(),isOnline:n.isOnline(),notifiesUserMessages:j.notifiesUserMessages()})}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!i.disconnected(),isOnline:n.isOnline(),notifiesUserMessages:j.notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false}}G.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new w();this.$ChatSidebarSheet1.addSubscriptions(i.subscribe([i.CONNECTED,i.SHUTDOWN,i.RECONNECTING],this.$ChatSidebarSheet3),i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this.$ChatSidebarSheet4),u.subscribe("privacy-user-presence-changed",this.$ChatSidebarSheet4),j.subscribe(j.ON_CHANGED,this.$ChatSidebarSheet4),h.subscribe(t.ARBITER_EVENT_INVALID_STATE,function(){E.log("invalid state fatal","{}");this.setState({syncStateInvalid:true,syncStateReconnecting:false})}.bind(this)),h.subscribe(t.ARBITER_EVENT_INVALID_STATE_RETRY,function(){E.log("retry from invalid state","{}");this.$ChatSidebarSheet5()}.bind(this)),h.subscribe(t.ARBITER_EVENT_INVALID_STATE_RECOVER,function(){E.log("recover from invalid state","{}");this.$ChatSidebarSheet6()}.bind(this)))};G.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null}};G.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release()};G.prototype.render=function(){__p&&__p();var H=p.messengerui,I=void 0,J=void 0;if(!this.state.isOnline&&!H){I="offline";J=this.$ChatSidebarSheet7()}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){I="error";J=this.$ChatSidebarSheet8(H)}else if(!this.state.notifiesUserMessages&&!H){I="notice";J=this.$ChatSidebarSheet9()}if(this.state.channelStatus===i.RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)I=z(I,"reconnecting");return v.createElement("div",{className:z(this.props.className,I)},H?null:v.createElement("div",{className:"img"}),v.createElement("div",{className:"message"},J))};G.prototype.$ChatSidebarSheet8=function(H){__p&&__p();if(this.state.channelStatus===i.SHUTDOWN||this.state.syncStateInvalid)return v.createElement(m,{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:H});else if(this.state.channelStatus===i.RECONNECTING||this.state.syncStateReconnecting){var I=this.state.syncStateReconnecting?1:this.state.channelData;if(I>1e3)this.$ChatSidebarSheet2=A(this.$ChatSidebarSheet3.bind(this,i.RECONNECTING,I-1e3),1e3);return v.createElement(l,{isMessenger:H,msecs:I,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)i.reconnect()}.bind(this)})}return null};G.prototype.$ChatSidebarSheet7=function(){return v.createElement(k,{onGoOnlineClick:function H(I){D.log("sidebar_go_online");n.goOnline()}})};G.prototype.$ChatSidebarSheet9=function(){return v.createElement("div",null,y._("Alerts are off while you use another client to chat."))};G.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true})};G.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false})};f.exports=G}),null);
__d("MessengerDotComUpsellMessage.react",["React","fbt"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,h.Component);k=j&&j.prototype;l.prototype.render=function(){return i._("Chat faster on Messenger.com")};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MessengerDotComUpsellSheet.react",["BanzaiODS","ChannelConnection","MessengerDotComUpsellMessage.react","Link.react","React","MercuryServerDispatcher","ShimButton.react","SubscriptionsHandler","ChatConfigInitialData","cx","joinClasses"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s,t;s=babelHelpers.inherits(u,l.PureComponent);t=s&&s.prototype;function u(v){t.constructor.call(this,v);this.$MessengerDotComUpsellSheet3=function(w){w.preventDefault();w.stopPropagation();m.trySend("/ajax/messenger_upsell/dismiss.php",[{}]);this.setState({shouldShow:false})}.bind(this);this.$MessengerDotComUpsellSheet4=function(w,x){this.setState({isConnected:!i.disconnected()})}.bind(this);this.state={isConnected:!i.disconnected(),shouldShow:p.show_messenger_dot_com_upsell}}u.prototype.render=function(){if(!this.state.isConnected||!this.state.shouldShow)return null;var v=p.messenger_dot_com_upsell_version;if(v!="blue"&&v!="white")return null;return l.createElement(k,{href:"https://www.messenger.com",onClick:this.$MessengerDotComUpsellSheet2,target:"_blank",className:r("_ua_",v)},l.createElement("div",{className:"content"},l.createElement("div",{className:"img"}),l.createElement("div",{className:"message"},l.createElement(j,null)),l.createElement(n,{className:"close",onClick:this.$MessengerDotComUpsellSheet3})))};u.prototype.$MessengerDotComUpsellSheet2=function(){var v=p.messenger_dot_com_upsell_version;h.bumpEntityKey("messaging_www","mn.messenger_upsell.click."+v)};u.prototype.componentDidMount=function(){this.$MessengerDotComUpsellSheet1=new o();this.$MessengerDotComUpsellSheet1.addSubscriptions(i.subscribe([i.CONNECTED,i.SHUTDOWN,i.RECONNECTING],this.$MessengerDotComUpsellSheet4))};m.registerEndpoints({"/ajax/messenger_upsell/dismiss.php":{mode:m.IMMEDIATE}});f.exports=u}),null);
__d("MessengerSearchFunnelLogger",["FunnelLogger","MessengerSearchFunnelLoggerConstants","MercuryIDs"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;function l(t,u,v){h.startFunnel(t);h.addFunnelTag(t,u);h.addFunnelTag(t,v);h.appendActionIfNew(t,"search_start");k=[]}function m(t){h.appendActionIfNew(t,"search_end");h.endFunnel(t)}function n(t,u){h.appendActionWithPayload(t,"initiate_content_search",{query_string:u,impression_list:k});h.endFunnel(t)}function o(t,u,v,w){if(v==null||k==null||k.length===0){h.appendActionWithPayload(t,"search_result_error",{error:"threadID or latest impression list are null",thread_id:v,impression_list:k});h.endFunnel(t);return}v=j.getThreadFBIDFromThreadID(v);h.appendActionWithPayload(t,"log_result_selection",{thread_id:v,type:w,rank:k.indexOf(v),search_query:u?u:""})}function p(t,u,v){h.appendActionWithPayloadIfNew(t,"loading_state_impression_list",{search_query:u,impression_list:v});k=v}function q(t,u){h.appendActionWithPayload(t,i.SEND_SERVER_REQUEST,{search_query:u})}function r(t,u,v,w){h.appendActionWithPayload(t,u,{search_query:v,impression_list:w});k=w}function s(t){h.appendAction(t,"clear_search_query");this.endFunnel(t)}f.exports={startFunnel:l,logResultSelection:o,logStartQuery:q,endFunnel:m,logContentSearchInitiation:n,logLoadingStateQuery:p,logUpdateQuery:r,logClearQuery:s}}),null);
__d("MercuryTypeaheadConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:8,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_MESSENGER_ONLY_CONTACT_MAX:4,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_WM_MAX:23,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._%+-]+@((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._%+-]+[A-Z0-9._%+-]*)|([A-Z0-9._%+-]+[A-Z._%+-]+[A-Z0-9._%+-]*))@(?:facebook\\.com))$"})}),null);
__d("MessengerDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g,h){"use strict";f.exports=new h()}),null);
__d("MercuryFilters",["MessagingTag"],(function a(b,c,d,e,f,g,h){var i=[h.UNREAD],j={ALL:"all",UNREAD:h.UNREAD,getSupportedFilters:function k(){return i.concat()},isSupportedFilter:function k(l){return i.includes(l)}};f.exports=j}),null);
__d("MessengerStateProcessor",["MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryParticipants","MercuryThreadIDMap","MercuryThreads","MercuryVanityIDMap.bs","MessengerURIConstants"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p={preprocess:function r(s){__p&&__p();var t=s.activeThreadID;if(t){var u=i.getUserIDFromThreadID(t),v=u&&k.getNow(i.getParticipantIDFromUserID(u));if(v&&v.type!==j.EVENT)s.threadKey=v.vanity||u;else if(u&&!v){var w=i.getParticipantIDFromUserID(u);s.threadKey=n.hasID(w)?n.getVanity(w):u}else{var x=l.get(),y=x.getServerIDFromClientIDNow(t);s.threadKey=y||i.tokenize(t).value}}delete s.activeThreadID;return s},postprocess:function r(s){__p&&__p();var t=l.get(),u=m.get(),v=q(s.threadKey),w=void 0;w=i.isValid(v)?v:t.getClientIDFromServerIDNow(v);if(!w){var x=k.getIDFromVanityOrFBID(v),y=x&&u.getCanonicalThreadToParticipant(x,null,h.MESSENGER);if(y)w=y.thread_id}if(w){s.activeThreadID=w;s.serverThreadID=t.getServerIDFromClientIDNow(w)}delete s.threadKey;return s},supportInboxPostprocess:function r(s){if(s.threadKey)s.activeThreadID=i.getThreadIDFromSupportInboxItemID(s.threadKey);delete s.threadKey;return s}};function q(r){if(!r)return null;return r.startsWith(o.GROUP_PREFIX)?r.substr(o.GROUP_PREFIX.length):r}f.exports=p}),null);
__d("MessengerURISerializer",["CurrentEnvironment","MercuryFilters","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase","MercuryIDs"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";__p&&__p();var q="/?$",r=function r(v,w){v.setPath(h.facebookdotcom?l.FACEBOOK_PREFIX+w:w)},s=function s(v,w){var x=v.getPath();if(h.facebookdotcom&&!x.startsWith(l.FACEBOOK_PREFIX))w=l.FACEBOOK_PREFIX+w;v.setPath(v.getPath()+w)},t={serialize:function v(w){__p&&__p();var x=new n(o.uri);w=k.preprocess(w);switch(w.masterView){case m.MASTER.GROUPS:r(x,l.GROUPS_PATH);break;case m.MASTER.PAYMENT:r(x,l.PAYMENT_PATH);break;case m.MASTER.PEOPLE:r(x,l.PEOPLE_PATH);break;case m.MASTER.SUPPORT:r(x,l.SUPPORT_PATH);break}switch(w.folder){case j.OTHER:r(x,l.FILTERED_REQUESTS_PATH);break;case j.ACTION_ARCHIVED:r(x,l.ARCHIVED_PATH);break;case j.PENDING:r(x,l.MESSAGE_REQUESTS_PATH);break}if(w.detailView===m.DETAIL.PAYTHREAD){s(x,l.PAYMENT_PAY_PATH);if(w.threadKey)x.addQueryData("id",w.threadKey)}else if(w.detailView===m.DETAIL.PAYFRIENDPICKER)s(x,l.PAYMENT_PAY_PATH);else if(w.detailView===m.DETAIL.COMPOSE)s(x,l.COMPOSE_SUBPATH);else if(w.threadKey)if(w.masterView===m.MASTER.PAYMENT){r(x,l.THREAD_PREFIX+w.threadKey);delete w.extraQueryParams.id;delete w.extraQueryParams.a;delete w.extraQueryParams.m}else s(x,l.THREAD_PREFIX+w.threadKey);else if(w.masterView===m.MASTER.PAYMENT){r(x,"");delete w.extraQueryParams.id;delete w.extraQueryParams.a;delete w.extraQueryParams.m}else s(x,"");if(w.extraQueryParams)x.addQueryData(w.extraQueryParams);if(i.isSupportedFilter(w.filter))x.addQueryData({filter:w.filter});if(w.query!=null){var y;x.addQueryData((y={},y[w.masterView===m.MASTER.SEARCH?"qa":"q"]=w.query,y))}if(w.threadIDs)x.addQueryData({threadIDs:JSON.stringify(w.threadIDs)});if(w.mid)x.addQueryData({mid:w.mid});return x},deserialize:function v(w){__p&&__p();var x={},y=w.getPath();if(h.facebookdotcom&&!y.startsWith(l.FACEBOOK_PREFIX))x.notMessenger=true;var z=y.replace(l.FACEBOOK_PREFIX,""),A=void 0,B=w.getQueryData(),C=B.filter,D=B.mid,E=B.q,F=B.qa,G=B.threadIDs,H=babelHelpers.objectWithoutProperties(B,["filter","mid","q","qa","threadIDs"]);try{A=JSON.parse(G)}catch(I){x.threadIDs=null}if(A)x.threadIDs=A.filter(function(K){return p.isValidThreadID(K)});if(z.match("^"+l.GROUPS_PATH))x.masterView=m.MASTER.GROUPS;else if(z.match("^"+l.PEOPLE_PATH))x.masterView=m.MASTER.PEOPLE;else if(z.match("^"+l.SUPPORT_PATH))x.masterView=m.MASTER.SUPPORT;else if(z.match("^"+l.PAYMENT_PATH))x.masterView=m.MASTER.PAYMENT;else if(F)x.masterView=m.MASTER.SEARCH;else x.masterView=m.MASTER.RECENT;if(z.match("^"+l.FILTERED_REQUESTS_PATH))x.folder=j.OTHER;else if(z.match("^"+l.ARCHIVED_PATH))x.folder=j.ACTION_ARCHIVED;else if(z.match("^"+l.MESSAGE_REQUESTS_PATH))x.folder=j.PENDING;else x.folder=j.INBOX;if(z.match(l.COMPOSE_SUBPATH+q))x.detailView=m.DETAIL.COMPOSE;else if(z.match("^"+l.PAYMENT_PATH+l.PAYMENT_PAY_PATH))if(H&&H.id){x.threadKey=H.id;x.detailView=m.DETAIL.PAYTHREAD}else x.detailView=m.DETAIL.PAYFRIENDPICKER;else{var J=u(z);if(J){x.threadKey=J;x.detailView=m.DETAIL.THREAD}}if(i.isSupportedFilter(C))x.filter=C;else x.filter=i.ALL;x.mid=D;x.query=F||E;x.extraQueryParams=H;if(x.masterView===m.MASTER.SUPPORT)return k.supportInboxPostprocess(x);return k.postprocess(x)}};function u(v){var w=v.match(l.THREAD_PREFIX+"([^/]+)"+q);return w&&decodeURIComponent(w[1])}f.exports=t}),null);
__d("MessengerActions",["Bootloader","EventProfiler","MercuryIDs","MessengerDispatcher","MessengerURISerializer","MercuryTypeaheadConstants","MessengerView","URI","goURI","invariant","keyMirror"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s=r({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),t={Types:s,changeDetailView:function w(x){v(function(y){if(y.detailView!==x)return{detailView:x};return null})},changeMasterView:function w(x){__p&&__p();v(function(y){__p&&__p();if(y.masterView!==x){var z={masterView:x};if(y.masterView===n.MASTER.SEARCH){z.query=undefined;h.loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(A,B){A&&A.endFunnel(B.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions")}return z}return null})},selectAggregation:function w(x){v(function(y){return{detailView:n.MASTER.RECENT,threadIDs:x,mid:null}})},selectThread:function w(x,y){__p&&__p();if(y===m.MEETING_ROOM_PAGE_TYPE){!!x||q(0);var z=j.getUserIDFromThreadID(x);!!z||q(0);var A=new o(),B=A.getQualifiedURI().getSubdomain();A.setDomain("facebook.com").setSubdomain(B).setPath("/"+z).setProtocol("https");window.open(A,"_blank");return}i.tagCurrentActiveInteractionsAs("MessengerThreadSwitch");k.dispatch({type:s.SELECT_THREAD,threadID:x});v(function(C){if(C.activeThreadID!==x)return{activeThreadID:x,detailView:n.DETAIL.THREAD,mid:null};return null})},changeState:function w(x){k.dispatch({type:s.REPLACE_STATE,nextState:x})},changeMDotMeReferral:function w(){var x=arguments.length<=0||arguments[0]===undefined?null:arguments[0],y=arguments.length<=1||arguments[1]===undefined?null:arguments[1];k.dispatch({type:t.Types.UPDATE_MDOT_ME,refCode:x,refThreadID:y})},changeThreadTag:function w(){var x=arguments.length<=0||arguments[0]===undefined?null:arguments[0],y=arguments.length<=1||arguments[1]===undefined?null:arguments[1];k.dispatch({type:t.Types.UPDATE_THREAD_TAG,messagingTags:x,threadID:y})},changeFolder:function w(x){v(function(y){if(y.folder!==x)return{folder:x};return null})},changeFilter:function w(x){v(function(y){if(y.filter!==x)return{filter:x};return null})},changeQuery:function w(x){v(function(y){if(y.query!==x)return{query:x};return null})},changeQueryAll:function w(x){v(function(y){if(y.queryAll!==x)return{query:x,masterView:n.MASTER.SEARCH};return null})},changeMid:function w(x){v(function(y){if(y.mid!==x)return{mid:x};return null})},changeID:function w(x){v(function(y){if(y.extraQueryParams.id!==x)return{extraQueryParams:babelHelpers["extends"]({},y.extraQueryParams,{id:x})};return null})},prepareFilesForSend:function w(x,y){if(!x)return;k.dispatch({type:t.Types.PREPARE_FILES_FOR_SEND,threadID:x,files:y})},uploadedFile:function w(x,y,z){if(!x)return;k.dispatch({type:t.Types.UPLOADED_FILE,threadID:x,uploadID:y,payload:z})},cancelFileUpload:function w(x,y){if(!x)return;k.dispatch({type:t.Types.CANCEL_FILE_UPLOAD,threadID:x,uploadID:y})},uploadFileFailed:function w(x,y){if(!x)return;k.dispatch({type:t.Types.UPLOAD_FILE_FAILED,threadID:x,uploadID:y})},cleanFiles:function w(x){if(!x)return;k.dispatch({type:t.Types.EMPTY_FILES,threadID:x})},loadingPreview:function w(x,y){k.dispatch({type:t.Types.LINK_PREVIEW,threadID:x,match:y})},loadingShareData:function w(x){k.dispatch({type:t.Types.LOADING_SHARE_DATA,threadID:x})},loadedShareData:function w(x,y){k.dispatch({type:t.Types.LOADED_SHARE_DATA,threadID:x,attachmentData:y})},removeSharePreview:function w(x){k.dispatch({type:t.Types.REMOVE_SHARE_PREVIEW,threadID:x})}};function u(w,x){return w.detailView==null}function v(w){var x=l.deserialize(new o(window.location.href)),y=w(x),z=u(x,y);if(y)p(l.serialize(Object.assign(x,y)),false,z)}f.exports=t}),null);
__d("MessengerTypeaheadUtils",["immutable","MercuryTypeaheadConstants","MessengerEnvironment","ReactDOM","SearchableEntry","WorkModeConfig","fbt","gkx","ix","mapObject"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r,s=h.OrderedMap,t=500,u=100,v=m.is_work_user||o("AT62Bmuf0c-b-qsSo41XTNJvFn7VwRrjwsI0onsrzyJ35XDxvhLHgPbXt3hZorqUAYplG7jtkngT9YqyGngqDfMq")?[i.SEARCH_TYPE,i.FRIEND_TYPE,i.FB4C_TYPE,i.THREAD_TYPE,i.MEETING_ROOM_PAGE_TYPE,i.INTERNAL_BOT_PAGE_TYPE,i.PAGE_TYPE,i.NON_FRIEND_TYPE,i.GAME_TYPE]:[i.SEARCH_TYPE,i.FRIEND_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.MEETING_ROOM_PAGE_TYPE,i.PAGE_TYPE,i.NON_FRIEND_TYPE,i.GAME_TYPE],w=(r={},r[i.SEARCH_TYPE]={header:""},r[i.FRIEND_TYPE]={header:n._("Contacts")},r[i.FB4C_TYPE]={header:n._("Colleagues")},r[i.THREAD_TYPE]={header:n._("Group conversations")},r[i.PAGE_TYPE]={header:n._("Businesses")},r[i.MEETING_ROOM_PAGE_TYPE]={header:n._("Meeting rooms")},r[i.INTERNAL_BOT_PAGE_TYPE]={header:n._("Bots")},r[i.NON_FRIEND_TYPE]={header:n._("More people")},r.game={header:n._("Games")},r),x={sortEntries:function y(z,A){__p&&__p();var B=[],C=[],D=[],E=[],F=[],G=[],H=[],I=[],J=[];z.forEach(function(K){__p&&__p();switch(K.getType()){case i.FRIEND_TYPE:C.push(K);break;case i.FB4C_TYPE:D.push(K);break;case i.THREAD_TYPE:E.push(K);break;case i.PAGE_TYPE:case i.COMMERCE_PAGE_TYPE:G.push(K);break;case i.NON_FRIEND_TYPE:F.push(K);break;case i.MEETING_ROOM_PAGE_TYPE:H.push(K);break;case i.INTERNAL_BOT_PAGE_TYPE:I.push(K);break;case i.SEARCH_TYPE:B.push(K);break;case i.GAME_TYPE:J.push(K);break}});return B.concat(C,D,E,H,I,G,F,J)},sortEntriesWithoutPages:function y(z){__p&&__p();var A=[],B=[],C=[],D=[];z.forEach(function(E){switch(E.getType()){case i.FRIEND_TYPE:A.push(E);break;case i.FB4C_TYPE:B.push(E);break;case i.THREAD_TYPE:C.push(E);break;case i.NON_FRIEND_TYPE:D.push(E);break}});return A.concat(B,C,D)},sortEntriesWithoutGroupsOrViewer:function y(z,A){__p&&__p();var B=[],C=[],D=[];z.forEach(function(E){if(E.getUniqueID()===A)return;switch(E.getType()){case i.FRIEND_TYPE:B.push(E);break;case i.FB4C_TYPE:C.push(E);break;case i.NON_FRIEND_TYPE:D.push(E);break}});return B.concat(C,D)},getEntryOrder:function y(z){var A=arguments.length<=1||arguments[1]===undefined?v:arguments[1];return A},orderEntries:function y(z,A){var B=[];this.getEntryOrder(A).filter(function(C){return C!==i.SEARCH_TYPE}).concat(i.SEARCH_TYPE).forEach(function(C){return B.push.apply(B,z.filter(function(D){return this.areSectionsEqual(D.getType(),C)}.bind(this)))}.bind(this));return B},buildSingleSection:function y(z){return s([["",z]])},buildListSections:function y(z,A,B){__p&&__p();if(!z.length)return s();B=this.getEntryOrder(A,B);var C=q(w,function(D){return babelHelpers["extends"]({},D,{entries:[]})});C[i.COMMERCE_PAGE_TYPE]=C[i.PAGE_TYPE];z.forEach(function(D){var E=D.getType();if(C[E])C[E].entries.push(D)});return s(B.filter(function(D){return C[D].entries.length}).map(function(D){return[C[D].header,C[D].entries]}))},buildCustomSection:function y(z,A){var B;return B={},B[z]=A,B},areSectionsEqual:function y(z,A){if(z===i.COMMERCE_PAGE_TYPE)return A===i.COMMERCE_PAGE_TYPE||A===i.PAGE_TYPE;return z===A},scrollEntryIntoView:function y(z,A){var B=k.findDOMNode(A),C=A.getScrollTop(),D=z.offsetTop-C,E=B.offsetHeight-z.offsetHeight,F=Math.abs(E-D);if(D>=E&&F<=u)A.scrollToPosition(C+D-E,true,{duration:t});else if(D<0&&F<=E+u)A.scrollToPosition(C+D,true,{duration:t})},getMessageSearchEntry:function y(z){if(!j.messengerui||z.length<2)return null;return new l({uniqueID:"__special_search_entry__",title:n._("Search messages for \"{queryString}\"",[n.param("queryString",z)]),photo:p("86924"),type:i.SEARCH_TYPE})}};f.exports=x}),null);
__d("MessengerSearchSource",["ChatSearchSource","MercuryConfig","MercuryIDs","MercuryParticipants","MercuryParticipantTypes","MercurySingletonProvider","MessengerEnvironment","MessengerSearchFunnelLoggerConstants","MessengerTypeaheadUtils","SearchableEntry","emptyFunction","requireWeak"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";__p&&__p();var t,u,v=50,w=n.messengerui;t=babelHelpers.inherits(x,h);u=t&&t.prototype;x.getForFBID=function(z){return y.getForFBID(z)};x.get=function(){return y.get()};function x(z){u.constructor.call(this,{queryRequests:[{uri:"/ajax/mercury/composer_query.php"}],searchType:o.WWW_SIDEBAR_TAG});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=z}x.prototype.bootstrapImpl=function(z){s("OrderedFriendsList",function(B){return B.getSearchableEntries(v,true,function(C){this.$MessengerSearchSource1=C;u.addLocalEntries.call(this,C)}.bind(this))}.bind(this));var A=j.getParticipantIDFromUserID(this.$MessengerSearchSource2);k.get(A,function(B){u.addLocalEntries.call(this,[new q({uniqueID:B.fbid?B.fbid.toString():B.id,title:B.name,type:l.FRIEND,photo:B.big_image_src||B.image_src,uri:B.href,auxiliaryData:{isMessengerUser:B.is_messenger_user}})])}.bind(this));u.bootstrapImpl.call(this,r);z()};x.prototype.searchImpl=function(z,A,B){B=B||{};if(z===""&&B.showDefaultEntries){A(this.$MessengerSearchSource1,z);var C=B&&B.onQueryFinished;C&&C(z);return}B.threadLimit=i.MaxThreadResults;u.searchImpl.call(this,z,this.$MessengerSearchSource3(A,B),B)};x.prototype.$MessengerSearchSource3=function(z,A){return w&&A&&A.showThreadSearchEntry?function(B,C){var D=p.getMessageSearchEntry(C);if(D)z([D].concat(B),C);else z(B,C)}:z};var y=new m(x);f.exports=x}),null);
__d("MessengerSearchTypeahead.react",["AbstractTypeahead.react","Bootloader","Image.react","MercuryIDs","MercuryTypeaheadConstants","MercuryVanityIDMap.bs","MessengerActions","MessengerSearchFunnelLogger","MessengerSearchFunnelLoggerConstants","MessengerSearchSource","React","TypeaheadNavigation","cx","fbt","ifRequired","ix","joinClasses","MercuryThreadIDMap","MercuryThreads"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";__p&&__p();var y,z,A=c("MercuryThreadIDMap").get(),B=c("MercuryThreads").get(),C=r.PropTypes,D=w("86933"),E=100,F=null,G=null;y=babelHelpers.inherits(H,r.PureComponent);z=y&&y.prototype;function H(){var J,K;for(var L=arguments.length,M=Array(L),N=0;N<L;N++)M[N]=arguments[N];return K=(J=z.constructor).call.apply(J,[this].concat(M)),I.call(this),K}H.prototype.componentWillMount=function(){__p&&__p();var J=function J(L,M,N){var O=L.indexOf(M),P=O==-1?L.length-1:O-1;N(P==-1?L[L.length-1]:L[P])},K=function K(L,M,N){var O=L.indexOf(M)+1;N(O==L.length?L[0]:L[O])};J=s.moveDown;K=s.moveUp;this.$MessengerSearchTypeahead1=function(L){for(var M=arguments.length,N=Array(M>1?M-1:0),O=1;O<M;O++)N[O-1]=arguments[O];return J.apply(undefined,[G.orderEntries(L,this.props.queryString)].concat(N))}.bind(this);this.$MessengerSearchTypeahead2=function(L){for(var M=arguments.length,N=Array(M>1?M-1:0),O=1;O<M;O++)N[O-1]=arguments[O];return K.apply(undefined,[G.orderEntries(L,this.props.queryString)].concat(N))}.bind(this)};H.prototype.render=function(){var J=this.props.isFacebookChat?u._("Search"):u._("Search Messenger");return r.createElement("div",{className:"_3rh8"},r.createElement(h,{"aria-label":u._("friends to message"),autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:x(this.props.className||"","_5iwm"+(this.props.isFocused||!!this.props.queryString?" _5iwn":"")+" _150g"+(this.props.hideResults?" _1a03":"")),disabled:this.props.hideResults,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.$MessengerSearchTypeahead3,onChange:this.$MessengerSearchTypeahead4,onFocus:this.$MessengerSearchTypeahead5,onMouseOver:this.$MessengerSearchTypeahead6,onClick:this.$MessengerSearchTypeahead6,onSelectAttempt:this.$MessengerSearchTypeahead7,placeholder:J.toString(),presenter:{ViewRenderer:F,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||E,sortEntries:this.$MessengerSearchTypeahead8,useLayer:false},queryString:this.props.queryString,role:"search",searchSource:q.getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead9,onQueryStarted:this.$MessengerSearchTypeahead10,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),r.createElement(j,{onMouseDown:function(){var K;this.$MessengerSearchTypeahead11();(K=this.props).onClear.apply(K,arguments)}.bind(this),className:x(this.props.className||"",(!this.props.queryString?"hidden_elem":"")+" _2xme"),src:D}))};H.prototype.$MessengerSearchTypeahead11=function(){o.logClearQuery(p.NAME)};H.propTypes={className:C.string,hideResults:C.bool,isFacebookChat:C.bool,isFocused:C.bool,maxEntries:C.number,onBlur:C.func,onChange:C.func,onClear:C.func,onFocus:C.func,onSelect:C.func.isRequired,onScrollIntoView:C.func,queryString:C.string,viewer:C.string.isRequired};var I=function I(){__p&&__p();this.state={isLoading:false,orderable:!!G};this.$MessengerSearchTypeahead3=function(){var J;(J=this.props).onBlur.apply(J,arguments);o.endFunnel(p.NAME)}.bind(this);this.$MessengerSearchTypeahead4=function(){var J;(J=this.props).onChange.apply(J,arguments)}.bind(this);this.$MessengerSearchTypeahead5=function(){var J;this.$MessengerSearchTypeahead6();(J=this.props).onFocus.apply(J,arguments)}.bind(this);this.$MessengerSearchTypeahead6=function(){if(!this.state.orderable)i.loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(J,K){v("FantaTabsEagerBootloader",function(L){return L.bootload()});F=J;G=K;this.setState({orderable:true})}.bind(this),"MessengerSearchTypeahead.react")}.bind(this);this.$MessengerSearchTypeahead10=function(J){if(J===this.props.queryString)this.setState({isLoading:true})}.bind(this);this.$MessengerSearchTypeahead9=function(J){if(J===this.props.queryString)this.setState({isLoading:false})}.bind(this);this.$MessengerSearchTypeahead8=function(J){return G?G.sortEntries(J,this.props.queryString):J}.bind(this);this.$MessengerSearchTypeahead7=function(J,K){__p&&__p();var L,M=this,N=J.getUniqueID(),O=J.getType(),P=J.getAuxiliaryData().alias;if(P)m.set(P,k.getParticipantIDFromUserID(N));if(O===l.SEARCH_TYPE){n.changeQueryAll(this.props.queryString);o.logContentSearchInitiation(p.NAME,this.props.queryString)}else if(O===l.THREAD_TYPE)A.getClientIDFromServerID(N,function(Q){this.props.onSelect(Q,O);o.logResultSelection(p.NAME,this.props.queryString,Q,p.GROUP)}.bind(this));else(function(){__p&&__p();var Q=void 0;switch(O){case l.FRIEND_TYPE:Q=p.USER_CONTACT;break;case l.NON_FRIEND_TYPE:Q=p.USER_NON_CONTACT;break;case l.FB4C_TYPE:Q=p.COWORKER;break;case l.GAME_TYPE:Q=p.GAME;break;case l.PAGE_TYPE:case l.INTERNAL_BOT_PAGE_TYPE:case l.COMMERCE_PAGE_TYPE:case l.MEETING_ROOM_PAGE_TYPE:Q=p.PAGE;break;default:Q=p.OTHER}B.getThreadMeta(k.getThreadIDFromUserID(N),function(R){this.props.onSelect(R.thread_id,O);o.logResultSelection(p.NAME,this.props.queryString,R.thread_id,Q)}.bind(M))})()}.bind(this)};f.exports=H}),null);
__d("ChatTypeaheadWrapper.react",["Arbiter","Bootloader","LoadOnRender.react","ChatConfig","ChatOpenTabEventLogger","ChatSidebarComposeLink.react","ChatSidebarSections","ChatSidebarSheet.react","ChatTypeaheadConstants","FantaTabActions","LazyComponent.react","MercuryIDs","MercuryParticipantTypes","MessengerDotComUpsellSheet.react","MessengerSearchFunnelLogger","MessengerSearchFunnelLoggerConstants","MessengerSearchTypeahead.react","React","Run","ChatSidebarDropdown.react","SidebarType","ChatSidebarActions","cx","emptyFunction","getActiveElement","gkx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){"use strict";__p&&__p();var H,I,J=40,K=k.get("divebar_rounded_profile",false);function L(N){h.inform("sidebar/typeahead/active",N)}H=babelHelpers.inherits(M,y.Component);I=H&&H.prototype;function M(){var N,O;for(var P=arguments.length,Q=Array(P),R=0;R<P;R++)Q[R]=arguments[R];return O=(N=I.constructor).call.apply(N,[this].concat(Q)),this.state={height:0,value:"",isSearching:false},this.$ChatTypeaheadWrapper1=function(){this.setState({isSearching:false,value:""});v.endFunnel(w.NAME)}.bind(this),O}M.prototype.componentDidMount=function(){if(this.props.isSidebar)h.subscribe("sidebar/resized",function(N,O){this.setState({height:O})}.bind(this));else h.subscribe("buddyList/resized",function(N,O){this.setState({height:O})}.bind(this))};M.prototype.componentWillUpdate=function(N,O){if(O.isSearching!==this.state.isSearching)L(O.isSearching)};M.prototype.render=function(){__p&&__p();var N=this.state.height!=null?Math.floor((this.state.height-J*2)/J):null;return y.createElement("div",{className:!K?"squareProfile":""},y.createElement(u,{className:"fbMessengerDotComUpsell"}),y.createElement(o,{className:"fbChatSidebarMessage"}),y.createElement(x,{className:G("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?"_62it":"",isFacebookChat:true,isFocused:true,maxEntries:N,queryString:this.state.value,viewer:this.props.id,onBlur:this.$ChatTypeaheadWrapper1,onChange:function(O){var P=O.target.value;this.setState({isSearching:P!=="",value:P})}.bind(this),onClear:E,onFocus:this.$ChatTypeaheadWrapper2,onScrollIntoView:E,onSelect:function(O,P){__p&&__p();F().blur();if(P===p.MEETING_ROOM_PAGE_TYPE)i.loadModules(["goURI"],function(R){this.setState({isSearching:false,value:""});var Q=s.getUserIDFromThreadID(O);R("/"+(Q||""))}.bind(this),"ChatTypeaheadWrapper.react");else{q.openTab(O,"chat_sidebar_typeahead");var Q=null;if(!P||P===t.FRIEND||P===p.FRIEND_TYPE||P===p.PAGE_TYPE||P===p.USER_TYPE)if(s.isValidThreadID(O))Q=s.getUserIDFromThreadID(O);l.logClickOpen(n.TYPEAHEAD,O,Q)}}.bind(this)}),this.props.isSidebar?y.createElement("div",{className:"_531b"},y.createElement(A,{sidebarType:B.SIDEBAR,onToggleSidebar:C.disable}),y.createElement(m,{className:"_3a-4 _5q85"}),G("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?y.createElement(j,{component:y.createElement(r,null),loader:function O(P){i.loadModules(["ChatSidebarGroupCreateButtonReact.bs"],function(Q){var R=Q.jsComponent;return P(R)},"ChatTypeaheadWrapper.react")},placeholder:y.createElement("div",{className:"_1-4-"})}):null):null)};M.prototype.$ChatTypeaheadWrapper2=function(){v.startFunnel(w.NAME,w.WWW_SIDEBAR_TAG,w.UNIVERSAL_SEARCH)};f.exports=M}),null);
__d("ChatTypeaheadCore",["ChatTypeaheadWrapper.react","React","ReactDOM"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k={init:function l(m,n,o){j.render(i.createElement(h,{id:n,isSidebar:o}),m)}};f.exports=k}),null);